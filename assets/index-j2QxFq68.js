function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SearchView-BQtDqppQ.js","assets/DiscussionCard-Vi-PVLAN.css","assets/SavedView-C39pXZcZ.js","assets/SavedView-Cgke0cYw.css","assets/DiscusionView-CtT3mMdQ.js","assets/CarouselCard-DieEuglk.js","assets/AddView-DgIcthaJ.js","assets/AddView-CN5y8bKo.css","assets/SingleView-p-eywVO8.js","assets/SingleView-COJxjCca.css","assets/HelpView-jPtx4dgH.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nd(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Ne={},_i=[],jt=()=>{},u0=()=>!1,bl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),rd=t=>t.startsWith("onUpdate:"),st=Object.assign,sd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},d0=Object.prototype.hasOwnProperty,ke=(t,e)=>d0.call(t,e),ie=Array.isArray,Ti=t=>ao(t)==="[object Map]",vl=t=>ao(t)==="[object Set]",Rf=t=>ao(t)==="[object Date]",le=t=>typeof t=="function",Ue=t=>typeof t=="string",vr=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",qm=t=>(Me(t)||le(t))&&le(t.then)&&le(t.catch),Gm=Object.prototype.toString,ao=t=>Gm.call(t),f0=t=>ao(t).slice(8,-1),Jm=t=>ao(t)==="[object Object]",od=t=>Ue(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,bs=nd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},h0=/-(\w)/g,kn=wl(t=>t.replace(h0,(e,n)=>n?n.toUpperCase():"")),p0=/\B([A-Z])/g,Zi=wl(t=>t.replace(p0,"-$1").toLowerCase()),kl=wl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ic=wl(t=>t?`on${kl(t)}`:""),wr=(t,e)=>!Object.is(t,e),Jo=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ua=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Fs=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Nf;const Ym=()=>Nf||(Nf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ad(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ue(r)?b0(r):ad(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ue(t)||Me(t))return t}const m0=/;(?![^(]*\))/g,g0=/:([^]+)/,y0=/\/\*[^]*?\*\//g;function b0(t){const e={};return t.replace(y0,"").split(m0).forEach(n=>{if(n){const r=n.split(g0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xe(t){let e="";if(Ue(t))e=t;else if(ie(t))for(let n=0;n<t.length;n++){const r=xe(t[n]);r&&(e+=r+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const v0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",w0=nd(v0);function Xm(t){return!!t||t===""}function k0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Sl(t[r],e[r]);return n}function Sl(t,e){if(t===e)return!0;let n=Rf(t),r=Rf(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=vr(t),r=vr(e),n||r)return t===e;if(n=ie(t),r=ie(e),n||r)return n&&r?k0(t,e):!1;if(n=Me(t),r=Me(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Sl(t[o],e[o]))return!1}}return String(t)===String(e)}function S0(t,e){return t.findIndex(n=>Sl(n,e))}const hs=t=>Ue(t)?t:t==null?"":ie(t)||Me(t)&&(t.toString===Gm||!le(t.toString))?JSON.stringify(t,Qm,2):String(t),Qm=(t,e)=>e&&e.__v_isRef?Qm(t,e.value):Ti(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[sc(r,s)+" =>"]=i,n),{})}:vl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>sc(n))}:vr(e)?sc(e):Me(e)&&!ie(e)&&!Jm(e)?String(e):e,sc=(t,e="")=>{var n;return vr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class E0{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){Mt=this}off(){Mt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function _0(t,e=Mt){e&&e.active&&e.effects.push(t)}function Zm(){return Mt}function T0(t){Mt&&Mt.cleanups.push(t)}let zr;class ld{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,_0(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ai();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(x0(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),li()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=fr,n=zr;try{return fr=!0,zr=this,this._runnings++,Pf(this),this.fn()}finally{Df(this),this._runnings--,zr=n,fr=e}}stop(){var e;this.active&&(Pf(this),Df(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function x0(t){return t.value}function Pf(t){t._trackId++,t._depsLength=0}function Df(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)eg(t.deps[e],t);t.deps.length=t._depsLength}}function eg(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let fr=!0,Qc=0;const tg=[];function ai(){tg.push(fr),fr=!1}function li(){const t=tg.pop();fr=t===void 0?!0:t}function cd(){Qc++}function ud(){for(Qc--;!Qc&&Zc.length;)Zc.shift()()}function ng(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&eg(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Zc=[];function rg(t,e,n){cd();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Zc.push(r.scheduler)))}ud()}const ig=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},eu=new WeakMap,Ur=Symbol(""),tu=Symbol("");function Ot(t,e,n){if(fr&&zr){let r=eu.get(t);r||eu.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=ig(()=>r.delete(n))),ng(zr,i)}}function $n(t,e,n,r,i,s){const o=eu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ie(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!vr(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ie(t)?od(n)&&a.push(o.get("length")):(a.push(o.get(Ur)),Ti(t)&&a.push(o.get(tu)));break;case"delete":ie(t)||(a.push(o.get(Ur)),Ti(t)&&a.push(o.get(tu)));break;case"set":Ti(t)&&a.push(o.get(Ur));break}cd();for(const l of a)l&&rg(l,4);ud()}const C0=nd("__proto__,__v_isRef,__isVue"),sg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(vr)),Lf=O0();function O0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ee(this);for(let s=0,o=this.length;s<o;s++)Ot(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Ee)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ai(),cd();const r=Ee(this)[e].apply(this,n);return ud(),li(),r}}),t}function A0(t){const e=Ee(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class og{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?j0:ug:s?cg:lg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ie(e);if(!i){if(o&&ke(Lf,n))return Reflect.get(Lf,n,r);if(n==="hasOwnProperty")return A0}const a=Reflect.get(e,n,r);return(vr(n)?sg.has(n):C0(n))||(i||Ot(e,"get",n),s)?a:He(a)?o&&od(n)?a:a.value:Me(a)?i?fg(a):es(a):a}}class ag extends og{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=Bi(s);if(!da(r)&&!Bi(r)&&(s=Ee(s),r=Ee(r)),!ie(e)&&He(s)&&!He(r))return l?!1:(s.value=r,!0)}const o=ie(e)&&od(n)?Number(n)<e.length:ke(e,n),a=Reflect.set(e,n,r,i);return e===Ee(i)&&(o?wr(r,s)&&$n(e,"set",n,r):$n(e,"add",n,r)),a}deleteProperty(e,n){const r=ke(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&$n(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!vr(n)||!sg.has(n))&&Ot(e,"has",n),r}ownKeys(e){return Ot(e,"iterate",ie(e)?"length":Ur),Reflect.ownKeys(e)}}class I0 extends og{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const M0=new ag,R0=new I0,N0=new ag(!0),dd=t=>t,El=t=>Reflect.getPrototypeOf(t);function Io(t,e,n=!1,r=!1){t=t.__v_raw;const i=Ee(t),s=Ee(e);n||(wr(e,s)&&Ot(i,"get",e),Ot(i,"get",s));const{has:o}=El(i),a=r?dd:n?md:Hs;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Mo(t,e=!1){const n=this.__v_raw,r=Ee(n),i=Ee(t);return e||(wr(t,i)&&Ot(r,"has",t),Ot(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Ro(t,e=!1){return t=t.__v_raw,!e&&Ot(Ee(t),"iterate",Ur),Reflect.get(t,"size",t)}function Bf(t){t=Ee(t);const e=Ee(this);return El(e).has.call(e,t)||(e.add(t),$n(e,"add",t,t)),this}function $f(t,e){e=Ee(e);const n=Ee(this),{has:r,get:i}=El(n);let s=r.call(n,t);s||(t=Ee(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?wr(e,o)&&$n(n,"set",t,e):$n(n,"add",t,e),this}function Ff(t){const e=Ee(this),{has:n,get:r}=El(e);let i=n.call(e,t);i||(t=Ee(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&$n(e,"delete",t,void 0),s}function Hf(){const t=Ee(this),e=t.size!==0,n=t.clear();return e&&$n(t,"clear",void 0,void 0),n}function No(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Ee(o),l=e?dd:t?md:Hs;return!t&&Ot(a,"iterate",Ur),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Po(t,e,n){return function(...r){const i=this.__v_raw,s=Ee(i),o=Ti(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?dd:e?md:Hs;return!e&&Ot(s,"iterate",l?tu:Ur),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Wn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function P0(){const t={get(s){return Io(this,s)},get size(){return Ro(this)},has:Mo,add:Bf,set:$f,delete:Ff,clear:Hf,forEach:No(!1,!1)},e={get(s){return Io(this,s,!1,!0)},get size(){return Ro(this)},has:Mo,add:Bf,set:$f,delete:Ff,clear:Hf,forEach:No(!1,!0)},n={get(s){return Io(this,s,!0)},get size(){return Ro(this,!0)},has(s){return Mo.call(this,s,!0)},add:Wn("add"),set:Wn("set"),delete:Wn("delete"),clear:Wn("clear"),forEach:No(!0,!1)},r={get(s){return Io(this,s,!0,!0)},get size(){return Ro(this,!0)},has(s){return Mo.call(this,s,!0)},add:Wn("add"),set:Wn("set"),delete:Wn("delete"),clear:Wn("clear"),forEach:No(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Po(s,!1,!1),n[s]=Po(s,!0,!1),e[s]=Po(s,!1,!0),r[s]=Po(s,!0,!0)}),[t,n,e,r]}const[D0,L0,B0,$0]=P0();function fd(t,e){const n=e?t?$0:B0:t?L0:D0;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ke(n,i)&&i in r?n:r,i,s)}const F0={get:fd(!1,!1)},H0={get:fd(!1,!0)},V0={get:fd(!0,!1)},lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,j0=new WeakMap;function z0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function U0(t){return t.__v_skip||!Object.isExtensible(t)?0:z0(f0(t))}function es(t){return Bi(t)?t:hd(t,!1,M0,F0,lg)}function dg(t){return hd(t,!1,N0,H0,cg)}function fg(t){return hd(t,!0,R0,V0,ug)}function hd(t,e,n,r,i){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=U0(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function xi(t){return Bi(t)?xi(t.__v_raw):!!(t&&t.__v_isReactive)}function Bi(t){return!!(t&&t.__v_isReadonly)}function da(t){return!!(t&&t.__v_isShallow)}function hg(t){return xi(t)||Bi(t)}function Ee(t){const e=t&&t.__v_raw;return e?Ee(e):t}function pd(t){return Object.isExtensible(t)&&ua(t,"__v_skip",!0),t}const Hs=t=>Me(t)?es(t):t,md=t=>Me(t)?fg(t):t;class pg{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ld(()=>e(this._value),()=>vs(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Ee(this);return(!e._cacheable||e.effect.dirty)&&wr(e._value,e._value=e.effect.run())&&vs(e,4),gd(e),e.effect._dirtyLevel>=2&&vs(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function W0(t,e,n=!1){let r,i;const s=le(t);return s?(r=t,i=jt):(r=t.get,i=t.set),new pg(r,i,s||!i,n)}function gd(t){var e;fr&&zr&&(t=Ee(t),ng(zr,(e=t.dep)!=null?e:t.dep=ig(()=>t.dep=void 0,t instanceof pg?t:void 0)))}function vs(t,e=4,n){t=Ee(t);const r=t.dep;r&&rg(r,e)}function He(t){return!!(t&&t.__v_isRef===!0)}function Pe(t){return mg(t,!1)}function K0(t){return mg(t,!0)}function mg(t,e){return He(t)?t:new q0(t,e)}class q0{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ee(e),this._value=n?e:Hs(e)}get value(){return gd(this),this._value}set value(e){const n=this.__v_isShallow||da(e)||Bi(e);e=n?e:Ee(e),wr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Hs(e),vs(this,4))}}function X(t){return He(t)?t.value:t}const G0={get:(t,e,n)=>X(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return He(i)&&!He(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function gg(t){return xi(t)?t:new Proxy(t,G0)}class J0{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>gd(this),()=>vs(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function Y0(t){return new J0(t)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hr(t,e,n,r){try{return r?t(...r):t()}catch(i){_l(i,e,n)}}function Zt(t,e,n,r){if(le(t)){const s=hr(t,e,n,r);return s&&qm(s)&&s.catch(o=>{_l(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Zt(t[s],e,n,r));return i}function _l(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){hr(l,null,10,[t,o,a]);return}}X0(t,n,i,r)}function X0(t,e,n,r=!0){console.error(t)}let Vs=!1,nu=!1;const dt=[];let mn=0;const Ci=[];let Yn=null,Pr=0;const yg=Promise.resolve();let yd=null;function lo(t){const e=yd||yg;return t?e.then(this?t.bind(this):t):e}function Q0(t){let e=mn+1,n=dt.length;for(;e<n;){const r=e+n>>>1,i=dt[r],s=js(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function bd(t){(!dt.length||!dt.includes(t,Vs&&t.allowRecurse?mn+1:mn))&&(t.id==null?dt.push(t):dt.splice(Q0(t.id),0,t),bg())}function bg(){!Vs&&!nu&&(nu=!0,yd=yg.then(wg))}function Z0(t){const e=dt.indexOf(t);e>mn&&dt.splice(e,1)}function ew(t){ie(t)?Ci.push(...t):(!Yn||!Yn.includes(t,t.allowRecurse?Pr+1:Pr))&&Ci.push(t),bg()}function Vf(t,e,n=Vs?mn+1:0){for(;n<dt.length;n++){const r=dt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;dt.splice(n,1),n--,r()}}}function vg(t){if(Ci.length){const e=[...new Set(Ci)].sort((n,r)=>js(n)-js(r));if(Ci.length=0,Yn){Yn.push(...e);return}for(Yn=e,Pr=0;Pr<Yn.length;Pr++)Yn[Pr]();Yn=null,Pr=0}}const js=t=>t.id==null?1/0:t.id,tw=(t,e)=>{const n=js(t)-js(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function wg(t){nu=!1,Vs=!0,dt.sort(tw);try{for(mn=0;mn<dt.length;mn++){const e=dt[mn];e&&e.active!==!1&&hr(e,null,14)}}finally{mn=0,dt.length=0,vg(),Vs=!1,yd=null,(dt.length||Ci.length)&&wg()}}function nw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ne;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=r[u]||Ne;f&&(i=n.map(h=>Ue(h)?h.trim():h)),d&&(i=n.map(Fs))}let a,l=r[a=ic(e)]||r[a=ic(kn(e))];!l&&s&&(l=r[a=ic(Zi(e))]),l&&Zt(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Zt(c,t,6,i)}}function kg(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!le(t)){const l=c=>{const u=kg(c,e,!0);u&&(a=!0,st(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Me(t)&&r.set(t,null),null):(ie(s)?s.forEach(l=>o[l]=null):st(o,s),Me(t)&&r.set(t,o),o)}function Tl(t,e){return!t||!bl(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(t,e[0].toLowerCase()+e.slice(1))||ke(t,Zi(e))||ke(t,e))}let qe=null,xl=null;function fa(t){const e=qe;return qe=t,xl=t&&t.type.__scopeId||null,e}function co(t){xl=t}function uo(){xl=null}function Et(t,e=qe,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&eh(-1);const s=fa(e);let o;try{o=t(...i)}finally{fa(s),r._d&&eh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function oc(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=t;let y,w;const E=fa(t);try{if(n.shapeFlag&4){const b=i||r,N=b;y=hn(u.call(N,b,d,s,h,f,p)),w=l}else{const b=e;y=hn(b.length>1?b(s,{attrs:l,slots:a,emit:c}):b(s,null)),w=e.props?l:rw(l)}}catch(b){Ts.length=0,_l(b,t,1),y=Se(kr)}let x=y;if(w&&m!==!1){const b=Object.keys(w),{shapeFlag:N}=x;b.length&&N&7&&(o&&b.some(rd)&&(w=iw(w,o)),x=$i(x,w))}return n.dirs&&(x=$i(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),y=x,fa(E),y}const rw=t=>{let e;for(const n in t)(n==="class"||n==="style"||bl(n))&&((e||(e={}))[n]=t[n]);return e},iw=(t,e)=>{const n={};for(const r in t)(!rd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function sw(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?jf(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!Tl(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?jf(r,o,c):!0:!!o;return!1}function jf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Tl(n,s))return!0}return!1}function ow({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sg="components";function ws(t,e){return lw(Sg,t,!0,e)||t}const aw=Symbol.for("v-ndc");function lw(t,e,n=!0,r=!1){const i=qe||it;if(i){const s=i.type;if(t===Sg){const a=rk(s,!1);if(a&&(a===e||a===kn(e)||a===kl(kn(e))))return s}const o=zf(i[t]||s[t],e)||zf(i.appContext[t],e);return!o&&r?s:o}}function zf(t,e){return t&&(t[e]||t[kn(e)]||t[kl(kn(e))])}const cw=t=>t.__isSuspense;function uw(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):ew(t)}const dw=Symbol.for("v-scx"),fw=()=>en(dw);function Eg(t,e){return vd(t,null,e)}const Do={};function Fn(t,e,n){return vd(t,e,n)}function vd(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=Ne){if(e&&s){const k=e;e=(...L)=>{k(...L),N()}}const l=it,c=k=>r===!0?k:$r(k,r===!1?1:void 0);let u,d=!1,f=!1;if(He(t)?(u=()=>t.value,d=da(t)):xi(t)?(u=()=>c(t),d=!0):ie(t)?(f=!0,d=t.some(k=>xi(k)||da(k)),u=()=>t.map(k=>{if(He(k))return k.value;if(xi(k))return c(k);if(le(k))return hr(k,l,2)})):le(t)?e?u=()=>hr(t,l,2):u=()=>(h&&h(),Zt(t,l,3,[p])):u=jt,e&&r){const k=u;u=()=>$r(k())}let h,p=k=>{h=x.onStop=()=>{hr(k,l,4),h=x.onStop=void 0}},m;if(Rl)if(p=jt,e?n&&Zt(e,l,3,[u(),f?[]:void 0,p]):u(),i==="sync"){const k=fw();m=k.__watcherHandles||(k.__watcherHandles=[])}else return jt;let y=f?new Array(t.length).fill(Do):Do;const w=()=>{if(!(!x.active||!x.dirty))if(e){const k=x.run();(r||d||(f?k.some((L,Y)=>wr(L,y[Y])):wr(k,y)))&&(h&&h(),Zt(e,l,3,[k,y===Do?void 0:f&&y[0]===Do?[]:y,p]),y=k)}else x.run()};w.allowRecurse=!!e;let E;i==="sync"?E=w:i==="post"?E=()=>St(w,l&&l.suspense):(w.pre=!0,l&&(w.id=l.uid),E=()=>bd(w));const x=new ld(u,jt,E),b=Zm(),N=()=>{x.stop(),b&&sd(b.effects,x)};return e?n?w():y=x.run():i==="post"?St(x.run.bind(x),l&&l.suspense):x.run(),m&&m.push(N),N}function hw(t,e,n){const r=this.proxy,i=Ue(t)?t.includes(".")?_g(r,t):()=>r[t]:t.bind(r,r);let s;le(e)?s=e:(s=e.handler,n=e);const o=ho(this),a=vd(i,s.bind(r),n);return o(),a}function _g(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function $r(t,e,n=0,r){if(!Me(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),He(t))$r(t.value,e,n,r);else if(ie(t))for(let i=0;i<t.length;i++)$r(t[i],e,n,r);else if(vl(t)||Ti(t))t.forEach(i=>{$r(i,e,n,r)});else if(Jm(t))for(const i in t)$r(t[i],e,n,r);return t}function wB(t,e){if(qe===null)return t;const n=Nl(qe)||qe.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Ne]=e[i];s&&(le(s)&&(s={mounted:s,updated:s}),s.deep&&$r(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ir(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(ai(),Zt(l,n,8,[t.el,a,t,e]),li())}}/*! #__NO_SIDE_EFFECTS__ */function fo(t,e){return le(t)?st({name:t.name},e,{setup:t}):t}const ks=t=>!!t.type.__asyncLoader,Tg=t=>t.type.__isKeepAlive;function pw(t,e){xg(t,"a",e)}function mw(t,e){xg(t,"da",e)}function xg(t,e,n=it){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Cl(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Tg(i.parent.vnode)&&gw(r,e,n,i),i=i.parent}}function gw(t,e,n,r){const i=Cl(e,t,r,!0);Cg(()=>{sd(r[e],i)},n)}function Cl(t,e,n=it,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ai();const a=ho(n),l=Zt(e,n,t,o);return a(),li(),l});return r?i.unshift(s):i.push(s),s}}const zn=t=>(e,n=it)=>(!Rl||t==="sp")&&Cl(t,(...r)=>e(...r),n),yw=zn("bm"),on=zn("m"),bw=zn("bu"),vw=zn("u"),Ol=zn("bum"),Cg=zn("um"),ww=zn("sp"),kw=zn("rtg"),Sw=zn("rtc");function Ew(t,e=it){Cl("ec",t,e)}function ru(t,e,n,r){let i;const s=n&&n[r];if(ie(t)||Ue(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Me(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function _w(t,e,n={},r,i){if(qe.isCE||qe.parent&&ks(qe.parent)&&qe.parent.isCE)return e!=="default"&&(n.name=e),Se("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),Q();const o=s&&Og(s(n)),a=gt(Je,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Og(t){return t.some(e=>pa(e)?!(e.type===kr||e.type===Je&&!Og(e.children)):!0)?t:null}const iu=t=>t?Hg(t)?Nl(t)||t.proxy:iu(t.parent):null,Ss=st(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>iu(t.parent),$root:t=>iu(t.root),$emit:t=>t.emit,$options:t=>wd(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,bd(t.update)}),$nextTick:t=>t.n||(t.n=lo.bind(t.proxy)),$watch:t=>hw.bind(t)}),ac=(t,e)=>t!==Ne&&!t.__isScriptSetup&&ke(t,e),Tw={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(ac(r,e))return o[e]=1,r[e];if(i!==Ne&&ke(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ke(c,e))return o[e]=3,s[e];if(n!==Ne&&ke(n,e))return o[e]=4,n[e];su&&(o[e]=0)}}const u=Ss[e];let d,f;if(u)return e==="$attrs"&&Ot(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ne&&ke(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,ke(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return ac(i,e)?(i[e]=n,!0):r!==Ne&&ke(r,e)?(r[e]=n,!0):ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Ne&&ke(t,o)||ac(e,o)||(a=s[0])&&ke(a,o)||ke(r,o)||ke(Ss,o)||ke(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ke(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Uf(t){return ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let su=!0;function xw(t){const e=wd(t),n=t.proxy,r=t.ctx;su=!1,e.beforeCreate&&Wf(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:y,beforeDestroy:w,beforeUnmount:E,destroyed:x,unmounted:b,render:N,renderTracked:k,renderTriggered:L,errorCaptured:Y,serverPrefetch:j,expose:ne,inheritAttrs:ae,components:ve,directives:ge,filters:$e}=e;if(c&&Cw(c,r,null),o)for(const ee in o){const Z=o[ee];le(Z)&&(r[ee]=Z.bind(n))}if(i){const ee=i.call(n,n);Me(ee)&&(t.data=es(ee))}if(su=!0,s)for(const ee in s){const Z=s[ee],Ve=le(Z)?Z.bind(n,n):le(Z.get)?Z.get.bind(n,n):jt,We=!le(Z)&&le(Z.set)?Z.set.bind(n):jt,Ge=Vt({get:Ve,set:We});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Re=>Ge.value=Re})}if(a)for(const ee in a)Ag(a[ee],r,n,ee);if(l){const ee=le(l)?l.call(n):l;Reflect.ownKeys(ee).forEach(Z=>{Yo(Z,ee[Z])})}u&&Wf(u,t,"c");function de(ee,Z){ie(Z)?Z.forEach(Ve=>ee(Ve.bind(n))):Z&&ee(Z.bind(n))}if(de(yw,d),de(on,f),de(bw,h),de(vw,p),de(pw,m),de(mw,y),de(Ew,Y),de(Sw,k),de(kw,L),de(Ol,E),de(Cg,b),de(ww,j),ie(ne))if(ne.length){const ee=t.exposed||(t.exposed={});ne.forEach(Z=>{Object.defineProperty(ee,Z,{get:()=>n[Z],set:Ve=>n[Z]=Ve})})}else t.exposed||(t.exposed={});N&&t.render===jt&&(t.render=N),ae!=null&&(t.inheritAttrs=ae),ve&&(t.components=ve),ge&&(t.directives=ge)}function Cw(t,e,n=jt){ie(t)&&(t=ou(t));for(const r in t){const i=t[r];let s;Me(i)?"default"in i?s=en(i.from||r,i.default,!0):s=en(i.from||r):s=en(i),He(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Wf(t,e,n){Zt(ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ag(t,e,n,r){const i=r.includes(".")?_g(n,r):()=>n[r];if(Ue(t)){const s=e[t];le(s)&&Fn(i,s)}else if(le(t))Fn(i,t.bind(n));else if(Me(t))if(ie(t))t.forEach(s=>Ag(s,e,n,r));else{const s=le(t.handler)?t.handler.bind(n):e[t.handler];le(s)&&Fn(i,s,t)}}function wd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>ha(l,c,o,!0)),ha(l,e,o)),Me(e)&&s.set(e,l),l}function ha(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&ha(t,s,n,!0),i&&i.forEach(o=>ha(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Ow[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ow={data:Kf,props:qf,emits:qf,methods:ps,computed:ps,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:ps,directives:ps,watch:Iw,provide:Kf,inject:Aw};function Kf(t,e){return e?t?function(){return st(le(t)?t.call(this,this):t,le(e)?e.call(this,this):e)}:e:t}function Aw(t,e){return ps(ou(t),ou(e))}function ou(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mt(t,e){return t?[...new Set([].concat(t,e))]:e}function ps(t,e){return t?st(Object.create(null),t,e):e}function qf(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:st(Object.create(null),Uf(t),Uf(e??{})):e}function Iw(t,e){if(!t)return e;if(!e)return t;const n=st(Object.create(null),t);for(const r in e)n[r]=mt(t[r],e[r]);return n}function Ig(){return{app:null,config:{isNativeTag:u0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mw=0;function Rw(t,e){return function(r,i=null){le(r)||(r=st({},r)),i!=null&&!Me(i)&&(i=null);const s=Ig(),o=new WeakSet;let a=!1;const l=s.app={_uid:Mw++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:sk,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&le(c.install)?(o.add(c),c.install(l,...u)):le(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!a){const f=Se(r,i);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,Nl(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Es;Es=l;try{return c()}finally{Es=u}}};return l}}let Es=null;function Yo(t,e){if(it){let n=it.provides;const r=it.parent&&it.parent.provides;r===n&&(n=it.provides=Object.create(r)),n[t]=e}}function en(t,e,n=!1){const r=it||qe;if(r||Es){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Es._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&le(e)?e.call(r&&r.proxy):e}}function Nw(t,e,n,r=!1){const i={},s={};ua(s,Il,1),t.propsDefaults=Object.create(null),Mg(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:dg(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Pw(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Ee(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Tl(t.emitsOptions,f))continue;const h=e[f];if(l)if(ke(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const p=kn(f);i[p]=au(l,a,p,h,t,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{Mg(t,e,i,s)&&(c=!0);let u;for(const d in a)(!e||!ke(e,d)&&((u=Zi(d))===d||!ke(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=au(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!ke(e,d))&&(delete s[d],c=!0)}c&&$n(t,"set","$attrs")}function Mg(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(bs(l))continue;const c=e[l];let u;i&&ke(i,u=kn(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Tl(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ee(n),c=a||Ne;for(let u=0;u<s.length;u++){const d=s[u];n[d]=au(i,l,d,c[d],t,!ke(c,d))}}return o}function au(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ke(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&le(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=ho(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Zi(n))&&(r=!0))}return r}function Rg(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!le(t)){const u=d=>{l=!0;const[f,h]=Rg(d,e,!0);st(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return Me(t)&&r.set(t,_i),_i;if(ie(s))for(let u=0;u<s.length;u++){const d=kn(s[u]);Gf(d)&&(o[d]=Ne)}else if(s)for(const u in s){const d=kn(u);if(Gf(d)){const f=s[u],h=o[d]=ie(f)||le(f)?{type:f}:st({},f);if(h){const p=Xf(Boolean,h.type),m=Xf(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||ke(h,"default"))&&a.push(d)}}}const c=[o,a];return Me(t)&&r.set(t,c),c}function Gf(t){return t[0]!=="$"&&!bs(t)}function Jf(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Yf(t,e){return Jf(t)===Jf(e)}function Xf(t,e){return ie(e)?e.findIndex(n=>Yf(n,t)):le(e)&&Yf(e,t)?0:-1}const Ng=t=>t[0]==="_"||t==="$stable",kd=t=>ie(t)?t.map(hn):[hn(t)],Dw=(t,e,n)=>{if(e._n)return e;const r=Et((...i)=>kd(e(...i)),n);return r._c=!1,r},Pg=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Ng(i))continue;const s=t[i];if(le(s))e[i]=Dw(i,s,r);else if(s!=null){const o=kd(s);e[i]=()=>o}}},Dg=(t,e)=>{const n=kd(e);t.slots.default=()=>n},Lw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ee(e),ua(e,"_",n)):Pg(e,t.slots={})}else t.slots={},e&&Dg(t,e);ua(t.slots,Il,1)},Bw=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Ne;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(st(i,e),!n&&a===1&&delete i._):(s=!e.$stable,Pg(e,i)),o=e}else e&&(Dg(t,e),o={default:1});if(s)for(const a in i)!Ng(a)&&o[a]==null&&delete i[a]};function lu(t,e,n,r,i=!1){if(ie(t)){t.forEach((f,h)=>lu(f,e&&(ie(e)?e[h]:e),n,r,i));return}if(ks(r)&&!i)return;const s=r.shapeFlag&4?Nl(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ne?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Ue(c)?(u[c]=null,ke(d,c)&&(d[c]=null)):He(c)&&(c.value=null)),le(l))hr(l,a,12,[o,u]);else{const f=Ue(l),h=He(l);if(f||h){const p=()=>{if(t.f){const m=f?ke(d,l)?d[l]:u[l]:l.value;i?ie(m)&&sd(m,s):ie(m)?m.includes(s)||m.push(s):f?(u[l]=[s],ke(d,l)&&(d[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,ke(d,l)&&(d[l]=o)):h&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,St(p,n)):p()}}}const St=uw;function $w(t){return Fw(t)}function Fw(t,e){const n=Ym();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=jt,insertStaticContent:p}=t,m=(g,v,_,A=null,C=null,P=null,F=void 0,R=null,D=!!v.dynamicChildren)=>{if(g===v)return;g&&!cs(g,v)&&(A=O(g),Re(g,C,P,!0),g=null),v.patchFlag===-2&&(D=!1,v.dynamicChildren=null);const{type:I,ref:V,shapeFlag:J}=v;switch(I){case Al:y(g,v,_,A);break;case kr:w(g,v,_,A);break;case Xo:g==null&&E(v,_,A,F);break;case Je:ve(g,v,_,A,C,P,F,R,D);break;default:J&1?N(g,v,_,A,C,P,F,R,D):J&6?ge(g,v,_,A,C,P,F,R,D):(J&64||J&128)&&I.process(g,v,_,A,C,P,F,R,D,U)}V!=null&&C&&lu(V,g&&g.ref,P,v||g,!v)},y=(g,v,_,A)=>{if(g==null)r(v.el=a(v.children),_,A);else{const C=v.el=g.el;v.children!==g.children&&c(C,v.children)}},w=(g,v,_,A)=>{g==null?r(v.el=l(v.children||""),_,A):v.el=g.el},E=(g,v,_,A)=>{[g.el,g.anchor]=p(g.children,v,_,A,g.el,g.anchor)},x=({el:g,anchor:v},_,A)=>{let C;for(;g&&g!==v;)C=f(g),r(g,_,A),g=C;r(v,_,A)},b=({el:g,anchor:v})=>{let _;for(;g&&g!==v;)_=f(g),i(g),g=_;i(v)},N=(g,v,_,A,C,P,F,R,D)=>{v.type==="svg"?F="svg":v.type==="math"&&(F="mathml"),g==null?k(v,_,A,C,P,F,R,D):j(g,v,C,P,F,R,D)},k=(g,v,_,A,C,P,F,R)=>{let D,I;const{props:V,shapeFlag:J,transition:G,dirs:re}=g;if(D=g.el=o(g.type,P,V&&V.is,V),J&8?u(D,g.children):J&16&&Y(g.children,D,null,A,C,lc(g,P),F,R),re&&Ir(g,null,A,"created"),L(D,g,g.scopeId,F,A),V){for(const we in V)we!=="value"&&!bs(we)&&s(D,we,null,V[we],P,g.children,A,C,Ae);"value"in V&&s(D,"value",null,V.value,P),(I=V.onVnodeBeforeMount)&&ln(I,A,g)}re&&Ir(g,null,A,"beforeMount");const ce=Hw(C,G);ce&&G.beforeEnter(D),r(D,v,_),((I=V&&V.onVnodeMounted)||ce||re)&&St(()=>{I&&ln(I,A,g),ce&&G.enter(D),re&&Ir(g,null,A,"mounted")},C)},L=(g,v,_,A,C)=>{if(_&&h(g,_),A)for(let P=0;P<A.length;P++)h(g,A[P]);if(C){let P=C.subTree;if(v===P){const F=C.vnode;L(g,F,F.scopeId,F.slotScopeIds,C.parent)}}},Y=(g,v,_,A,C,P,F,R,D=0)=>{for(let I=D;I<g.length;I++){const V=g[I]=R?Qn(g[I]):hn(g[I]);m(null,V,v,_,A,C,P,F,R)}},j=(g,v,_,A,C,P,F)=>{const R=v.el=g.el;let{patchFlag:D,dynamicChildren:I,dirs:V}=v;D|=g.patchFlag&16;const J=g.props||Ne,G=v.props||Ne;let re;if(_&&Mr(_,!1),(re=G.onVnodeBeforeUpdate)&&ln(re,_,v,g),V&&Ir(v,g,_,"beforeUpdate"),_&&Mr(_,!0),I?ne(g.dynamicChildren,I,R,_,A,lc(v,C),P):F||Z(g,v,R,null,_,A,lc(v,C),P,!1),D>0){if(D&16)ae(R,v,J,G,_,A,C);else if(D&2&&J.class!==G.class&&s(R,"class",null,G.class,C),D&4&&s(R,"style",J.style,G.style,C),D&8){const ce=v.dynamicProps;for(let we=0;we<ce.length;we++){const Ie=ce[we],je=J[Ie],It=G[Ie];(It!==je||Ie==="value")&&s(R,Ie,je,It,C,g.children,_,A,Ae)}}D&1&&g.children!==v.children&&u(R,v.children)}else!F&&I==null&&ae(R,v,J,G,_,A,C);((re=G.onVnodeUpdated)||V)&&St(()=>{re&&ln(re,_,v,g),V&&Ir(v,g,_,"updated")},A)},ne=(g,v,_,A,C,P,F)=>{for(let R=0;R<v.length;R++){const D=g[R],I=v[R],V=D.el&&(D.type===Je||!cs(D,I)||D.shapeFlag&70)?d(D.el):_;m(D,I,V,null,A,C,P,F,!0)}},ae=(g,v,_,A,C,P,F)=>{if(_!==A){if(_!==Ne)for(const R in _)!bs(R)&&!(R in A)&&s(g,R,_[R],null,F,v.children,C,P,Ae);for(const R in A){if(bs(R))continue;const D=A[R],I=_[R];D!==I&&R!=="value"&&s(g,R,I,D,F,v.children,C,P,Ae)}"value"in A&&s(g,"value",_.value,A.value,F)}},ve=(g,v,_,A,C,P,F,R,D)=>{const I=v.el=g?g.el:a(""),V=v.anchor=g?g.anchor:a("");let{patchFlag:J,dynamicChildren:G,slotScopeIds:re}=v;re&&(R=R?R.concat(re):re),g==null?(r(I,_,A),r(V,_,A),Y(v.children||[],_,V,C,P,F,R,D)):J>0&&J&64&&G&&g.dynamicChildren?(ne(g.dynamicChildren,G,_,C,P,F,R),(v.key!=null||C&&v===C.subTree)&&Sd(g,v,!0)):Z(g,v,_,V,C,P,F,R,D)},ge=(g,v,_,A,C,P,F,R,D)=>{v.slotScopeIds=R,g==null?v.shapeFlag&512?C.ctx.activate(v,_,A,F,D):$e(v,_,A,C,P,F,D):Le(g,v,D)},$e=(g,v,_,A,C,P,F)=>{const R=g.component=Qw(g,A,C);if(Tg(g)&&(R.ctx.renderer=U),Zw(R),R.asyncDep){if(C&&C.registerDep(R,de),!g.el){const D=R.subTree=Se(kr);w(null,D,v,_)}}else de(R,g,v,_,C,P,F)},Le=(g,v,_)=>{const A=v.component=g.component;if(sw(g,v,_))if(A.asyncDep&&!A.asyncResolved){ee(A,v,_);return}else A.next=v,Z0(A.update),A.effect.dirty=!0,A.update();else v.el=g.el,A.vnode=v},de=(g,v,_,A,C,P,F)=>{const R=()=>{if(g.isMounted){let{next:V,bu:J,u:G,parent:re,vnode:ce}=g;{const Un=Lg(g);if(Un){V&&(V.el=ce.el,ee(g,V,F)),Un.asyncDep.then(()=>{g.isUnmounted||R()});return}}let we=V,Ie;Mr(g,!1),V?(V.el=ce.el,ee(g,V,F)):V=ce,J&&Jo(J),(Ie=V.props&&V.props.onVnodeBeforeUpdate)&&ln(Ie,re,V,ce),Mr(g,!0);const je=oc(g),It=g.subTree;g.subTree=je,m(It,je,d(It.el),O(It),g,C,P),V.el=je.el,we===null&&ow(g,je.el),G&&St(G,C),(Ie=V.props&&V.props.onVnodeUpdated)&&St(()=>ln(Ie,re,V,ce),C)}else{let V;const{el:J,props:G}=v,{bm:re,m:ce,parent:we}=g,Ie=ks(v);if(Mr(g,!1),re&&Jo(re),!Ie&&(V=G&&G.onVnodeBeforeMount)&&ln(V,we,v),Mr(g,!0),J&&_e){const je=()=>{g.subTree=oc(g),_e(J,g.subTree,g,C,null)};Ie?v.type.__asyncLoader().then(()=>!g.isUnmounted&&je()):je()}else{const je=g.subTree=oc(g);m(null,je,_,A,g,C,P),v.el=je.el}if(ce&&St(ce,C),!Ie&&(V=G&&G.onVnodeMounted)){const je=v;St(()=>ln(V,we,je),C)}(v.shapeFlag&256||we&&ks(we.vnode)&&we.vnode.shapeFlag&256)&&g.a&&St(g.a,C),g.isMounted=!0,v=_=A=null}},D=g.effect=new ld(R,jt,()=>bd(I),g.scope),I=g.update=()=>{D.dirty&&D.run()};I.id=g.uid,Mr(g,!0),I()},ee=(g,v,_)=>{v.component=g;const A=g.vnode.props;g.vnode=v,g.next=null,Pw(g,v.props,A,_),Bw(g,v.children,_),ai(),Vf(g),li()},Z=(g,v,_,A,C,P,F,R,D=!1)=>{const I=g&&g.children,V=g?g.shapeFlag:0,J=v.children,{patchFlag:G,shapeFlag:re}=v;if(G>0){if(G&128){We(I,J,_,A,C,P,F,R,D);return}else if(G&256){Ve(I,J,_,A,C,P,F,R,D);return}}re&8?(V&16&&Ae(I,C,P),J!==I&&u(_,J)):V&16?re&16?We(I,J,_,A,C,P,F,R,D):Ae(I,C,P,!0):(V&8&&u(_,""),re&16&&Y(J,_,A,C,P,F,R,D))},Ve=(g,v,_,A,C,P,F,R,D)=>{g=g||_i,v=v||_i;const I=g.length,V=v.length,J=Math.min(I,V);let G;for(G=0;G<J;G++){const re=v[G]=D?Qn(v[G]):hn(v[G]);m(g[G],re,_,null,C,P,F,R,D)}I>V?Ae(g,C,P,!0,!1,J):Y(v,_,A,C,P,F,R,D,J)},We=(g,v,_,A,C,P,F,R,D)=>{let I=0;const V=v.length;let J=g.length-1,G=V-1;for(;I<=J&&I<=G;){const re=g[I],ce=v[I]=D?Qn(v[I]):hn(v[I]);if(cs(re,ce))m(re,ce,_,null,C,P,F,R,D);else break;I++}for(;I<=J&&I<=G;){const re=g[J],ce=v[G]=D?Qn(v[G]):hn(v[G]);if(cs(re,ce))m(re,ce,_,null,C,P,F,R,D);else break;J--,G--}if(I>J){if(I<=G){const re=G+1,ce=re<V?v[re].el:A;for(;I<=G;)m(null,v[I]=D?Qn(v[I]):hn(v[I]),_,ce,C,P,F,R,D),I++}}else if(I>G)for(;I<=J;)Re(g[I],C,P,!0),I++;else{const re=I,ce=I,we=new Map;for(I=ce;I<=G;I++){const q=v[I]=D?Qn(v[I]):hn(v[I]);q.key!=null&&we.set(q.key,I)}let Ie,je=0;const It=G-ce+1;let Un=!1,Co=0;const T=new Array(It);for(I=0;I<It;I++)T[I]=0;for(I=re;I<=J;I++){const q=g[I];if(je>=It){Re(q,C,P,!0);continue}let fe;if(q.key!=null)fe=we.get(q.key);else for(Ie=ce;Ie<=G;Ie++)if(T[Ie-ce]===0&&cs(q,v[Ie])){fe=Ie;break}fe===void 0?Re(q,C,P,!0):(T[fe-ce]=I+1,fe>=Co?Co=fe:Un=!0,m(q,v[fe],_,null,C,P,F,R,D),je++)}const W=Un?Vw(T):_i;for(Ie=W.length-1,I=It-1;I>=0;I--){const q=ce+I,fe=v[q],be=q+1<V?v[q+1].el:A;T[I]===0?m(null,fe,_,be,C,P,F,R,D):Un&&(Ie<0||I!==W[Ie]?Ge(fe,_,be,2):Ie--)}}},Ge=(g,v,_,A,C=null)=>{const{el:P,type:F,transition:R,children:D,shapeFlag:I}=g;if(I&6){Ge(g.component.subTree,v,_,A);return}if(I&128){g.suspense.move(v,_,A);return}if(I&64){F.move(g,v,_,U);return}if(F===Je){r(P,v,_);for(let J=0;J<D.length;J++)Ge(D[J],v,_,A);r(g.anchor,v,_);return}if(F===Xo){x(g,v,_);return}if(A!==2&&I&1&&R)if(A===0)R.beforeEnter(P),r(P,v,_),St(()=>R.enter(P),C);else{const{leave:J,delayLeave:G,afterLeave:re}=R,ce=()=>r(P,v,_),we=()=>{J(P,()=>{ce(),re&&re()})};G?G(P,ce,we):we()}else r(P,v,_)},Re=(g,v,_,A=!1,C=!1)=>{const{type:P,props:F,ref:R,children:D,dynamicChildren:I,shapeFlag:V,patchFlag:J,dirs:G}=g;if(R!=null&&lu(R,null,_,g,!0),V&256){v.ctx.deactivate(g);return}const re=V&1&&G,ce=!ks(g);let we;if(ce&&(we=F&&F.onVnodeBeforeUnmount)&&ln(we,v,g),V&6)ct(g.component,_,A);else{if(V&128){g.suspense.unmount(_,A);return}re&&Ir(g,null,v,"beforeUnmount"),V&64?g.type.remove(g,v,_,C,U,A):I&&(P!==Je||J>0&&J&64)?Ae(I,v,_,!1,!0):(P===Je&&J&384||!C&&V&16)&&Ae(D,v,_),A&&kt(g)}(ce&&(we=F&&F.onVnodeUnmounted)||re)&&St(()=>{we&&ln(we,v,g),re&&Ir(g,null,v,"unmounted")},_)},kt=g=>{const{type:v,el:_,anchor:A,transition:C}=g;if(v===Je){lt(_,A);return}if(v===Xo){b(g);return}const P=()=>{i(_),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(g.shapeFlag&1&&C&&!C.persisted){const{leave:F,delayLeave:R}=C,D=()=>F(_,P);R?R(g.el,P,D):D()}else P()},lt=(g,v)=>{let _;for(;g!==v;)_=f(g),i(g),g=_;i(v)},ct=(g,v,_)=>{const{bum:A,scope:C,update:P,subTree:F,um:R}=g;A&&Jo(A),C.stop(),P&&(P.active=!1,Re(F,g,v,_)),R&&St(R,v),St(()=>{g.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Ae=(g,v,_,A=!1,C=!1,P=0)=>{for(let F=P;F<g.length;F++)Re(g[F],v,_,A,C)},O=g=>g.shapeFlag&6?O(g.component.subTree):g.shapeFlag&128?g.suspense.next():f(g.anchor||g.el);let H=!1;const $=(g,v,_)=>{g==null?v._vnode&&Re(v._vnode,null,null,!0):m(v._vnode||null,g,v,null,null,null,_),H||(H=!0,Vf(),vg(),H=!1),v._vnode=g},U={p:m,um:Re,m:Ge,r:kt,mt:$e,mc:Y,pc:Z,pbc:ne,n:O,o:t};let ye,_e;return e&&([ye,_e]=e(U)),{render:$,hydrate:ye,createApp:Rw($,ye)}}function lc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Mr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Hw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Sd(t,e,n=!1){const r=t.children,i=e.children;if(ie(r)&&ie(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Qn(i[s]),a.el=o.el),n||Sd(o,a)),a.type===Al&&(a.el=o.el)}}function Vw(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function Lg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Lg(e)}const jw=t=>t.__isTeleport,_s=t=>t&&(t.disabled||t.disabled===""),Qf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Zf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,cu=(t,e)=>{const n=t&&t.to;return Ue(n)?e?e(n):null:n},zw={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:y}}=c,w=_s(e.props);let{shapeFlag:E,children:x,dynamicChildren:b}=e;if(t==null){const N=e.el=m(""),k=e.anchor=m("");h(N,n,r),h(k,n,r);const L=e.target=cu(e.props,p),Y=e.targetAnchor=m("");L&&(h(Y,L),o==="svg"||Qf(L)?o="svg":(o==="mathml"||Zf(L))&&(o="mathml"));const j=(ne,ae)=>{E&16&&u(x,ne,ae,i,s,o,a,l)};w?j(n,k):L&&j(L,Y)}else{e.el=t.el;const N=e.anchor=t.anchor,k=e.target=t.target,L=e.targetAnchor=t.targetAnchor,Y=_s(t.props),j=Y?n:k,ne=Y?N:L;if(o==="svg"||Qf(k)?o="svg":(o==="mathml"||Zf(k))&&(o="mathml"),b?(f(t.dynamicChildren,b,j,i,s,o,a),Sd(t,e,!0)):l||d(t,e,j,ne,i,s,o,a,!1),w)Y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Lo(e,n,N,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const ae=e.target=cu(e.props,p);ae&&Lo(e,ae,null,c,0)}else Y&&Lo(e,k,L,c,1)}Bg(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:f}=t;if(d&&s(u),o&&s(c),a&16){const h=o||!_s(f);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,h,!!m.dynamicChildren)}}},move:Lo,hydrate:Uw};function Lo(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=s===2;if(d&&r(o,e,n),(!d||_s(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],e,n,2);d&&r(a,e,n)}function Uw(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=cu(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(_s(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=d;else{e.anchor=o(t);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,n,r,i,s)}Bg(e)}return e.anchor&&o(e.anchor)}const Ww=zw;function Bg(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Je=Symbol.for("v-fgt"),Al=Symbol.for("v-txt"),kr=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),Ts=[];let Xt=null;function Q(t=!1){Ts.push(Xt=t?null:[])}function Kw(){Ts.pop(),Xt=Ts[Ts.length-1]||null}let zs=1;function eh(t){zs+=t}function $g(t){return t.dynamicChildren=zs>0?Xt||_i:null,Kw(),zs>0&&Xt&&Xt.push(t),t}function pe(t,e,n,r,i,s){return $g(S(t,e,n,r,i,s,!0))}function gt(t,e,n,r,i){return $g(Se(t,e,n,r,i,!0))}function pa(t){return t?t.__v_isVNode===!0:!1}function cs(t,e){return t.type===e.type&&t.key===e.key}const Il="__vInternal",Fg=({key:t})=>t??null,Qo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ue(t)||He(t)||le(t)?{i:qe,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===Je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Fg(e),ref:e&&Qo(e),scopeId:xl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:qe};return a?(Ed(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ue(n)?8:16),zs>0&&!o&&Xt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Xt.push(l),l}const Se=qw;function qw(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===aw)&&(t=kr),pa(t)){const a=$i(t,e,!0);return n&&Ed(a,n),zs>0&&!s&&Xt&&(a.shapeFlag&6?Xt[Xt.indexOf(t)]=a:Xt.push(a)),a.patchFlag|=-2,a}if(ik(t)&&(t=t.__vccOpts),e){e=Gw(e);let{class:a,style:l}=e;a&&!Ue(a)&&(e.class=xe(a)),Me(l)&&(hg(l)&&!ie(l)&&(l=st({},l)),e.style=ad(l))}const o=Ue(t)?1:cw(t)?128:jw(t)?64:Me(t)?4:le(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function Gw(t){return t?hg(t)||Il in t?st({},t):t:null}function $i(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?Jw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Fg(a),ref:e&&e.ref?n&&i?ie(i)?i.concat(Qo(e)):[i,Qo(e)]:Qo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Je?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$i(t.ssContent),ssFallback:t.ssFallback&&$i(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Xn(t=" ",e=0){return Se(Al,null,t,e)}function Ml(t,e){const n=Se(Xo,null,t);return n.staticCount=e,n}function Nt(t="",e=!1){return e?(Q(),gt(kr,null,t)):Se(kr,null,t)}function hn(t){return t==null||typeof t=="boolean"?Se(kr):ie(t)?Se(Je,null,t.slice()):typeof t=="object"?Qn(t):Se(Al,null,String(t))}function Qn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$i(t)}function Ed(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ie(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Ed(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Il in e)?e._ctx=qe:i===3&&qe&&(qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else le(e)?(e={default:e,_ctx:qe},n=32):(e=String(e),r&64?(n=16,e=[Xn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Jw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=xe([e.class,r.class]));else if(i==="style")e.style=ad([e.style,r.style]);else if(bl(i)){const s=e[i],o=r[i];o&&s!==o&&!(ie(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function ln(t,e,n,r=null){Zt(t,e,7,[n,r])}const Yw=Ig();let Xw=0;function Qw(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Yw,s={uid:Xw++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new E0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rg(r,i),emitsOptions:kg(r,i),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:r.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=nw.bind(null,s),t.ce&&t.ce(s),s}let it=null;const _d=()=>it||qe;let ma,uu;{const t=Ym(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ma=e("__VUE_INSTANCE_SETTERS__",n=>it=n),uu=e("__VUE_SSR_SETTERS__",n=>Rl=n)}const ho=t=>{const e=it;return ma(t),t.scope.on(),()=>{t.scope.off(),ma(e)}},th=()=>{it&&it.scope.off(),ma(null)};function Hg(t){return t.vnode.shapeFlag&4}let Rl=!1;function Zw(t,e=!1){e&&uu(e);const{props:n,children:r}=t.vnode,i=Hg(t);Nw(t,n,i,e),Lw(t,r);const s=i?ek(t,e):void 0;return e&&uu(!1),s}function ek(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=pd(new Proxy(t.ctx,Tw));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?nk(t):null,s=ho(t);ai();const o=hr(r,t,0,[t.props,i]);if(li(),s(),qm(o)){if(o.then(th,th),e)return o.then(a=>{nh(t,a,e)}).catch(a=>{_l(a,t,0)});t.asyncDep=o}else nh(t,o,e)}else Vg(t,e)}function nh(t,e,n){le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=gg(e)),Vg(t,n)}let rh;function Vg(t,e,n){const r=t.type;if(!t.render){if(!e&&rh&&!r.render){const i=r.template||wd(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=st(st({isCustomElement:s,delimiters:a},o),l);r.render=rh(i,c)}}t.render=r.render||jt}{const i=ho(t);ai();try{xw(t)}finally{li(),i()}}}function tk(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ot(t,"get","$attrs"),e[n]}}))}function nk(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return tk(t)},slots:t.slots,emit:t.emit,expose:e}}function Nl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(gg(pd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ss)return Ss[n](t)},has(e,n){return n in e||n in Ss}}))}function rk(t,e=!0){return le(t)?t.displayName||t.name:t.name||e&&t.__name}function ik(t){return le(t)&&"__vccOpts"in t}const Vt=(t,e)=>W0(t,e,Rl);function Wr(t,e,n){const r=arguments.length;return r===2?Me(e)&&!ie(e)?pa(e)?Se(t,null,[e]):Se(t,e):Se(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&pa(n)&&(n=[n]),Se(t,e,n))}const sk="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ok="http://www.w3.org/2000/svg",ak="http://www.w3.org/1998/Math/MathML",Zn=typeof document<"u"?document:null,ih=Zn&&Zn.createElement("template"),lk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Zn.createElementNS(ok,t):e==="mathml"?Zn.createElementNS(ak,t):Zn.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Zn.createTextNode(t),createComment:t=>Zn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ih.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=ih.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ck=Symbol("_vtc");function uk(t,e,n){const r=t[ck];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const sh=Symbol("_vod"),dk=Symbol("_vsh"),fk=Symbol(""),hk=/(^|;)\s*display\s*:/;function pk(t,e,n){const r=t.style,i=Ue(n);let s=!1;if(n&&!i){if(e)if(Ue(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Zo(r,a,"")}else for(const o in e)n[o]==null&&Zo(r,o,"");for(const o in n)o==="display"&&(s=!0),Zo(r,o,n[o])}else if(i){if(e!==n){const o=r[fk];o&&(n+=";"+o),r.cssText=n,s=hk.test(n)}}else e&&t.removeAttribute("style");sh in t&&(t[sh]=s?r.display:"",t[dk]&&(r.display="none"))}const oh=/\s*!important$/;function Zo(t,e,n){if(ie(n))n.forEach(r=>Zo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=mk(t,e);oh.test(n)?t.setProperty(Zi(r),n.replace(oh,""),"important"):t[r]=n}}const ah=["Webkit","Moz","ms"],cc={};function mk(t,e){const n=cc[e];if(n)return n;let r=kn(e);if(r!=="filter"&&r in t)return cc[e]=r;r=kl(r);for(let i=0;i<ah.length;i++){const s=ah[i]+r;if(s in t)return cc[e]=s}return e}const lh="http://www.w3.org/1999/xlink";function gk(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(lh,e.slice(6,e.length)):t.setAttributeNS(lh,e,n);else{const s=w0(e);n==null||s&&!Xm(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function yk(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Xm(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Dr(t,e,n,r){t.addEventListener(e,n,r)}function bk(t,e,n,r){t.removeEventListener(e,n,r)}const ch=Symbol("_vei");function vk(t,e,n,r,i=null){const s=t[ch]||(t[ch]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=wk(e);if(r){const c=s[e]=Ek(r,i);Dr(t,a,c,l)}else o&&(bk(t,a,o,l),s[e]=void 0)}}const uh=/(?:Once|Passive|Capture)$/;function wk(t){let e;if(uh.test(t)){e={};let r;for(;r=t.match(uh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zi(t.slice(2)),e]}let uc=0;const kk=Promise.resolve(),Sk=()=>uc||(kk.then(()=>uc=0),uc=Date.now());function Ek(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Zt(_k(r,n.value),e,5,[r])};return n.value=t,n.attached=Sk(),n}function _k(t,e){if(ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const dh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Tk=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?uk(t,r,c):e==="style"?pk(t,n,r):bl(e)?rd(e)||vk(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xk(t,e,r,c))?yk(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),gk(t,e,r,c))};function xk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&dh(e)&&le(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return dh(e)&&Ue(n)?!1:e in t}const ga=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ie(e)?n=>Jo(e,n):e};function Ck(t){t.target.composing=!0}function fh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Oi=Symbol("_assign"),kB={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Oi]=ga(i);const s=r||i.props&&i.props.type==="number";Dr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Fs(a)),t[Oi](a)}),n&&Dr(t,"change",()=>{t.value=t.value.trim()}),e||(Dr(t,"compositionstart",Ck),Dr(t,"compositionend",fh),Dr(t,"change",fh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Oi]=ga(s),t.composing)return;const o=i||t.type==="number"?Fs(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},SB={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=vl(e);Dr(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Fs(ya(o)):ya(o));t[Oi](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,lo(()=>{t._assigning=!1})}),t[Oi]=ga(r)},mounted(t,{value:e,modifiers:{number:n}}){hh(t,e,n)},beforeUpdate(t,e,n){t[Oi]=ga(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||hh(t,e,n)}};function hh(t,e,n){const r=t.multiple,i=ie(e);if(!(r&&!i&&!vl(e))){for(let s=0,o=t.options.length;s<o;s++){const a=t.options[s],l=ya(a);if(r)if(i){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?Fs(l):l):a.selected=S0(e,l)>-1}else a.selected=e.has(l);else if(Sl(ya(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ya(t){return"_value"in t?t._value:t.value}const Ok=["ctrl","shift","alt","meta"],Ak={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ok.some(n=>t[`${n}Key`]&&!e.includes(n))},EB=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=Ak[e[o]];if(a&&a(i,e))return}return t(i,...s)})},Ik=st({patchProp:Tk},lk);let ph;function Mk(){return ph||(ph=$w(Ik))}const Rk=(...t)=>{const e=Mk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Pk(r);if(!i)return;const s=e._component;!le(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,Nk(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Nk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Pk(t){return Ue(t)?document.querySelector(t):t}function Dk(){return jg().__VUE_DEVTOOLS_GLOBAL_HOOK__}function jg(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Lk=typeof Proxy=="function",Bk="devtools-plugin:setup",$k="plugin:settings:set";let fi,du;function Fk(){var t;return fi!==void 0||(typeof window<"u"&&window.performance?(fi=!0,du=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(fi=!0,du=globalThis.perf_hooks.performance):fi=!1),fi}function Hk(){return Fk()?du.now():Date.now()}class Vk{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return Hk()}},n&&n.on($k,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function jk(t,e){const n=t,r=jg(),i=Dk(),s=Lk&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(Bk,t,e);else{const o=s?new Vk(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var zg="store";function ts(t){return t===void 0&&(t=null),en(t!==null?t:zg)}function ns(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function zk(t){return t!==null&&typeof t=="object"}function Uk(t){return t&&typeof t.then=="function"}function Wk(t,e){return function(){return t(e)}}function Ug(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Wg(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Pl(t,n,[],t._modules.root,!0),Td(t,n,e)}function Td(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,s={};ns(i,function(o,a){s[a]=Wk(o,t),Object.defineProperty(t.getters,a,{get:function(){return s[a]()},enumerable:!0})}),t._state=es({data:e}),t.strict&&Yk(t),r&&n&&t._withCommit(function(){r.data=null})}function Pl(t,e,n,r,i){var s=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!s&&!i){var a=xd(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=r.state})}var c=r.context=Kk(t,o,n);r.forEachMutation(function(u,d){var f=o+d;qk(t,f,u,c)}),r.forEachAction(function(u,d){var f=u.root?d:o+d,h=u.handler||u;Gk(t,f,h,c)}),r.forEachGetter(function(u,d){var f=o+d;Jk(t,f,u,c)}),r.forEachChild(function(u,d){Pl(t,e,n.concat(d),u,i)})}function Kk(t,e,n){var r=e==="",i={dispatch:r?t.dispatch:function(s,o,a){var l=ba(s,o,a),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),t.dispatch(d,c)},commit:r?t.commit:function(s,o,a){var l=ba(s,o,a),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),t.commit(d,c,u)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return Kg(t,e)}},state:{get:function(){return xd(t.state,n)}}}),i}function Kg(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,r)===e){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function qk(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(o){n.call(t,r.state,o)})}function Gk(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return Uk(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function Jk(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(s){return n(r.state,r.getters,s.state,s.getters)})}function Yk(t){Fn(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function xd(t,e){return e.reduce(function(n,r){return n[r]},t)}function ba(t,e,n){return zk(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var Xk="vuex bindings",mh="vuex:mutations",dc="vuex:actions",hi="vuex",Qk=0;function Zk(t,e){jk({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Xk]},function(n){n.addTimelineLayer({id:mh,label:"Vuex Mutations",color:gh}),n.addTimelineLayer({id:dc,label:"Vuex Actions",color:gh}),n.addInspector({id:hi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===hi)if(r.filter){var i=[];Yg(i,e._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[Jg(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===hi){var i=r.nodeId;Kg(e,i),r.state=nS(iS(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===hi){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),e._withCommit(function(){r.set(e._state.data,s,r.state.value)})}}),e.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(hi),n.sendInspectorState(hi),n.addTimelineEvent({layerId:mh,event:{time:Date.now(),title:r.type,data:s}})}),e.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=Qk++,r._time=Date.now(),s.state=i,n.addTimelineEvent({layerId:dc,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},o=Date.now()-r._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(s.payload=r.payload),s.state=i,n.addTimelineEvent({layerId:dc,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var gh=8702998,eS=6710886,tS=16777215,qg={label:"namespaced",textColor:tS,backgroundColor:eS};function Gg(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function Jg(t,e){return{id:e||"root",label:Gg(e),tags:t.namespaced?[qg]:[],children:Object.keys(t._children).map(function(n){return Jg(t._children[n],e+n+"/")})}}function Yg(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[qg]:[]}),Object.keys(e._children).forEach(function(i){Yg(t,e._children[i],n,r+i+"/")})}function nS(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var s=rS(e);i.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?Gg(o):o,editable:!1,value:fu(function(){return s[o]})}})}return i}function rS(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var i=e,s=r.pop();r.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[s]=fu(function(){return t[n]})}else e[n]=fu(function(){return t[n]})}),e}function iS(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,i,s){var o=r[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+e+'".');return s===n.length-1?o:o._children},e==="root"?t:t.root._children)}function fu(t){try{return t()}catch(e){return e}}var an=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},Xg={namespaced:{configurable:!0}};Xg.namespaced.get=function(){return!!this._rawModule.namespaced};an.prototype.addChild=function(e,n){this._children[e]=n};an.prototype.removeChild=function(e){delete this._children[e]};an.prototype.getChild=function(e){return this._children[e]};an.prototype.hasChild=function(e){return e in this._children};an.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};an.prototype.forEachChild=function(e){ns(this._children,e)};an.prototype.forEachGetter=function(e){this._rawModule.getters&&ns(this._rawModule.getters,e)};an.prototype.forEachAction=function(e){this._rawModule.actions&&ns(this._rawModule.actions,e)};an.prototype.forEachMutation=function(e){this._rawModule.mutations&&ns(this._rawModule.mutations,e)};Object.defineProperties(an.prototype,Xg);var ci=function(e){this.register([],e,!1)};ci.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ci.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,i){return n=n.getChild(i),r+(n.namespaced?i+"/":"")},"")};ci.prototype.update=function(e){Qg([],this.root,e)};ci.prototype.register=function(e,n,r){var i=this;r===void 0&&(r=!0);var s=new an(n,r);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}n.modules&&ns(n.modules,function(a,l){i.register(e.concat(l),a,r)})};ci.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],i=n.getChild(r);i&&i.runtime&&n.removeChild(r)};ci.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function Qg(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Qg(t.concat(r),e.getChild(r),n.modules[r])}}function sS(t){return new At(t)}var At=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var i=e.strict;i===void 0&&(i=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ci(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(f,h){return l.call(o,f,h)},this.commit=function(f,h,p){return c.call(o,f,h,p)},this.strict=i;var u=this._modules.root.state;Pl(this,u,[],this._modules.root),Td(this,u),r.forEach(function(d){return d(n)})},Cd={state:{configurable:!0}};At.prototype.install=function(e,n){e.provide(n||zg,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&Zk(e,this)};Cd.state.get=function(){return this._state.data};Cd.state.set=function(t){};At.prototype.commit=function(e,n,r){var i=this,s=ba(e,n,r),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(d){d(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};At.prototype.dispatch=function(e,n){var r=this,i=ba(e,n),s=i.type,o=i.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,r.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,d){c.then(function(f){try{r._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(a,r.state)})}catch{}u(f)},function(f){try{r._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(a,r.state,f)})}catch{}d(f)})})}};At.prototype.subscribe=function(e,n){return Ug(e,this._subscribers,n)};At.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Ug(r,this._actionSubscribers,n)};At.prototype.watch=function(e,n,r){var i=this;return Fn(function(){return e(i.state,i.getters)},n,Object.assign({},r))};At.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};At.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Pl(this,this.state,e,this._modules.get(e),r.preserveState),Td(this,this.state)};At.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=xd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Wg(this)};At.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};At.prototype.hotUpdate=function(e){this._modules.update(e),Wg(this,!0)};At.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(At.prototype,Cd);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const yi=typeof document<"u";function oS(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Te=Object.assign;function fc(t,e){const n={};for(const r in e){const i=e[r];n[r]=rn(i)?i.map(t):t(i)}return n}const xs=()=>{},rn=Array.isArray,Zg=/#/g,aS=/&/g,lS=/\//g,cS=/=/g,uS=/\?/g,ey=/\+/g,dS=/%5B/g,fS=/%5D/g,ty=/%5E/g,hS=/%60/g,ny=/%7B/g,pS=/%7C/g,ry=/%7D/g,mS=/%20/g;function Od(t){return encodeURI(""+t).replace(pS,"|").replace(dS,"[").replace(fS,"]")}function gS(t){return Od(t).replace(ny,"{").replace(ry,"}").replace(ty,"^")}function hu(t){return Od(t).replace(ey,"%2B").replace(mS,"+").replace(Zg,"%23").replace(aS,"%26").replace(hS,"`").replace(ny,"{").replace(ry,"}").replace(ty,"^")}function yS(t){return hu(t).replace(cS,"%3D")}function bS(t){return Od(t).replace(Zg,"%23").replace(uS,"%3F")}function vS(t){return t==null?"":bS(t).replace(lS,"%2F")}function Us(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const wS=/\/$/,kS=t=>t.replace(wS,"");function hc(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=TS(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Us(o)}}function SS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function yh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ES(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Fi(e.matched[r],n.matched[i])&&iy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Fi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!_S(t[n],e[n]))return!1;return!0}function _S(t,e){return rn(t)?bh(t,e):rn(e)?bh(e,t):t===e}function bh(t,e){return rn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function TS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Ws;(function(t){t.pop="pop",t.push="push"})(Ws||(Ws={}));var Cs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Cs||(Cs={}));function xS(t){if(!t)if(yi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),kS(t)}const CS=/^[^#]+#/;function OS(t,e){return t.replace(CS,"#")+e}function AS(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Dl=()=>({left:window.scrollX,top:window.scrollY});function IS(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=AS(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function vh(t,e){return(history.state?history.state.position-e:-1)+t}const pu=new Map;function MS(t,e){pu.set(t,e)}function RS(t){const e=pu.get(t);return pu.delete(t),e}let NS=()=>location.protocol+"//"+location.host;function sy(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),yh(l,"")}return yh(n,t)+r+i}function PS(t,e,n,r){let i=[],s=[],o=null;const a=({state:f})=>{const h=sy(t,location),p=n.value,m=e.value;let y=0;if(f){if(n.value=h,e.value=f,o&&o===p){o=null;return}y=m?f.position-m.position:0}else r(h);i.forEach(w=>{w(n.value,p,{delta:y,type:Ws.pop,direction:y?y>0?Cs.forward:Cs.back:Cs.unknown})})};function l(){o=n.value}function c(f){i.push(f);const h=()=>{const p=i.indexOf(f);p>-1&&i.splice(p,1)};return s.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(Te({},f.state,{scroll:Dl()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function wh(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Dl():null}}function DS(t){const{history:e,location:n}=window,r={value:sy(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:NS()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=Te({},e.state,wh(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=Te({},i.value,e.state,{forward:l,scroll:Dl()});s(u.current,u,!0);const d=Te({},wh(r.value,l,null),{position:u.position+1},c);s(l,d,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function LS(t){t=xS(t);const e=DS(t),n=PS(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Te({location:"",base:t,go:r,createHref:OS.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function BS(t){return typeof t=="string"||t&&typeof t=="object"}function oy(t){return typeof t=="string"||typeof t=="symbol"}const Kn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ay=Symbol("");var kh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(kh||(kh={}));function Hi(t,e){return Te(new Error,{type:t,[ay]:!0},e)}function On(t,e){return t instanceof Error&&ay in t&&(e==null||!!(t.type&e))}const Sh="[^/]+?",$S={sensitive:!1,strict:!1,start:!0,end:!0},FS=/[.+*?^${}()[\]/\\]/g;function HS(t,e){const n=Te({},$S,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(FS,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:m,optional:y,regexp:w}=f;s.push({name:p,repeatable:m,optional:y});const E=w||Sh;if(E!==Sh){h+=10;try{new RegExp(`(${E})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${E}): `+b.message)}}let x=m?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(x=y&&c.length<2?`(?:/${x})`:"/"+x),y&&(x+="?"),i+=x,h+=20,y&&(h+=-8),m&&(h+=-20),E===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=s[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:m,optional:y}=h,w=p in c?c[p]:"";if(rn(w)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const E=rn(w)?w.join("/"):w;if(!E)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=E}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function VS(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function jS(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=VS(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Eh(r))return 1;if(Eh(i))return-1}return i.length-r.length}function Eh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const zS={type:0,value:""},US=/[a-zA-Z0-9_]/;function WS(t){if(!t)return[[]];if(t==="/")return[[zS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:US.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function KS(t,e,n){const r=HS(WS(t.path),n),i=Te(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function qS(t,e){const n=[],r=new Map;e=xh({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,d,f){const h=!f,p=GS(u);p.aliasOf=f&&f.record;const m=xh(e,u),y=[p];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const b of x)y.push(Te({},p,{components:f?f.record.components:p.components,path:b,aliasOf:f?f.record:p}))}let w,E;for(const x of y){const{path:b}=x;if(d&&b[0]!=="/"){const N=d.record.path,k=N[N.length-1]==="/"?"":"/";x.path=d.record.path+(b&&k+b)}if(w=KS(x,d,m),f?f.alias.push(w):(E=E||w,E!==w&&E.alias.push(w),h&&u.name&&!Th(w)&&o(u.name)),p.children){const N=p.children;for(let k=0;k<N.length;k++)s(N[k],w,f&&f.children[k])}f=f||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&l(w)}return E?()=>{o(E)}:xs}function o(u){if(oy(u)){const d=r.get(u);d&&(r.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let d=0;for(;d<n.length&&jS(u,n[d])>=0&&(u.record.path!==n[d].record.path||!ly(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!Th(u)&&r.set(u.record.name,u)}function c(u,d){let f,h={},p,m;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Hi(1,{location:u});m=f.record.name,h=Te(_h(d.params,f.keys.filter(E=>!E.optional).concat(f.parent?f.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),u.params&&_h(u.params,f.keys.map(E=>E.name))),p=f.stringify(h)}else if(u.path!=null)p=u.path,f=n.find(E=>E.re.test(p)),f&&(h=f.parse(p),m=f.record.name);else{if(f=d.name?r.get(d.name):n.find(E=>E.re.test(d.path)),!f)throw Hi(1,{location:u,currentLocation:d});m=f.record.name,h=Te({},d.params,u.params),p=f.stringify(h)}const y=[];let w=f;for(;w;)y.unshift(w.record),w=w.parent;return{name:m,path:p,params:h,matched:y,meta:YS(y)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function _h(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function GS(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:JS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function JS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Th(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function YS(t){return t.reduce((e,n)=>Te(e,n.meta),{})}function xh(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function ly(t,e){return e.children.some(n=>n===t||ly(t,n))}function XS(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(ey," "),o=s.indexOf("="),a=Us(o<0?s:s.slice(0,o)),l=o<0?null:Us(s.slice(o+1));if(a in e){let c=e[a];rn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Ch(t){let e="";for(let n in t){const r=t[n];if(n=yS(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(rn(r)?r.map(s=>s&&hu(s)):[r&&hu(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function QS(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=rn(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const ZS=Symbol(""),Oh=Symbol(""),Ad=Symbol(""),Id=Symbol(""),mu=Symbol("");function us(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function er(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Hi(4,{from:n,to:e})):f instanceof Error?l(f):BS(f)?l(Hi(2,{from:e,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function pc(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(e1(l)){const u=(l.__vccOpts||l)[e];u&&s.push(er(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=oS(u)?u.default:u;o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&er(h,n,r,o,a,i)()}))}}return s}function e1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ah(t){const e=en(Ad),n=en(Id),r=Vt(()=>e.resolve(X(t.to))),i=Vt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Fi.bind(null,u));if(f>-1)return f;const h=Ih(l[c-2]);return c>1&&Ih(u)===h&&d[d.length-1].path!==h?d.findIndex(Fi.bind(null,l[c-2])):f}),s=Vt(()=>i.value>-1&&i1(n.params,r.value.params)),o=Vt(()=>i.value>-1&&i.value===n.matched.length-1&&iy(n.params,r.value.params));function a(l={}){return r1(l)?e[X(t.replace)?"replace":"push"](X(t.to)).catch(xs):Promise.resolve()}return{route:r,href:Vt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const t1=fo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ah,setup(t,{slots:e}){const n=es(Ah(t)),{options:r}=en(Ad),i=Vt(()=>({[Mh(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Mh(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Wr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),n1=t1;function r1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function i1(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!rn(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Ih(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Mh=(t,e,n)=>t??e??n,s1=fo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=en(mu),i=Vt(()=>t.route||r.value),s=en(Oh,0),o=Vt(()=>{let c=X(s);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Vt(()=>i.value.matched[o.value]);Yo(Oh,Vt(()=>o.value+1)),Yo(ZS,a),Yo(mu,i);const l=Pe();return Fn(()=>[l.value,a.value,t.name],([c,u,d],[f,h,p])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Fi(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return Rh(n.default,{Component:f,route:c});const h=d.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,y=Wr(f,Te({},p,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Rh(n.default,{Component:y,route:c})||y}}});function Rh(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const gu=s1;function o1(t){const e=qS(t.routes,t),n=t.parseQuery||XS,r=t.stringifyQuery||Ch,i=t.history,s=us(),o=us(),a=us(),l=K0(Kn);let c=Kn;yi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fc.bind(null,O=>""+O),d=fc.bind(null,vS),f=fc.bind(null,Us);function h(O,H){let $,U;return oy(O)?($=e.getRecordMatcher(O),U=H):U=O,e.addRoute(U,$)}function p(O){const H=e.getRecordMatcher(O);H&&e.removeRoute(H)}function m(){return e.getRoutes().map(O=>O.record)}function y(O){return!!e.getRecordMatcher(O)}function w(O,H){if(H=Te({},H||l.value),typeof O=="string"){const v=hc(n,O,H.path),_=e.resolve({path:v.path},H),A=i.createHref(v.fullPath);return Te(v,_,{params:f(_.params),hash:Us(v.hash),redirectedFrom:void 0,href:A})}let $;if(O.path!=null)$=Te({},O,{path:hc(n,O.path,H.path).path});else{const v=Te({},O.params);for(const _ in v)v[_]==null&&delete v[_];$=Te({},O,{params:d(v)}),H.params=d(H.params)}const U=e.resolve($,H),ye=O.hash||"";U.params=u(f(U.params));const _e=SS(r,Te({},O,{hash:gS(ye),path:U.path})),g=i.createHref(_e);return Te({fullPath:_e,hash:ye,query:r===Ch?QS(O.query):O.query||{}},U,{redirectedFrom:void 0,href:g})}function E(O){return typeof O=="string"?hc(n,O,l.value.path):Te({},O)}function x(O,H){if(c!==O)return Hi(8,{from:H,to:O})}function b(O){return L(O)}function N(O){return b(Te(E(O),{replace:!0}))}function k(O){const H=O.matched[O.matched.length-1];if(H&&H.redirect){const{redirect:$}=H;let U=typeof $=="function"?$(O):$;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=E(U):{path:U},U.params={}),Te({query:O.query,hash:O.hash,params:U.path!=null?{}:O.params},U)}}function L(O,H){const $=c=w(O),U=l.value,ye=O.state,_e=O.force,g=O.replace===!0,v=k($);if(v)return L(Te(E(v),{state:typeof v=="object"?Te({},ye,v.state):ye,force:_e,replace:g}),H||$);const _=$;_.redirectedFrom=H;let A;return!_e&&ES(r,U,$)&&(A=Hi(16,{to:_,from:U}),Ge(U,U,!0,!1)),(A?Promise.resolve(A):ne(_,U)).catch(C=>On(C)?On(C,2)?C:We(C):Z(C,_,U)).then(C=>{if(C){if(On(C,2))return L(Te({replace:g},E(C.to),{state:typeof C.to=="object"?Te({},ye,C.to.state):ye,force:_e}),H||_)}else C=ve(_,U,!0,g,ye);return ae(_,U,C),C})}function Y(O,H){const $=x(O,H);return $?Promise.reject($):Promise.resolve()}function j(O){const H=lt.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(O):O()}function ne(O,H){let $;const[U,ye,_e]=a1(O,H);$=pc(U.reverse(),"beforeRouteLeave",O,H);for(const v of U)v.leaveGuards.forEach(_=>{$.push(er(_,O,H))});const g=Y.bind(null,O,H);return $.push(g),Ae($).then(()=>{$=[];for(const v of s.list())$.push(er(v,O,H));return $.push(g),Ae($)}).then(()=>{$=pc(ye,"beforeRouteUpdate",O,H);for(const v of ye)v.updateGuards.forEach(_=>{$.push(er(_,O,H))});return $.push(g),Ae($)}).then(()=>{$=[];for(const v of _e)if(v.beforeEnter)if(rn(v.beforeEnter))for(const _ of v.beforeEnter)$.push(er(_,O,H));else $.push(er(v.beforeEnter,O,H));return $.push(g),Ae($)}).then(()=>(O.matched.forEach(v=>v.enterCallbacks={}),$=pc(_e,"beforeRouteEnter",O,H,j),$.push(g),Ae($))).then(()=>{$=[];for(const v of o.list())$.push(er(v,O,H));return $.push(g),Ae($)}).catch(v=>On(v,8)?v:Promise.reject(v))}function ae(O,H,$){a.list().forEach(U=>j(()=>U(O,H,$)))}function ve(O,H,$,U,ye){const _e=x(O,H);if(_e)return _e;const g=H===Kn,v=yi?history.state:{};$&&(U||g?i.replace(O.fullPath,Te({scroll:g&&v&&v.scroll},ye)):i.push(O.fullPath,ye)),l.value=O,Ge(O,H,$,g),We()}let ge;function $e(){ge||(ge=i.listen((O,H,$)=>{if(!ct.listening)return;const U=w(O),ye=k(U);if(ye){L(Te(ye,{replace:!0}),U).catch(xs);return}c=U;const _e=l.value;yi&&MS(vh(_e.fullPath,$.delta),Dl()),ne(U,_e).catch(g=>On(g,12)?g:On(g,2)?(L(g.to,U).then(v=>{On(v,20)&&!$.delta&&$.type===Ws.pop&&i.go(-1,!1)}).catch(xs),Promise.reject()):($.delta&&i.go(-$.delta,!1),Z(g,U,_e))).then(g=>{g=g||ve(U,_e,!1),g&&($.delta&&!On(g,8)?i.go(-$.delta,!1):$.type===Ws.pop&&On(g,20)&&i.go(-1,!1)),ae(U,_e,g)}).catch(xs)}))}let Le=us(),de=us(),ee;function Z(O,H,$){We(O);const U=de.list();return U.length?U.forEach(ye=>ye(O,H,$)):console.error(O),Promise.reject(O)}function Ve(){return ee&&l.value!==Kn?Promise.resolve():new Promise((O,H)=>{Le.add([O,H])})}function We(O){return ee||(ee=!O,$e(),Le.list().forEach(([H,$])=>O?$(O):H()),Le.reset()),O}function Ge(O,H,$,U){const{scrollBehavior:ye}=t;if(!yi||!ye)return Promise.resolve();const _e=!$&&RS(vh(O.fullPath,0))||(U||!$)&&history.state&&history.state.scroll||null;return lo().then(()=>ye(O,H,_e)).then(g=>g&&IS(g)).catch(g=>Z(g,O,H))}const Re=O=>i.go(O);let kt;const lt=new Set,ct={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,hasRoute:y,getRoutes:m,resolve:w,options:t,push:b,replace:N,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Ve,install(O){const H=this;O.component("RouterLink",n1),O.component("RouterView",gu),O.config.globalProperties.$router=H,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>X(l)}),yi&&!kt&&l.value===Kn&&(kt=!0,b(i.location).catch(ye=>{}));const $={};for(const ye in Kn)Object.defineProperty($,ye,{get:()=>l.value[ye],enumerable:!0});O.provide(Ad,H),O.provide(Id,dg($)),O.provide(mu,l);const U=O.unmount;lt.add(O),O.unmount=function(){lt.delete(O),lt.size<1&&(c=Kn,ge&&ge(),ge=null,l.value=Kn,kt=!1,ee=!1),U()}}};function Ae(O){return O.reduce((H,$)=>H.then(()=>j($)),Promise.resolve())}return ct}function a1(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Fi(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Fi(c,l))||i.push(l))}return[n,r,i]}function Md(){return en(Id)}const cy="/IndiansAbroad/assets/BharatGuildLogo-8ORqGw2e.jpg";function uy(t){return Zm()?(T0(t),!0):!1}function Rd(t){return typeof t=="function"?t():X(t)}const l1=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const c1=Object.prototype.toString,u1=t=>c1.call(t)==="[object Object]",d1=()=>{};function f1(t){return t||_d()}function h1(t,e=!0,n){f1()?on(t,n):e?t():lo(t)}function p1(t){var e;const n=Rd(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Nd=l1?window:void 0;function m1(...t){let e,n,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,i]=t,e=Nd):[e,n,r,i]=t,!e)return d1;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,d,f,h)=>(u.addEventListener(d,f,h),()=>u.removeEventListener(d,f,h)),l=Fn(()=>[p1(e),Rd(i)],([u,d])=>{if(o(),!u)return;const f=u1(d)?{...d}:d;s.push(...n.flatMap(h=>r.map(p=>a(u,h,p,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return uy(c),c}function g1(){const t=Pe(!1),e=_d();return e&&on(()=>{t.value=!0},e),t}function y1(t){const e=g1();return Vt(()=>(e.value,!!t()))}function dy(t,e={}){const{window:n=Nd}=e,r=y1(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let i;const s=Pe(!1),o=c=>{s.value=c.matches},a=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",o):i.removeListener(o))},l=Eg(()=>{r.value&&(a(),i=n.matchMedia(Rd(t)),"addEventListener"in i?i.addEventListener("change",o):i.addListener(o),s.value=i.matches)});return uy(()=>{l(),a(),i=void 0}),s}function b1(t){return dy("(prefers-color-scheme: dark)",t)}function fy(t={}){const{window:e=Nd,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:s=!0}=t,o=Pe(n),a=Pe(r),l=()=>{e&&(s?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};if(l(),h1(l),m1("resize",l,{passive:!0}),i){const c=dy("(orientation: portrait)");Fn(c,()=>l())}return{width:o,height:a}}var Nh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},v1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new w1;const f=s<<2|a>>4;if(r.push(f),c!==64){const h=a<<4&240|c>>2;if(r.push(h),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k1=function(t){const e=hy(t);return py.encodeByteArray(e,!0)},my=function(t){return k1(t).replace(/\./g,"")},gy=function(t){try{return py.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=()=>S1().__FIREBASE_DEFAULTS__,_1=()=>{if(typeof process>"u"||typeof Nh>"u")return;const t=Nh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},T1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gy(t[1]);return e&&JSON.parse(e)},Pd=()=>{try{return E1()||_1()||T1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x1=t=>{var e,n;return(n=(e=Pd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yy=()=>{var t;return(t=Pd())===null||t===void 0?void 0:t.config},by=t=>{var e;return(e=Pd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function A1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M1(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function R1(){try{return typeof indexedDB=="object"}catch{return!1}}function N1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="FirebaseError";class _r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P1,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,po.prototype.create)}}class po{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?D1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _r(i,a,r)}}function D1(t,e){return t.replace(L1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L1=/\{\$([^}]+)}/g;function B1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ph(s)&&Ph(o)){if(!va(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ph(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $1(t,e){const n=new F1(t,e);return n.subscribe.bind(n)}class F1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=mc),i.error===void 0&&(i.error=mc),i.complete===void 0&&(i.complete=mc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new C1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z1(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j1(t){return t===Rr?void 0:t}function z1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const W1={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},K1=Oe.INFO,q1={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},G1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=q1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=K1,this._logHandler=G1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const J1=(t,e)=>e.some(n=>t instanceof n);let Dh,Lh;function Y1(){return Dh||(Dh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X1(){return Lh||(Lh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wy=new WeakMap,yu=new WeakMap,ky=new WeakMap,gc=new WeakMap,Dd=new WeakMap;function Q1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(pr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wy.set(n,t)}).catch(()=>{}),Dd.set(e,t),e}function Z1(t){if(yu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yu.set(t,e)}let bu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ky.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eE(t){bu=t(bu)}function tE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yc(this),e,...n);return ky.set(r,e.sort?e.sort():[e]),pr(r)}:X1().includes(t)?function(...e){return t.apply(yc(this),e),pr(wy.get(this))}:function(...e){return pr(t.apply(yc(this),e))}}function nE(t){return typeof t=="function"?tE(t):(t instanceof IDBTransaction&&Z1(t),J1(t,Y1())?new Proxy(t,bu):t)}function pr(t){if(t instanceof IDBRequest)return Q1(t);if(gc.has(t))return gc.get(t);const e=nE(t);return e!==t&&(gc.set(t,e),Dd.set(e,t)),e}const yc=t=>Dd.get(t);function rE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=pr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(pr(o.result),l.oldVersion,l.newVersion,pr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const iE=["get","getKey","getAll","getAllKeys","count"],sE=["put","add","delete","clear"],bc=new Map;function Bh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bc.get(e))return bc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iE.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return bc.set(e,s),s}eE(t=>({...t,get:(e,n,r)=>Bh(e,n)||t.get(e,n,r),has:(e,n)=>!!Bh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vu="@firebase/app",$h="0.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new vy("@firebase/app"),lE="@firebase/app-compat",cE="@firebase/analytics-compat",uE="@firebase/analytics",dE="@firebase/app-check-compat",fE="@firebase/app-check",hE="@firebase/auth",pE="@firebase/auth-compat",mE="@firebase/database",gE="@firebase/database-compat",yE="@firebase/functions",bE="@firebase/functions-compat",vE="@firebase/installations",wE="@firebase/installations-compat",kE="@firebase/messaging",SE="@firebase/messaging-compat",EE="@firebase/performance",_E="@firebase/performance-compat",TE="@firebase/remote-config",xE="@firebase/remote-config-compat",CE="@firebase/storage",OE="@firebase/storage-compat",AE="@firebase/firestore",IE="@firebase/firestore-compat",ME="firebase",RE="10.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="[DEFAULT]",NE={[vu]:"fire-core",[lE]:"fire-core-compat",[uE]:"fire-analytics",[cE]:"fire-analytics-compat",[fE]:"fire-app-check",[dE]:"fire-app-check-compat",[hE]:"fire-auth",[pE]:"fire-auth-compat",[mE]:"fire-rtdb",[gE]:"fire-rtdb-compat",[yE]:"fire-fn",[bE]:"fire-fn-compat",[vE]:"fire-iid",[wE]:"fire-iid-compat",[kE]:"fire-fcm",[SE]:"fire-fcm-compat",[EE]:"fire-perf",[_E]:"fire-perf-compat",[TE]:"fire-rc",[xE]:"fire-rc-compat",[CE]:"fire-gcs",[OE]:"fire-gcs-compat",[AE]:"fire-fst",[IE]:"fire-fst-compat","fire-js":"fire-js",[ME]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Map,PE=new Map,ku=new Map;function Fh(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(ku.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;ku.set(e,t);for(const n of wa.values())Fh(n,t);for(const n of PE.values())Fh(n,t);return!0}function Sy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new po("app","Firebase",DE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=RE;function Ey(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=yy()),!n)throw mr.create("no-options");const s=wa.get(i);if(s){if(va(n,s.options)&&va(r,s.config))return s;throw mr.create("duplicate-app",{appName:i})}const o=new U1(i);for(const l of ku.values())o.addComponent(l);const a=new LE(n,r,o);return wa.set(i,a),a}function BE(t=wu){const e=wa.get(t);if(!e&&t===wu&&yy())return Ey();if(!e)throw mr.create("no-app",{appName:t});return e}function Ai(t,e,n){var r;let i=(r=NE[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(a.join(" "));return}Ks(new Vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",FE=1,qs="firebase-heartbeat-store";let vc=null;function _y(){return vc||(vc=rE($E,FE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qs)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),vc}async function HE(t){try{const n=(await _y()).transaction(qs),r=await n.objectStore(qs).get(Ty(t));return await n.done,r}catch(e){if(e instanceof _r)ei.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function Hh(t,e){try{const r=(await _y()).transaction(qs,"readwrite");await r.objectStore(qs).put(e,Ty(t)),await r.done}catch(n){if(n instanceof _r)ei.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(r.message)}}}function Ty(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=1024,jE=30*24*60*60*1e3;class zE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vh();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=jE}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vh(),{heartbeatsToSend:r,unsentEntries:i}=UE(this._heartbeatsCache.heartbeats),s=my(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Vh(){return new Date().toISOString().substring(0,10)}function UE(t,e=VE){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R1()?N1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jh(t){return my(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){Ks(new Vi("platform-logger",e=>new oE(e),"PRIVATE")),Ks(new Vi("heartbeat",e=>new zE(e),"PRIVATE")),Ai(vu,$h,t),Ai(vu,$h,"esm2017"),Ai("fire-js","")}KE("");function Ld(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qE=xy,Cy=new po("auth","Firebase",xy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new vy("@firebase/auth");function GE(t,...e){ka.logLevel<=Oe.WARN&&ka.warn(`Auth (${go}): ${t}`,...e)}function ea(t,...e){ka.logLevel<=Oe.ERROR&&ka.error(`Auth (${go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw $d(t,...e)}function tn(t,...e){return $d(t,...e)}function Bd(t,e,n){const r=Object.assign(Object.assign({},qE()),{[e]:n});return new po("auth","Firebase",r).create(e,{appName:t.name})}function Kr(t){return Bd(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),Bd(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $d(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Cy.create(t,...e)}function se(t,e,...n){if(!t)throw $d(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ea(e),new Error(e)}function Vn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YE(){return zh()==="http:"||zh()==="https:"}function zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YE()||A1()||"connection"in navigator)?navigator.onLine:!0}function QE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vn(n>e,"Short delay should be less than long delay!"),this.isMobile=O1()||I1()}get(){return XE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t,e){Vn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new yo(3e4,6e4);function Hd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function is(t,e,n,r,i={}){return Ay(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=mo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Oy.fetch()(Iy(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Ay(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZE),e);try{const i=new n_(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bo(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Bd(t,u,c);Sn(t,u)}}catch(i){if(i instanceof _r)throw i;Sn(t,"network-request-failed",{message:String(i)})}}async function t_(t,e,n,r,i={}){const s=await is(t,e,n,r,i);return"mfaPendingCredential"in s&&Sn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Iy(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Fd(t.config,i):`${t.config.apiScheme}://${i}`}class n_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),e_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function My(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i_(t,e=!1){const n=rs(t),r=await n.getIdToken(e),i=Vd(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Os(wc(i.auth_time)),issuedAtTime:Os(wc(i.iat)),expirationTime:Os(wc(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wc(t){return Number(t)*1e3}function Vd(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ea("JWT malformed, contained fewer than 3 sections"),null;try{const i=gy(n);return i?JSON.parse(i):(ea("Failed to decode base64 JWT payload"),null)}catch(i){return ea("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Uh(t){const e=Vd(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _r&&s_(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function s_({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Os(this.lastLoginAt),this.creationTime=Os(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Gs(t,My(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ry(s.providerUserInfo):[],a=l_(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Eu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function a_(t){const e=rs(t);await Sa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l_(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ry(t){return t.map(e=>{var{providerId:n}=e,r=Ld(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(t,e){const n=await Ay(t,{},async()=>{const r=mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Iy(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Oy.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u_(t,e){return is(t,"POST","/v2/accounts:revokeToken",Hd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Uh(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await c_(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ii;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ii,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ld(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Eu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gs(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return i_(this,e)}reload(){return a_(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Gs(this,r_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:b,isAnonymous:N,providerData:k,stsTokenManager:L}=n;se(x&&L,e,"internal-error");const Y=Ii.fromJSON(this.name,L);se(typeof x=="string",e,"internal-error"),qn(d,e.name),qn(f,e.name),se(typeof b=="boolean",e,"internal-error"),se(typeof N=="boolean",e,"internal-error"),qn(h,e.name),qn(p,e.name),qn(m,e.name),qn(y,e.name),qn(w,e.name),qn(E,e.name);const j=new Dn({uid:x,auth:e,email:f,emailVerified:b,displayName:d,isAnonymous:N,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:Y,createdAt:w,lastLoginAt:E});return k&&Array.isArray(k)&&(j.providerData=k.map(ne=>Object.assign({},ne))),y&&(j._redirectEventId=y),j}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ii;i.updateFromServerResponse(n);const s=new Dn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sa(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Ry(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ii;a.updateFromIdToken(r);const l=new Dn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map;function Ln(t){Vn(t instanceof Function,"Expected a class definition");let e=Wh.get(t);return e?(Vn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wh.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ny.type="NONE";const Kh=Ny;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e,n){return`firebase:${t}:${e}:${n}`}class Mi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ta(this.userKey,i.apiKey,s),this.fullPersistenceKey=ta("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mi(Ln(Kh),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ln(Kh);const o=ta(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Dn._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Mi(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Mi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ly(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Py(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($y(e))return"Blackberry";if(Fy(e))return"Webos";if(jd(e))return"Safari";if((e.includes("chrome/")||Dy(e))&&!e.includes("edge/"))return"Chrome";if(By(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Py(t=ft()){return/firefox\//i.test(t)}function jd(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dy(t=ft()){return/crios\//i.test(t)}function Ly(t=ft()){return/iemobile/i.test(t)}function By(t=ft()){return/android/i.test(t)}function $y(t=ft()){return/blackberry/i.test(t)}function Fy(t=ft()){return/webos/i.test(t)}function Ll(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function d_(t=ft()){var e;return Ll(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function f_(){return M1()&&document.documentMode===10}function Hy(t=ft()){return Ll(t)||By(t)||Fy(t)||$y(t)||/windows phone/i.test(t)||Ly(t)}function h_(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e=[]){let n;switch(t){case"Browser":n=qh(ft());break;case"Worker":n=`${qh(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(t,e={}){return is(t,"GET","/v2/passwordPolicy",Hd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=6;class y_{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:g_,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gh(this),this.idTokenSubscription=new Gh(this),this.beforeStateQueue=new p_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Mi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await My(this,{idToken:e}),r=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(Kr(this));const n=e?rs(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m_(this),n=new y_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new po("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await u_(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Mi.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bl(t){return rs(t)}class Gh{constructor(e){this.auth=e,this.observer=null,this.addObserver=$1(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v_(t){zd=t}function w_(t){return zd.loadJS(t)}function k_(){return zd.gapiScript}function S_(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){const n=Sy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(va(s,e??{}))return i;Sn(i,"already-initialized")}return n.initialize({options:e})}function __(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function T_(t,e,n){const r=Bl(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jy(e),{host:o,port:a}=x_(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||C_()}function jy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function x_(t){const e=jy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Jh(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Jh(o)}}}function Jh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function C_(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e){return t_(t,"POST","/v1/accounts:signInWithIdp",Hd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="http://localhost";class ti extends zy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ld(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ti(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ri(e,n)}buildRequest(){const e={requestUri:O_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Ud{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends bo{constructor(){super("facebook.com")}static credential(e){return ti._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ti._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rn.credential(n,r)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends bo{constructor(){super("github.com")}static credential(e){return ti._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends bo{constructor(){super("twitter.com")}static credential(e,n){return ti._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dn._fromIdTokenResponse(e,r,i),o=Yh(r);return new ji({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Yh(r);return new ji({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Yh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends _r{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ea.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ea(e,n,r,i)}}function Uy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ea._fromErrorAndOperation(t,s,e,r):s})}async function A_(t,e,n=!1){const r=await Gs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ji._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const s=await Gs(t,Uy(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Vd(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),ji._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(t,e,n=!1){if(Nn(t.app))return Promise.reject(Kr(t));const r="signIn",i=await Uy(t,r,e),s=await ji._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function R_(t,e,n,r){return rs(t).onIdTokenChanged(e,n,r)}function N_(t,e,n){return rs(t).beforeAuthStateChanged(e,n)}const _a="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){const t=ft();return jd(t)||Ll(t)}const D_=1e3,L_=10;class Ky extends Wy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=P_()&&h_(),this.fallbackToPolling=Hy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);f_()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,L_):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},D_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ky.type="LOCAL";const B_=Ky;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Wy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qy.type="SESSION";const Gy=qy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $l(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await $_(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$l.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Wd("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function H_(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function V_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j_(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function z_(){return Jy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="firebaseLocalStorageDb",U_=1,Ta="firebaseLocalStorage",Xy="fbase_key";class vo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fl(t,e){return t.transaction([Ta],e?"readwrite":"readonly").objectStore(Ta)}function W_(){const t=indexedDB.deleteDatabase(Yy);return new vo(t).toPromise()}function _u(){const t=indexedDB.open(Yy,U_);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ta,{keyPath:Xy})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ta)?e(r):(r.close(),await W_(),e(await _u()))})})}async function Xh(t,e,n){const r=Fl(t,!0).put({[Xy]:e,value:n});return new vo(r).toPromise()}async function K_(t,e){const n=Fl(t,!1).get(e),r=await new vo(n).toPromise();return r===void 0?null:r.value}function Qh(t,e){const n=Fl(t,!0).delete(e);return new vo(n).toPromise()}const q_=800,G_=3;class Qy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _u(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>G_)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$l._getInstance(z_()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await V_(),!this.activeServiceWorker)return;this.sender=new F_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _u();return await Xh(e,_a,"1"),await Qh(e,_a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xh(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>K_(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fl(i,!1).getAll();return new vo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qy.type="LOCAL";const J_=Qy;new yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){return e?Ln(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends zy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y_(t){return M_(t.auth,new Kd(t),t.bypassAuthState)}function X_(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),I_(n,new Kd(t),t.bypassAuthState)}async function Q_(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),A_(n,new Kd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y_;case"linkViaPopup":case"linkViaRedirect":return Q_;case"reauthViaPopup":case"reauthViaRedirect":return X_;default:Sn(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new yo(2e3,1e4);async function eT(t,e,n){if(Nn(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=Bl(t);JE(t,e,Ud);const i=Zy(r,n);return new Fr(r,"signInViaPopup",e,i).executeNotNull()}class Fr extends eb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Vn(this.filter.length===1,"Popup operations only handle one event");const e=Wd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z_.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="pendingRedirect",na=new Map;class nT extends eb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const r=await rT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rT(t,e){const n=oT(e),r=sT(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function iT(t,e){na.set(t._key(),e)}function sT(t){return Ln(t._redirectPersistence)}function oT(t){return ta(tT,t.config.apiKey,t.name)}async function aT(t,e,n=!1){if(Nn(t.app))return Promise.reject(Kr(t));const r=Bl(t),i=Zy(r,e),o=await new nT(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=10*60*1e3;class cT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zh(e))}saveEventToCache(e){this.cachedEventUids.add(Zh(e)),this.lastProcessedEventTime=Date.now()}}function Zh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hT=/^https?/;async function pT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dT(t);for(const n of e)try{if(mT(n))return}catch{}Sn(t,"unauthorized-domain")}function mT(t){const e=Su(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hT.test(n))return!1;if(fT.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new yo(3e4,6e4);function ep(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yT(t){return new Promise((e,n)=>{var r,i,s;function o(){ep(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ep(),n(tn(t,"network-request-failed"))},timeout:gT.get()})}if(!((i=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vn().gapi)===null||s===void 0)&&s.load)o();else{const a=S_("iframefcb");return vn()[a]=()=>{gapi.load?o():n(tn(t,"network-request-failed"))},w_(`${k_()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ra=null,e})}let ra=null;function bT(t){return ra=ra||yT(t),ra}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new yo(5e3,15e3),wT="__/auth/iframe",kT="emulator/auth/iframe",ST={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ET=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _T(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fd(e,kT):`https://${t.config.authDomain}/${wT}`,r={apiKey:e.apiKey,appName:t.name,v:go},i=ET.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mo(r).slice(1)}`}async function TT(t){const e=await bT(t),n=vn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:_T(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ST,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),a=vn().setTimeout(()=>{s(o)},vT.get());function l(){vn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CT=500,OT=600,AT="_blank",IT="http://localhost";class tp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MT(t,e,n,r=CT,i=OT){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xT),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ft().toLowerCase();n&&(a=Dy(c)?AT:n),Py(c)&&(e=e||IT,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(d_(c)&&a!=="_self")return RT(e||"",a),new tp(null);const d=window.open(e||"",a,u);se(d,t,"popup-blocked");try{d.focus()}catch{}return new tp(d)}function RT(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__/auth/handler",PT="emulator/auth/handler",DT=encodeURIComponent("fac");async function np(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:go,eventId:i};if(e instanceof Ud){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",B1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof bo){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${DT}=${encodeURIComponent(l)}`:"";return`${LT(t)}?${mo(a).slice(1)}${c}`}function LT({config:t}){return t.emulator?Fd(t,PT):`https://${t.authDomain}/${NT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="webStorageSupport";class BT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gy,this._completeRedirectFn=aT,this._overrideRedirectResult=iT}async _openPopup(e,n,r,i){var s;Vn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await np(e,n,r,Su(),i);return MT(e,o,Wd())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await np(e,n,r,Su(),i);return H_(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Vn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TT(e),r=new cT(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kc,{type:kc},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[kc];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Hy()||jd()||Ll()}}const $T=BT;var rp="@firebase/auth",ip="1.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VT(t){Ks(new Vi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vy(t)},c=new b_(r,i,s,l);return __(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new Vi("auth-internal",e=>{const n=Bl(e.getProvider("auth").getImmediate());return(r=>new FT(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(rp,ip,HT(t)),Ai(rp,ip,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=5*60,zT=by("authIdTokenMaxAge")||jT;let sp=null;const UT=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zT)return;const i=n==null?void 0:n.token;sp!==i&&(sp=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WT(t=BE()){const e=Sy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=E_(t,{popupRedirectResolver:$T,persistence:[J_,B_,Gy]}),r=by("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=UT(s.toString());N_(n,o,()=>o(n.currentUser)),R_(n,a=>o(a))}}const i=x1("auth");return i&&T_(n,`http://${i}`),n}function KT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v_({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=tn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VT("Browser");const xn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Cn=t=>(co("data-v-91b0998a"),t=t(),uo(),t),qT={class:"container p-0",style:{margin:"0px"}},GT={class:"card p-2 shadow border-0 m-1"},JT=Cn(()=>S("h4",null,[S("strong",null,"We are a community of Indians Abroad")],-1)),YT=Cn(()=>S("p",{class:"arvo-regular"},"Join us, and lets make the world a smaller, more connected place for Indians everywhere.",-1)),XT=Cn(()=>S("button",{type:"button",class:"btn btn-outline-primary",style:{width:"100%"}},"Profile",-1)),QT=Cn(()=>S("hr",null,null,-1)),ZT={class:"nav nav-pills flex-column mb-auto"},ex=Cn(()=>S("i",{class:"fa-regular fa-newspaper me-2",style:{color:"#337357"}},null,-1)),tx={class:"nav-item"},nx=Cn(()=>S("i",{class:"fa-regular fa-comments me-2",style:{color:"#EE4266"}},null,-1)),rx=Cn(()=>S("i",{class:"fa-solid fa-bookmark me-2",style:{color:"#FFD23F"}},null,-1)),ix=Cn(()=>S("i",{class:"fa-solid fa-handshake-angle me-2",style:{color:"#337357"}},null,-1)),sx=Cn(()=>S("i",{class:"fa-solid fa-address-card me-2",style:{color:"#FFD23F"}},null,-1)),ox=Cn(()=>S("i",{class:"fa-solid fa-address-book me-2",style:{color:"#5E1675"}},null,-1)),ax={__name:"NavBody",setup(t){const e=ts();let n=Pe(localStorage.getItem("auth-token"));const r=()=>{const s=new Rn;eT(WT(),s).then(o=>{localStorage.setItem("name",o.user.displayName),localStorage.setItem("image",o.user.photoURL),localStorage.setItem("email",o.user.email),e.state.image=o.user.photoURL,fetch("https://test-am3oxfhvvq-em.a.run.app/google/login",{method:"POST",Allow:["GET","POST","OPTIONS"],headers:{"Content-type":"application/json"},body:JSON.stringify({token:o.user.accessToken})}).then(a=>{if(!a.ok)throw new Error("Network response was not ok");return a.json()}).then(a=>{a.state==0&&(localStorage.setItem("auth-token",a.token),localStorage.setItem("role",a.role),alert("Logged In"),n.value=!0)}).catch(a=>{console.error("There was a problem with the fetch operation:",a)})})};function i(){localStorage.removeItem("auth-token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("image"),localStorage.removeItem("email"),n.value=null,e.state.image=null}return(s,o)=>{const a=ws("router-link");return Q(),pe("div",qT,[S("div",GT,[JT,YT,X(n)?(Q(),gt(a,{key:0,to:"/profile"},{default:Et(()=>[XT]),_:1})):Nt("",!0),X(n)?(Q(),pe("button",{key:1,type:"button",class:"btn btn-outline-secondary mt-2",style:{width:"100%"},onClick:i},"Logout")):Nt("",!0),X(n)?Nt("",!0):(Q(),pe("button",{key:2,type:"button",class:"login-with-google-btn shadow",style:{width:"100%"},onClick:r}," Sign in with Google "))]),QT,S("ul",ZT,[S("li",null,[Se(a,{to:"/",class:"nav-link link-body-emphasis"},{default:Et(()=>[ex,Xn(" News ")]),_:1})]),S("li",tx,[Se(a,{to:"/discusion",class:"nav-link link-body-emphasis"},{default:Et(()=>[nx,Xn(" Discusions ")]),_:1})]),S("li",null,[X(n)?(Q(),gt(a,{key:0,to:"/saved",class:"nav-link link-body-emphasis"},{default:Et(()=>[rx,Xn(" Saved ")]),_:1})):Nt("",!0)]),S("li",null,[Se(a,{to:"/help",class:"nav-link link-body-emphasis"},{default:Et(()=>[ix,Xn(" Help ")]),_:1})]),S("li",null,[Se(a,{to:"/about",class:"nav-link link-body-emphasis"},{default:Et(()=>[sx,Xn(" About ")]),_:1})]),S("li",null,[Se(a,{to:"/",class:"nav-link link-body-emphasis"},{default:Et(()=>[ox,Xn(" Contact ")]),_:1})])])])}}},nb=xn(ax,[["__scopeId","data-v-91b0998a"]]),wo=t=>(co("data-v-aa742de4"),t=t(),uo(),t),lx={class:"navbar shadow fixed-top p-2 border-bottom",style:{"background-color":"#000000"}},cx={class:"container align-items-center",style:{"grid-template-columns":"1fr 2fr"}},ux={class:"d-flex align-items-center"},dx=["src"],fx={key:1,class:"avatar-img rounded-circle",height:"38px",src:cy,alt:"Bharat Guild"},hx=wo(()=>S("label",{for:"checkbox",class:"checkbox-label"},[S("i",{class:"fas fa-moon"}),S("i",{class:"fas fa-sun"}),S("span",{class:"ball"})],-1)),px={class:"d-flex align-items-center"},mx={class:"input-group-text me-3",style:{padding:"1px 6px"}},gx=wo(()=>S("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),yx={class:"input-group-text me-3",style:{padding:"1px 6px"}},bx=wo(()=>S("i",{class:"fa-solid fa-bell"},null,-1)),vx={key:0,class:"rounded border-0","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation"},wx=wo(()=>S("i",{class:"fa-solid fa-bars"},null,-1)),kx=[wx],Sx={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",style:{width:"60vw"}},Ex=wo(()=>S("div",{class:"offcanvas-header"},[S("h4",{class:"offcanvas-title",id:"offcanvasNavbarLabel"},[S("strong",null,"Bharat Guild")]),S("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),_x={class:"offcanvas-body p-1"},Tx={__name:"NavBar",setup(t){const e=ts(),{width:n,height:r}=fy(),i=b1();on(()=>{const l=localStorage.getItem("mode");l?(console.log(l),l=="dark"&&console.log(2)):i?(console.log(3),document.getElementById("checkbox").click()):(console.log(4),localStorage.setItem("mode","light"))});function s(){localStorage.setItem("mode","light");let l=document.querySelector("body");l.dataset.bsTheme="light"}function o(){localStorage.setItem("mode","dark");let l=document.querySelector("body");l.dataset.bsTheme="dark"}function a(){localStorage.getItem("mode")=="dark"?s():o()}return(l,c)=>{const u=ws("router-link");return Q(),pe("nav",lx,[S("div",cx,[S("div",ux,[Se(u,{to:"/",style:{"margin-right":"1rem"}},{default:Et(()=>[X(e).state.image?(Q(),pe("img",{key:0,class:"avatar-img rounded-circle",height:"38px",src:X(e).state.image,alt:"Bharat Guild"},null,8,dx)):(Q(),pe("img",fx))]),_:1}),S("div",{class:"flex-shrink-0",style:{"margin-right":"1rem"}},[S("div",null,[S("input",{type:"checkbox",class:"checkbox",id:"checkbox",onClick:a}),hx])])]),S("div",px,[S("span",mx,[Se(u,{to:"/search",class:"link-body-emphasis"},{default:Et(()=>[gx]),_:1})]),S("span",yx,[Se(u,{to:"/notifications",class:"link-body-emphasis"},{default:Et(()=>[bx]),_:1})]),X(n)<850?(Q(),pe("button",vx,kx)):Nt("",!0),S("div",Sx,[Ex,S("div",_x,[Se(nb)])])])])])}}},xx=xn(Tx,[["__scopeId","data-v-aa742de4"]]),Cx={},Ox={class:"container",style:{margin:"0px",width:"325px"}},Ax=Ml('<div class="card mb-3"><div class="card-header p-2 border-0 text-center"><h5 class="card-title mb-0">Latest News</h5></div><div class="card-body"><div class="list-group list-group-flush border-bottom scrollarea"><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a></div><div class="d-grid mt-3"><a class="btn btn-sm btn-primary-soft" href="#!">View more</a></div></div></div><div class="card"><div class="card-header p-2 border-0 text-center"><h5 class="card-title mb-0">Top Discussions</h5></div><div class="card-body"><div class="list-group list-group-flush border-bottom scrollarea"><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a><a href="#" class="list-group-item list-group-item-action p-1 lh-sm"><div class="d-flex w-100 align-items-center justify-content-between"><strong class="mb-1">List group item heading</strong><small>Wed</small></div><div class="col-10 mb-1 small">Some placeholder content in a paragraph below the heading and date.</div></a></div><div class="d-grid mt-3"><a class="btn btn-sm btn-primary-soft" href="#!">View more</a></div></div></div>',2),Ix=[Ax];function Mx(t,e){return Q(),pe("div",Ox,Ix)}const Rx=xn(Cx,[["render",Mx]]),Nx={key:0,class:"d-flex justify-content-center m-auto"},Px={__name:"App",setup(t){const{width:e,height:n}=fy(),r=ts(),i=Md();let s=Pe(!0),o=Pe(0);return on(async()=>{r.state.isDiscusionLoaded==!1&&await r.dispatch("getDiscusions")}),Fn(i,(a,l)=>{s.value=!s.value,o.value+=1}),(a,l)=>(Q(),pe(Je,null,[(Q(),gt(xx,{key:X(s)})),X(e)>849?(Q(),pe("div",Nx,[(Q(),gt(nb,{style:{"margin-top":"6rem",width:"250px"},key:X(s)})),(Q(),gt(X(gu),{key:X(o),style:{width:"650px"}})),Se(Rx,{style:{"margin-top":"6rem"}})])):(Q(),gt(X(gu),{key:X(o)}))],64))}},Dx="modulepreload",Lx=function(t){return"/IndiansAbroad/"+t},op={},Gt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=Lx(o),o in op)return;op[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Dx,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Bx=t=>(co("data-v-28c39adc"),t=t(),uo(),t),$x={class:"row d-flex justify-content-center p-2"},Fx={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},Hx=Bx(()=>S("p",{class:"text-center"},"Check content based on senstivity",-1)),Vx={__name:"CheckBox",emits:["inFocus","filterData"],setup(t,{emit:e}){let n=Pe(!0),r=Pe(!0),i=Pe(!0),s=Pe(!0);const o=e;function a(){o("filterData",{v:n.value,p:r.value,r:i.value,o:s.value})}return(l,c)=>(Q(),pe("div",$x,[S("div",Fx,[(Q(),pe("label",{class:xe(["btn",{"btn-danger":X(n),"btn-outline-danger":!X(n)}]),onClick:c[0]||(c[0]=u=>{He(n)?n.value=!X(n):n=!X(n),a()}),key:X(n)},"Voilent",2)),(Q(),pe("label",{class:xe(["btn",{"btn-warning":X(r),"btn-outline-warning":!X(r)}]),onClick:c[1]||(c[1]=u=>{He(r)?r.value=!X(r):r=!X(r),a()}),key:X(r)},"Political",2)),(Q(),pe("label",{class:xe(["btn",{"btn-success":X(i),"btn-outline-success":!X(i)}]),onClick:c[2]||(c[2]=u=>{He(i)?i.value=!X(i):i=!X(i),a()}),key:X(i)},"Religion",2)),(Q(),pe("label",{class:xe(["btn",{"btn-primary":X(s),"btn-outline-primary":!X(s)}]),onClick:c[3]||(c[3]=u=>{He(s)?s.value=!X(s):s=!X(s),a()}),key:X(s)},"Success",2))]),Hx]))}},jx=xn(Vx,[["__scopeId","data-v-28c39adc"]]),zx={},Ux={id:"container1"},Wx=Ml('<div id="objects" data-v-fd68ca9b><a class="nav-link object" data-v-fd68ca9b>Germany</a><a class="nav-link object" href="#" data-v-fd68ca9b>Uk</a><a class="nav-link object" href="#" data-v-fd68ca9b>Russia</a><a class="nav-link object" href="#" data-v-fd68ca9b>Italy</a><a class="nav-link object" href="#" data-v-fd68ca9b>Australia</a><a class="nav-link object" href="#" data-v-fd68ca9b>Germany</a><a class="nav-link object" href="#" data-v-fd68ca9b>Uk</a><a class="nav-link object" href="#" data-v-fd68ca9b>Russia</a><a class="nav-link object" href="#" data-v-fd68ca9b>Italy</a><a class="nav-link object" href="#" data-v-fd68ca9b>Australia</a></div>',1),Kx=[Wx];function qx(t,e){return Q(),pe("div",Ux,Kx)}const Gx=xn(zx,[["render",qx],["__scopeId","data-v-fd68ca9b"]]),Jx={},Yx={class:"card","aria-hidden":"true"},Xx=Ml('<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJztHLBqLX7gIZz4ZFSTq7ADz1hhicBg0gDuB7E4bAgQ&amp;s" class="card-img-top" alt="..."><div class="card-body"><h5 class="card-title placeholder-glow"><span class="placeholder col-6"></span></h5><p class="card-text placeholder-glow"><span class="placeholder col-7"></span><span class="placeholder col-4"></span><span class="placeholder col-4"></span><span class="placeholder col-6"></span><span class="placeholder col-8"></span></p><a class="btn btn-primary disabled placeholder col-6" aria-disabled="true"></a></div>',2),Qx=[Xx];function Zx(t,e){return Q(),pe("div",Yx,Qx)}const ap=xn(Jx,[["render",Zx]]),eC=Ml('<div class="d-flex gap-1 border-0 p-1 justify-content-start mb-0" aria-current="true"><img src="https://images.unsplash.com/photo-1510227272981-87123e259b17?ixlib=rb-0.3.5&amp;q=80&amp;fm=jpg&amp;crop=faces&amp;fit=crop&amp;h=200&amp;w=200&amp;s=3759e09a5b9fbe53088b23c615b6312e" alt="twbs" width="34" height="34" class="rounded-circle flex-shrink-0"><div class=""><h6 class="card-title mb-0 lora-regular">Abhijeet Singh </h6><span class="text-body-secondary lora-regular" style="font-size:12px;">Posted 9 days ago</span></div></div>',1),tC={class:"remove-style"},nC=["innerHTML"],lp={__name:"CommentCard",props:{name:String,time:String,content:String},setup(t){return on(()=>{var e=document.querySelectorAll(".remove-style, .remove-style *");e.forEach(function(n){n.removeAttribute("style")})}),(e,n)=>(Q(),pe(Je,null,[eC,S("div",tC,[S("p",{class:"mb-0 r p-1 ql-editor",innerHTML:t.content},null,8,nC)])],64))}};function tt(t){this.content=t}tt.prototype={constructor:tt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new tt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new tt(n)},addToStart:function(t,e){return new tt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new tt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new tt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=tt.from(t),t.size?new tt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=tt.from(t),t.size?new tt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=tt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};tt.from=function(t){if(t instanceof tt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new tt(e)};function rb(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=rb(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function ib(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=ib(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class M{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new M(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new M(r,i)}cutByIndex(e,n){return e==n?M.empty:e==0&&n==this.content.length?this:new M(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new M(i,s)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return rb(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return ib(this,e,n,r)}findIndex(e,n=-1){if(e==0)return $o(0,e);if(e==this.size)return $o(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?$o(r+1,o):$o(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return M.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new M(n||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Sc={index:0,offset:0};function $o(t,e){return Sc.index=t,Sc.offset=e,Sc}function xa(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!xa(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!xa(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ce=class Tu{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&xa(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Tu.none;if(e instanceof Tu)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ce.none=[];class Ca extends Error{}class z{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=ob(this.content,e+this.openStart,n);return r&&new z(r,this.openStart,this.openEnd)}removeBetween(e,n){return new z(sb(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return z.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new z(M.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new z(e,r,i)}}z.empty=new z(M.empty,0,0);function sb(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(sb(s.content,e-i-1,n-i-1)))}function ob(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=ob(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function rC(t,e,n){if(n.openStart>t.depth)throw new Ca("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ca("Inconsistent open depths");return ab(t,e,n,0)}function ab(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=ab(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Gr(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=iC(n,t);return Gr(s,cb(t,o,a,e,r))}else return Gr(s,Oa(t,e,r))}function lb(t,e){if(!e.type.compatibleContent(t.type))throw new Ca("Cannot join "+e.type.name+" onto "+t.type.name)}function xu(t,e,n){let r=t.node(n);return lb(r,e.node(n)),r}function qr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function As(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(qr(t.nodeAfter,r),s++));for(let a=s;a<o;a++)qr(i.child(a),r);e&&e.depth==n&&e.textOffset&&qr(e.nodeBefore,r)}function Gr(t,e){return t.type.checkContent(e),t.copy(e)}function cb(t,e,n,r,i){let s=t.depth>i&&xu(t,e,i+1),o=r.depth>i&&xu(n,r,i+1),a=[];return As(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(lb(s,o),qr(Gr(s,cb(t,e,n,r,i+1)),a)):(s&&qr(Gr(s,Oa(t,e,i+1)),a),As(e,n,i,a),o&&qr(Gr(o,Oa(n,r,i+1)),a)),As(r,null,i,a),new M(a)}function Oa(t,e,n){let r=[];if(As(null,t,n,r),t.depth>n){let i=xu(t,e,n+1);qr(Gr(i,Oa(t,e,n+1)),r)}return As(e,null,n,r),new M(r)}function iC(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(M.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Js{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ce.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Aa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Js(n,r,s)}static resolveCached(e,n){for(let i=0;i<Ec.length;i++){let s=Ec[i];if(s.pos==n&&s.doc==e)return s}let r=Ec[_c]=Js.resolve(e,n);return _c=(_c+1)%sC,r}}let Ec=[],_c=0,sC=12;class Aa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oC=Object.create(null);let Jr=class Cu{constructor(e,n,r,i=Ce.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||M.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&xa(this.attrs,n||e.defaultAttrs||oC)&&Ce.sameSet(this.marks,r||Ce.none)}copy(e=null){return e==this.content?this:new Cu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Cu(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return z.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new z(c,i.depth-o,s.depth-o)}replace(e,n,r){return rC(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Js.resolveCached(this,e)}resolveNoCache(e){return Js.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ub(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=M.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Ce.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Ce.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=M.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Jr.prototype.text=void 0;class Ia extends Jr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ub(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ia(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ia(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ub(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ni{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new aC(e,n);if(r.next==null)return ni.empty;let i=db(r);r.next&&r.err("Unexpected trailing text");let s=pC(hC(i));return mC(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return M.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ni.empty=new ni(!0);class aC{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function db(t){let e=[];do e.push(lC(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lC(t){let e=[];do e.push(cC(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cC(t){let e=fC(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=uC(t,e);else break;return e}function cp(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function uC(t,e){let n=cp(t),r=n;return t.eat(",")&&(t.next!="}"?r=cp(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function dC(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fC(t){if(t.eat("(")){let e=db(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=dC(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hC(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function fb(t,e){return e-t}function up(t,e){let n=[];return r(e),n.sort(fb);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function pC(t){let e=Object.create(null);return n(up(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);up(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ni(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(fb);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function mC(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hb(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function pb(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function mb(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new gC(t[n]);return e}let dp=class gb{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=mb(r.attrs),this.defaultAttrs=hb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ni.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pb(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jr(this,this.computeAttrs(e),M.from(n),Ce.setFrom(r))}createChecked(e=null,n,r){return n=M.from(n),this.checkContent(n),new Jr(this,this.computeAttrs(e),n,Ce.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=M.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(M.empty,!0);return s?new Jr(this,e,n.append(s),Ce.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ce.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new gb(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class gC{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Hl{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=mb(i.attrs),this.excluded=null;let s=hb(this.attrs);this.instance=s?new Ce(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ce(this,pb(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Hl(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class yC{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=tt.from(e.nodes),n.marks=tt.from(e.marks||{}),this.nodes=dp.compile(this.spec.nodes,this),this.marks=Hl.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=ni.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?fp(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:fp(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof dp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ia(r,r.defaultAttrs,e,Ce.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Jr.fromJSON(this,e)}markFromJSON(e){return Ce.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function fp(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class zi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new pp(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new pp(this,n,!0);return r.addAll(e,n.from,n.to),z.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(wC(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=mp(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=mp(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new zi(e,zi.schemaRules(e)))}}const yb={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bb={ol:!0,ul:!0},Ma=1,Ra=2,Is=4;function hp(t,e,n){return e!=null?(e?Ma:0)|(e==="full"?Ra:0):t&&t.whitespace=="pre"?Ma|Ra:n&~Is}class Fo{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ce.none,this.stashMarks=[],this.match=o||(a&Is?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(M.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ma)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=M.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):SC(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!yb.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class pp{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=hp(null,n.preserveWhitespace,0)|(r?Is:0);i?s=new Fo(i.type,i.attrs,Ce.none,Ce.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Fo(null,null,Ce.none,Ce.none,!0,null,o):s=new Fo(e.schema.topNodeType,null,Ce.none,Ce.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(kC(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Ra||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Ma)r.options&Ra?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;bb.hasOwnProperty(r)&&this.parser.normalizeLists&&vC(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:bC.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(yb.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Ce.none,r=Ce.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=hp(e,i,s.options);s.options&Is&&s.content.length==0&&(o|=Is),this.nodes.push(new Fo(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=EC(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function vC(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&bb.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function wC(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function kC(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function mp(t){let e={};for(let n in t)e[n]=t[n];return e}function SC(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function EC(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class yn{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Tc(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=yn.renderSpec(Tc(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&yn.renderSpec(Tc(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=yn.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=gp(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return gp(e.marks)}}function gp(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Tc(t){return t.document||window.document}const vb=65535,wb=Math.pow(2,16);function _C(t,e){return t+e*wb}function yp(t){return t&vb}function TC(t){return(t-(t&vb))/wb}const kb=1,Sb=2,ia=4,Eb=8;class Ou{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Eb)>0}get deletedBefore(){return(this.delInfo&(kb|ia))>0}get deletedAfter(){return(this.delInfo&(Sb|ia))>0}get deletedAcross(){return(this.delInfo&ia)>0}}class Rt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Rt.empty)return Rt.empty}recover(e){let n=0,r=yp(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+TC(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:_C(a/3,e-l),m=e==l?Sb:e==d?kb:ia;return(n<0?e!=l:e!=d)&&(m|=Eb),new Ou(h,m,p)}i+=u-c}return r?e+i:new Ou(e+i,0,null)}touches(e,n){let r=0,i=yp(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Rt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Rt.empty:new Rt(e<0?[0,-e,0]:[0,0,e])}}Rt.empty=new Rt([]);class Ni{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Ni(this.maps,this.mirror,e,n)}copy(){return new Ni(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ni;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ou(e,i,null)}}const xc=Object.create(null);class ht{getMap(){return Rt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xc)throw new RangeError("Duplicate use of step JSON ID "+e);return xc[e]=n,n.prototype.jsonID=e,n}}class ze{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ze(e,null)}static fail(e){return new ze(null,e)}static fromReplace(e,n,r,i){try{return ze.ok(e.replace(n,r,i))}catch(s){if(s instanceof Ca)return ze.fail(s.message);throw s}}}function qd(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(qd(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return M.fromArray(r)}class cr extends ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new z(qd(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return ze.fromReplace(e,this.from,this.to,s)}invert(){return new bn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cr(n.pos,r.pos,this.mark)}merge(e){return e instanceof cr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cr(n.from,n.to,e.markFromJSON(n.mark))}}ht.jsonID("addMark",cr);class bn extends ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new z(qd(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ze.fromReplace(e,this.from,this.to,r)}invert(){return new cr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new bn(n.pos,r.pos,this.mark)}merge(e){return e instanceof bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new bn(n.from,n.to,e.markFromJSON(n.mark))}}ht.jsonID("removeMark",bn);class ur extends ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ze.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ze.fromReplace(e,this.pos,this.pos+1,new z(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ur(this.pos,n.marks[i]);return new ur(this.pos,this.mark)}}return new Ui(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ur(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ur(n.pos,e.markFromJSON(n.mark))}}ht.jsonID("addNodeMark",ur);class Ui extends ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ze.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ze.fromReplace(e,this.pos,this.pos+1,new z(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ur(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ui(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ui(n.pos,e.markFromJSON(n.mark))}}ht.jsonID("removeNodeMark",Ui);class Ye extends ht{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Au(e,this.from,this.to)?ze.fail("Structure replace would overwrite content"):ze.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Rt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ye(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ye(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ye)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?z.empty:new z(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ye(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?z.empty:new z(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ye(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ye(n.from,n.to,z.fromJSON(e,n.slice),!!n.structure)}}ht.jsonID("replace",Ye);class Xe extends ht{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Au(e,this.from,this.gapFrom)||Au(e,this.gapTo,this.to)))return ze.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ze.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ze.fromReplace(e,this.from,this.to,r):ze.fail("Content does not fit in gap")}getMap(){return new Rt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Xe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Xe(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Xe(n.from,n.to,n.gapFrom,n.gapTo,z.fromJSON(e,n.slice),n.insert,!!n.structure)}}ht.jsonID("replaceAround",Xe);function Au(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function xC(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:i.push(o=new bn(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new cr(f,h,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function CC(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Hl){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new bn(o.from,o.to,o.style)))}function OC(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new Ye(o,c,z.empty));else{r=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new bn(o,c,l.marks[d]));if(l.isText&&!n.spec.code){let d,f=/\r?\n|\r/g,h;for(;d=f.exec(l.text);)h||(h=new z(M.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new Ye(o+d.index,o+d.index+d[0].length,h))}}o=c}if(!r.validEnd){let a=r.fillBefore(M.empty,!0);t.replace(o,o,new z(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function AC(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ss(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!AC(i,s,o))break}return null}function IC(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=M.empty,d=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=M.from(r.node(p).copy(u)),d++):l--;let f=M.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=M.from(i.node(p).copy(f)),h++):c++;t.step(new Xe(l,c,o,a,new z(u.append(f),d,h),u.size-d,!0))}function Gd(t,e,n=null,r=t){let i=MC(t,e),s=i&&RC(r,e);return s?i.map(bp).concat({type:e,attrs:n}).concat(s.map(bp)):null}function bp(t){return{type:t,attrs:null}}function MC(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function RC(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function NC(t,e,n){let r=M.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Xe(i,s,i,s,new z(r,0,0),n.length,!0))}function PC(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&DC(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new Xe(c,u,c+1,u-1,new z(M.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function DC(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function LC(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Xe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new z(M.from(o),0,0),1,!0))}function Pi(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function BC(t,e,n=1,r){let i=t.doc.resolve(e),s=M.empty,o=M.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=M.from(i.node(a).copy(s));let u=r&&r[c];o=M.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Ye(e,e,new z(s.append(o),n,n),!0))}function Tr(t,e){let n=t.resolve(e),r=n.index();return _b(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function _b(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Vl(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&_b(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function $C(t,e,n){let r=new Ye(e-n,e+n,z.empty,!0);t.step(r)}function FC(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Tb(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function jl(t,e,n=e,r=z.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return xb(i,s,r)?new Ye(e,n,r):new HC(i,s,r).fit()}function xb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class HC{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=M.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new z(s,o,a);return e>-1?new Xe(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ye(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Cc(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(M.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Cc(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new z(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Cc(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new z(ms(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new z(ms(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),y=d.matchType(m.type);if(!y)break;c++,(c>1||l==0||m.content.size)&&(d=y,u.push(Cb(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=gs(this.placed,n,M.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<h;m++){let w=y.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),y=w.content}this.unplaced=p?e==0?z.empty:new z(ms(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new z(ms(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Oc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Oc(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Oc(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=gs(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=gs(this.placed,this.depth,M.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(M.empty,!0);n.childCount&&(this.placed=gs(this.placed,this.frontier.length,n))}}function ms(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ms(t.firstChild.content,e-1,n)))}function gs(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(gs(t.lastChild.content,e-1,n)))}function Cc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Cb(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Cb(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),t.copy(r)}function Oc(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!VC(n,s.content,o)?a:null}function VC(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jC(t){return t.spec.defining||t.spec.definingForContent}function zC(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(xb(i,s,r))return t.step(new Ye(e,n,r));let o=Ab(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=jC(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let y=o[(m+l)%o.length],w=!0;y<0&&(w=!1,y=-y);let E=i.node(y-1),x=i.index(y-1);if(E.canReplaceWith(x,x,p.type,p.marks))return t.replace(i.before(y),w?s.after(y):n,new z(Ob(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function Ob(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Ob(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(M.empty,!0))}return t}function UC(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=FC(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new z(M.from(r),0,0))}function WC(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=Ab(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function Ab(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Di extends ht{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ze.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ze.fromReplace(e,this.pos,this.pos+1,new z(M.from(i),0,n.isLeaf?0:1))}getMap(){return Rt.empty}invert(e){return new Di(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Di(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Di(n.pos,n.attr,n.value)}}ht.jsonID("attr",Di);class Ys extends ht{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ze.ok(r)}getMap(){return Rt.empty}invert(e){return new Ys(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ys(n.attr,n.value)}}ht.jsonID("docAttr",Ys);let Wi=class extends Error{};Wi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Wi.prototype=Object.create(Error.prototype);Wi.prototype.constructor=Wi;Wi.prototype.name="TransformError";class Ib{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ni}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Wi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=z.empty){let i=jl(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new z(M.from(r),0,0))}delete(e,n){return this.replace(e,n,z.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return zC(this,e,n,r),this}replaceRangeWith(e,n,r){return UC(this,e,n,r),this}deleteRange(e,n){return WC(this,e,n),this}lift(e,n){return IC(this,e,n),this}join(e,n=1){return $C(this,e,n),this}wrap(e,n){return NC(this,e,n),this}setBlockType(e,n=e,r,i=null){return PC(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return LC(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Di(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ys(e,n)),this}addNodeMark(e,n){return this.step(new ur(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Ce)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Ui(e,n)),this}split(e,n=1,r){return BC(this,e,n,r),this}addMark(e,n,r){return xC(this,e,n,r),this}removeMark(e,n,r){return CC(this,e,n,r),this}clearIncompatible(e,n,r){return OC(this,e,n,r),this}}const Ac=Object.create(null);class me{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new KC(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=z.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?z.empty:n),a==0&&kp(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),kp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new oe(e):bi(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?bi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):bi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new nn(e.node(0))}static atStart(e){return bi(e,e,0,0,1)||new nn(e)}static atEnd(e){return bi(e,e,e.content.size,e.childCount,-1)||new nn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ac[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ac)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ac[e]=n,n.prototype.jsonID=e,n}getBookmark(){return oe.between(this.$anchor,this.$head).getBookmark()}}me.prototype.visible=!0;class KC{constructor(e,n){this.$from=e,this.$to=n}}let vp=!1;function wp(t){!vp&&!t.parent.inlineContent&&(vp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class oe extends me{constructor(e,n=e){wp(e),wp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return me.near(r);let i=e.resolve(n.map(this.anchor));return new oe(i.parent.inlineContent?i:r,r)}replace(e,n=z.empty){if(super.replace(e,n),n==z.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof oe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new zl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new oe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=me.findFrom(n,r,!0)||me.findFrom(n,-r,!0);if(s)n=s.$head;else return me.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(me.findFrom(e,-r,!0)||me.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new oe(e,n)}}me.jsonID("text",oe);class zl{constructor(e,n){this.anchor=e,this.head=n}map(e){return new zl(e.map(this.anchor),e.map(this.head))}resolve(e){return oe.between(e.resolve(this.anchor),e.resolve(this.head))}}class te extends me{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?me.near(s):new te(s)}content(){return new z(M.from(this.node),0,0)}eq(e){return e instanceof te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Jd(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new te(e.resolve(n.anchor))}static create(e,n){return new te(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}te.prototype.visible=!1;me.jsonID("node",te);class Jd{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new zl(r,r):new Jd(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&te.isSelectable(r)?new te(n):me.near(n)}}class nn extends me{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=z.empty){if(n==z.empty){e.delete(0,e.doc.content.size);let r=me.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new nn(e)}map(e){return new nn(e)}eq(e){return e instanceof nn}getBookmark(){return qC}}me.jsonID("all",nn);const qC={map(){return this},resolve(t){return new nn(t)}};function bi(t,e,n,r,i,s=!1){if(e.inlineContent)return oe.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&te.isSelectable(a))return te.create(t,n-(i<0?a.nodeSize:0))}else{let l=bi(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function kp(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ye||i instanceof Xe))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(me.near(t.doc.resolve(o),n))}const Sp=1,Ho=2,Ep=4;class GC extends Ib{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Sp)&~Ho,this.storedMarks=null,this}get selectionSet(){return(this.updated&Sp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ho,this}ensureMarks(e){return Ce.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ho)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ho,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ce.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(me.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ep,this}get scrolledIntoView(){return(this.updated&Ep)>0}}function _p(t,e){return!e||!t?t:t.bind(e)}class ys{constructor(e,n,r){this.name=e,this.init=_p(n.init,r),this.apply=_p(n.apply,r)}}const JC=[new ys("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ys("selection",{init(t,e){return t.selection||me.atStart(e.doc)},apply(t){return t.selection}}),new ys("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ys("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ic{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=JC.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ys(r.key,r.spec.state,r))})}}class Si{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Si(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new GC(this)}static create(e){let n=new Ic(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Si(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Ic(this.schema,e.plugins),r=n.fields,i=new Si(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ic(e.schema,e.plugins),s=new Si(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Jr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=me.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Mb(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Mb(i,e,{})),n[r]=i}return n}class at{constructor(e){this.spec=e,this.props={},e.props&&Mb(e.props,this,this.props),this.key=e.key?e.key.key:Rb("plugin")}getState(e){return e[this.key]}}const Mc=Object.create(null);function Rb(t){return t in Mc?t+"$"+ ++Mc[t]:(Mc[t]=0,t+"$")}class Lt{constructor(e="key"){this.key=Rb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Xs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Iu=null;const Mn=function(t,e,n){let r=Iu||(Iu=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},YC=function(){Iu=null},ri=function(t,e,n,r){return n&&(Tp(t,e,n,r,-1)||Tp(t,e,n,r,1))},XC=/^(img|br|input|textarea|hr)$/i;function Tp(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:gn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||ko(t)||XC.test(t.nodeName)||t.contentEditable=="false")return!1;e=nt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?gn(t):0}else return!1}}function gn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function QC(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=gn(t)}else if(t.parentNode&&!ko(t))e=nt(t),t=t.parentNode;else return null}}function ZC(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ko(t))e=nt(t)+1,t=t.parentNode;else return null}}function eO(t,e,n){for(let r=e==0,i=e==gn(t);r||i;){if(t==n)return!0;let s=nt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==gn(t)}}function ko(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ul=function(t){return t.focusNode&&ri(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Lr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function tO(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function nO(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const En=typeof navigator<"u"?navigator:null,xp=typeof document<"u"?document:null,xr=En&&En.userAgent||"",Mu=/Edge\/(\d+)/.exec(xr),Nb=/MSIE \d/.exec(xr),Ru=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xr),Tt=!!(Nb||Ru||Mu),gr=Nb?document.documentMode:Ru?+Ru[1]:Mu?+Mu[1]:0,sn=!Tt&&/gecko\/(\d+)/i.test(xr);sn&&+(/Firefox\/(\d+)/.exec(xr)||[0,0])[1];const Nu=!Tt&&/Chrome\/(\d+)/.exec(xr),yt=!!Nu,rO=Nu?+Nu[1]:0,bt=!Tt&&!!En&&/Apple Computer/.test(En.vendor),Ki=bt&&(/Mobile\/\w+/.test(xr)||!!En&&En.maxTouchPoints>2),Ht=Ki||(En?/Mac/.test(En.platform):!1),iO=En?/Win/.test(En.platform):!1,Jt=/Android \d/.test(xr),So=!!xp&&"webkitFontSmoothing"in xp.documentElement.style,sO=So?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function oO(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function An(t,e){return typeof t=="number"?t:t[e]}function aO(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Cp(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Xs(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?oO(s):aO(a),u=0,d=0;if(e.top<c.top+An(r,"top")?d=-(c.top-e.top+An(i,"top")):e.bottom>c.bottom-An(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+An(i,"top")-c.top:e.bottom-c.bottom+An(i,"bottom")),e.left<c.left+An(r,"left")?u=-(c.left-e.left+An(i,"left")):e.right>c.right-An(r,"right")&&(u=e.right-c.right+An(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function lO(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Pb(t.dom)}}function Pb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Xs(r));return e}function cO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Db(n,r==0?0:r-e)}function Db(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let pi=null;function uO(t){if(t.setActive)return t.setActive();if(pi)return t.focus(pi);let e=Pb(t);t.focus(pi==null?{get preventScroll(){return pi={preventScroll:!0},!0}}:void 0),pi||(pi=!1,Db(e,0))}function Lb(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Mn(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?dO(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Lb(n,i)}function dO(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Jn(r,1);if(s.top!=s.bottom&&Yd(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Yd(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function fO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function hO(t,e,n){let{node:r,offset:i}=Lb(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function pO(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Bb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Yd(e,c))return Bb(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function mO(t,e){let n=t.dom.ownerDocument,r,i=0,s=nO(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Yd(e,c)||(o=Bb(t.dom,e,c),!o))return null}if(bt)for(let c=o;r&&c;c=Xs(c))c.draggable&&(r=void 0);if(o=fO(o,e),r){if(sn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;So&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=pO(t,r,i,e))}a==null&&(a=hO(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Op(t){return t.top<t.bottom||t.left<t.right}function Jn(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Op(r))return r}return Array.prototype.find.call(n,Op)||t.getBoundingClientRect()}const gO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $b(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=So||sn;if(r.nodeType==3)if(o&&(gO.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Jn(Mn(r,i,i),n);if(sn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Jn(Mn(r,i-1,i-1),-1);if(c.top==l.top){let u=Jn(Mn(r,i,i+1),-1);if(u.top!=l.top)return ds(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,ds(Jn(Mn(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==gn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Rc(l.getBoundingClientRect(),!1)}if(s==null&&i<gn(r)){let l=r.childNodes[i];if(l.nodeType==1)return Rc(l.getBoundingClientRect(),!0)}return Rc(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==gn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Mn(l,gn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ds(Jn(c,1),!1)}if(s==null&&i<gn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Mn(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return ds(Jn(c,-1),!0)}return ds(Jn(r.nodeType==3?Mn(r):r,-n),n>=0)}function ds(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Rc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Fb(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function yO(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Fb(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=$b(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Mn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const bO=/[\u0590-\u08ac]/;function vO(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!bO.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:Fb(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),y})}let Ap=null,Ip=null,Mp=!1;function wO(t,e,n){return Ap==e&&Ip==n?Mp:(Ap=e,Ip=n,Mp=n=="up"||n=="down"?yO(t,e,n):vO(t,e,n))}const Ut=0,Rp=1,Hr=2,_n=3;class Eo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ut,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof Vb){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Hb&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?nt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?nt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=nt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=nt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,n-h-p.border,r,i);h=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((sn||bt)&&e==n){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:nt(m)+1});break}let y=p.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(sn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&bt)&&ri(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ri(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Hr:Rp,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=_n:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Hr:_n}r=o}this.dirty=Hr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Hr:Rp;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Hb extends Eo{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ut&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class kO extends Eo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ii extends Eo{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=yn.renderSpec(document,n.type.spec.toDOM(n,r))),new ii(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&_n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_n&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ut){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ut}}slice(e,n,r){let i=ii.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Lu(s,n,o,r)),e>0&&(s=Lu(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class yr extends Eo{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=yn.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Ub(u,r,n),c?l=new SO(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new Wl(e,n,r,i,u,f,s):new yr(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,n,r){return this.dirty==Ut&&e.eq(this.node)&&Du(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new _O(this,o&&o.node,e);CO(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ce.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Hr)&&(o&&this.protectLocalComposition(e,o),jb(this.contentDOM,this.children,e),Ki&&OO(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof oe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=AO(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new kO(this,s,n,i);e.input.compositionNodes.push(o),this.children=Lu(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==_n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ut}updateOuterDeco(e){if(Du(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=zb(this.dom,this.nodeDOM,Pu(this.outerDeco,this.node,n),Pu(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Np(t,e,n,r,i){Ub(r,e,t);let s=new yr(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Wl extends yr{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==_n||this.dirty!=Ut&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ut||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ut,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Wl(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=_n)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vb extends Eo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ut&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class SO extends yr{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==_n)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function jb(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Pp(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ii){let l=r?r.previousSibling:t.lastChild;jb(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Pp(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ms=function(t){t&&(this.nodeName=t)};Ms.prototype=Object.create(null);const Vr=[new Ms];function Pu(t,e,n){if(t.length==0)return Vr;let r=n?Vr[0]:new Ms,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Ms(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Ms(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function zb(t,e,n,r){if(n==Vr&&r==Vr)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Vr[0]),i=l}EO(i,a||Vr[0],o)}return i}function EO(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Ub(t,e,n){return zb(t,t,Vr,Pu(e,n,t.nodeType!=1))}function Du(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Pp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class _O{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=TO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ut,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ii.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==_n&&o.dom==o.contentDOM&&(o.dirty=Hr),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof yr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=_n&&Du(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Hr,d.updateChildren(i,o+1),d.dirty=Ut),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=yr.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=yr.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Hb(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ii;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Wl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((bt||yt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Vb(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function TO(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ii)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function xO(t,e){return t.type.side-e.type.side}function CO(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(xO);for(let y=0;y<d.length;y++)n(d[y],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let y=p;o<i.length&&i[o].from<y&&(y=i[o].from);for(let w=0;w<a.length;w++)a[w].to<y&&(y=a[w].to);y<p&&(l=f.cut(y-s),f=f.cut(0,y-s),p=y,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();r(f,m,e.forChild(s,f),h),s=p}}function OO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function AO(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Lu(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Xd(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Ul(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&te.isSelectable(u)&&i.parent&&!(u.isInline&&eO(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new te(o==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Qd(t,l,a,u)}return c}function Wb(t){return t.editable?t.hasFocus():qb(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hn(t,e=!1){let n=t.state.selection;if(Kb(t,n),!!Wb(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&yt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ri(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)MO(t);else{let{anchor:r,head:i}=n,s,o;Dp&&!(n instanceof oe)&&(n.$from.parent.inlineContent||(s=Lp(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Lp(t,n.to))),t.docView.setSelection(r,i,t.root,e),Dp&&(s&&Bp(s),o&&Bp(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&IO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Dp=bt||yt&&rO<63;function Lp(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(bt&&i&&i.contentEditable=="false")return Nc(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Nc(i);if(s)return Nc(s)}}function Nc(t){return t.contentEditable="true",bt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Bp(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function IO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Wb(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function MO(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,nt(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Tt&&gr<=11&&(r.disabled=!0,r.disabled=!1)}function Kb(t,e){if(e instanceof te){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&($p(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else $p(t)}function $p(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Qd(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||oe.between(e,n,r)}function Fp(t){return t.editable&&!t.hasFocus()?!1:qb(t)}function qb(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function RO(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ri(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Bu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&me.findFrom(s,e)}function tr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Hp(t,e,n){let r=t.state.selection;if(r instanceof oe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return tr(t,new oe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Bu(t.state,e);return i&&i instanceof te?tr(t,i):!1}else if(!(Ht&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?te.isSelectable(s)?tr(t,new te(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):So?tr(t,new oe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof te&&r.node.isInline)return tr(t,new oe(e>0?r.$to:r.$from));{let i=Bu(t.state,e);return i?tr(t,i):!1}}}function Na(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Rs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function mi(t,e){return e<0?NO(t):PO(t)}function NO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(sn&&n.nodeType==1&&r<Na(n)&&Rs(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Rs(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(Gb(n))break;{let a=n.previousSibling;for(;a&&Rs(a,-1);)i=n.parentNode,s=nt(a),a=a.previousSibling;if(a)n=a,r=Na(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?$u(t,n,r):i&&$u(t,i,s)}function PO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Na(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Rs(a,1))s=n,o=++r;else break}else{if(Gb(n))break;{let a=n.nextSibling;for(;a&&Rs(a,1);)s=a.parentNode,o=nt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Na(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&$u(t,s,o)}function Gb(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function DO(t,e){for(;t&&e==t.childNodes.length&&!ko(t);)e=nt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function LO(t,e){for(;t&&!e&&!ko(t);)e=nt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function $u(t,e,n){if(e.nodeType!=3){let s,o;(o=DO(e,n))?(e=o,n=0):(s=LO(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(Ul(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Hn(t)},50)}function Vp(t,e){let n=t.state.doc.resolve(e);if(!(yt||iO)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function jp(t,e,n){let r=t.state.selection;if(r instanceof oe&&!r.empty||n.indexOf("s")>-1||Ht&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Bu(t.state,e);if(o&&o instanceof te)return tr(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof nn?me.near(o,e):me.findFrom(o,e);return a?tr(t,a):!1}return!1}function zp(t,e){if(!(t.state.selection instanceof oe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Up(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function BO(t){if(!bt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Up(t,r,"true"),setTimeout(()=>Up(t,r,"false"),20)}return!1}function $O(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function FO(t,e){let n=e.keyCode,r=$O(e);if(n==8||Ht&&n==72&&r=="c")return zp(t,-1)||mi(t,-1);if(n==46&&!e.shiftKey||Ht&&n==68&&r=="c")return zp(t,1)||mi(t,1);if(n==13||n==27)return!0;if(n==37||Ht&&n==66&&r=="c"){let i=n==37?Vp(t,t.state.selection.from)=="ltr"?-1:1:-1;return Hp(t,i,r)||mi(t,i)}else if(n==39||Ht&&n==70&&r=="c"){let i=n==39?Vp(t,t.state.selection.from)=="ltr"?1:-1:1;return Hp(t,i,r)||mi(t,i)}else{if(n==38||Ht&&n==80&&r=="c")return jp(t,-1,r)||mi(t,-1);if(n==40||Ht&&n==78&&r=="c")return BO(t)||jp(t,1,r)||mi(t,1);if(r==(Ht?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Jb(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||yn.fromSchema(t.state.schema),a=tv(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=ev[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function Yb(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new z(M.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):z.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,p=yn.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=jO(n),So&&zO(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||zi.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!HO.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=UO(Wp(a,+u[1],+u[2]),u[4]);else if(a=z.maxOpen(VO(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Wp(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const HO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function VO(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Qb(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Zb(o[o.length-1],s.length));let u=Xb(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return M.from(o)}return t}function Xb(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,M.from(t));return t}function Qb(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Qb(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(M.from(Xb(n,t,i+1))))}}function Zb(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Zb(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(M.empty,!0);return t.copy(n.append(r))}function Fu(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=Fu(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(M.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Wp(t,e,n){return e<t.openStart&&(t=new z(Fu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new z(Fu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const ev={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Kp=null;function tv(){return Kp||(Kp=document.implementation.createHTMLDocument("title"))}function jO(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&ev[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function zO(t){let e=t.querySelectorAll(yt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function UO(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=M.from(l.create(r[a+1],i)),s++,o++}return new z(i,s,o)}const vt={},wt={},WO={touchstart:!0,touchmove:!0};class KO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function qO(t){for(let e in vt){let n=vt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{JO(t,r)&&!Zd(t,r)&&(t.editable||!(r.type in wt))&&n(t,r)},WO[e]?{passive:!0}:void 0)}bt&&t.dom.addEventListener("input",()=>null),Hu(t)}function dr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function GO(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Hu(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Zd(t,r))})}function Zd(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function JO(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function YO(t,e){!Zd(t,e)&&vt[e.type]&&(t.editable||!(e.type in wt))&&vt[e.type](t,e)}wt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!rv(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Jt&&yt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ki&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Lr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||FO(t,n)?n.preventDefault():dr(t,"key")};wt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};wt.keypress=(t,e)=>{let n=e;if(rv(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ht&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof oe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Kl(t){return{left:t.clientX,top:t.clientY}}function XO(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ef(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Li(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function QO(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&te.isSelectable(r)?(Li(t,new te(n),"pointer"),!0):!1}function ZO(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof te&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(te.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Li(t,te.create(t.state.doc,i),"pointer"),!0):!1}function eA(t,e,n,r,i){return ef(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?ZO(t,n):QO(t,n))}function tA(t,e,n,r){return ef(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function nA(t,e,n,r){return ef(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||rA(t,n,r)}function rA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Li(t,oe.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Li(t,oe.create(r,a+1,a+1+o.content.size),"pointer");else if(te.isSelectable(o))Li(t,te.create(r,a),"pointer");else continue;return!0}}function tf(t){return Pa(t)}const nv=Ht?"metaKey":"ctrlKey";vt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=tf(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&XO(n,t.input.lastClick)&&!n[nv]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Kl(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new iA(t,o,n,!!r)):(s=="doubleClick"?tA:nA)(t,o.pos,o.inside,n)?n.preventDefault():dr(t,"pointer"))};class iA{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[nv],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof te&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&sn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),dr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Kl(e))),this.updateAllowDefault(e),this.allowDefault||!n?dr(this.view,"pointer"):eA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||bt&&this.mightDrag&&!this.mightDrag.node.isAtom||yt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Li(this.view,me.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):dr(this.view,"pointer")}move(e){this.updateAllowDefault(e),dr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}vt.touchstart=t=>{t.input.lastTouch=Date.now(),tf(t),dr(t,"pointer")};vt.touchmove=t=>{t.input.lastTouch=Date.now(),dr(t,"pointer")};vt.contextmenu=t=>tf(t);function rv(t,e){return t.composing?!0:bt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const sA=Jt?5e3:-1;wt.compositionstart=wt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Pa(t,!0),t.markCursor=null;else if(Pa(t),sn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}iv(t,sA)};wt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,iv(t,20))};function iv(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Pa(t),e))}function sv(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=aA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function oA(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=QC(e.focusNode,e.focusOffset),r=ZC(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function aA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Pa(t,e=!1){if(!(Jt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),sv(t),e||t.docView&&t.docView.dirty){let n=Xd(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function lA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Qs=Tt&&gr<15||Ki&&sO<604;vt.copy=wt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Qs?null:n.clipboardData,o=r.content(),{dom:a,text:l}=Jb(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):lA(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function uA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Zs(t,r.value,null,i,e):Zs(t,r.textContent,r.innerHTML,i,e)},50)}function Zs(t,e,n,r,i){let s=Yb(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||z.empty)))return!0;if(!s)return!1;let o=cA(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ov(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}wt.paste=(t,e)=>{let n=e;if(t.composing&&!Jt)return;let r=Qs?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Zs(t,ov(r),r.getData("text/html"),i,n)?n.preventDefault():uA(t,n)};class av{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const lv=Ht?"altKey":"ctrlKey";vt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Kl(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof te?i.to-1:i.to))){if(r&&r.mightDrag)o=te.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=te.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=Jb(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Qs?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Qs||n.dataTransfer.setData("text/plain",c),t.dragging=new av(a,!n[lv],o)};vt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};wt.dragover=wt.dragenter=(t,e)=>e.preventDefault();wt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Kl(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=Yb(t,ov(n.dataTransfer),Qs?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[lv]);if(t.someProp("handleDrop",p=>p(t,n,o||z.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?Tb(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&te.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new te(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,y,w,E)=>p=E),c.setSelection(Qd(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};vt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hn(t)},20))};vt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};vt.beforeinput=(t,e)=>{if(yt&&Jt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Lr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in wt)vt[t]=wt[t];function eo(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Da{constructor(e,n){this.toDOM=e,this.spec=n||Yr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new zt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Da&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&eo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class br{constructor(e,n){this.attrs=e,this.spec=n||Yr}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new zt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof br&&eo(this.attrs,e.attrs)&&eo(this.spec,e.spec)}static is(e){return e.type instanceof br}destroy(){}}class nf{constructor(e,n){this.attrs=e,this.spec=n||Yr}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new zt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof nf&&eo(this.attrs,e.attrs)&&eo(this.spec,e.spec)}destroy(){}}class zt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new zt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new zt(e,e,new Da(n,r))}static inline(e,n,r,i){return new zt(e,n,new br(r,i))}static node(e,n,r,i){return new zt(e,n,new nf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof br}get widget(){return this.type instanceof Da}}const vi=[],Yr={};class Ke{constructor(e,n){this.local=e.length?e:vi,this.children=n.length?n:vi}static create(e,n){return n.length?La(n,e,0,Yr):ut}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==ut||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Yr)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?dA(this.children,o||[],e,n,r,i,s):o?new Ke(o.sort(Xr),vi):ut}add(e,n){return n.length?this==ut?Ke.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=uv(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,La(u,a,c+1,Yr)),s+=3}});let o=cv(s?dv(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ke(o.length?this.local.concat(o).sort(Xr):this.local,i||this.children)}remove(e){return e.length==0||this==ut?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=ut?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ke(i,r):ut}forChild(e,n){if(this==ut)return this;if(n.isLeaf)return Ke.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof br){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Ke(i.sort(Xr),vi);return r?new ar([a,r]):a}return r||ut}eq(e){if(this==e)return!0;if(!(e instanceof Ke)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return rf(this.localsInner(e))}localsInner(e){if(this==ut)return vi;if(e.inlineContent||!this.local.some(br.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof br||n.push(this.local[r]);return n}}Ke.empty=new Ke([],[]);Ke.removeOverlap=rf;const ut=Ke.empty;class ar{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Yr));return ar.from(r)}forChild(e,n){if(n.isLeaf)return Ke.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=ut&&(s instanceof ar?r=r.concat(s.members):r.push(s))}return ar.from(r)}eq(e){if(!(e instanceof ar)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?rf(r?n:n.sort(Xr)):vi}static from(e){switch(e.length){case 0:return ut;case 1:return e[0];default:return new ar(e.every(n=>n instanceof Ke)?e:e.reduce((n,r)=>n.concat(r instanceof Ke?r:r.members),[]))}}}function dA(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let y=m-p-(h-f);for(let w=0;w<a.length;w+=3){let E=a[w+1];if(E<0||f>E+u-d)continue;let x=a[w]+u-d;h>=x?a[w+1]=f<=x?-2:-1:f>=u&&y&&(a[w]+=y,a[w+1]+=y)}d+=y}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),y=r.maybeChild(p);if(y&&m==d&&m+y.nodeSize==h){let w=a[c+2].mapInner(n,y,u+1,t[c]+s+1,o);w!=ut?(a[c]=d,a[c+1]=h,a[c+2]=w):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=fA(a,t,e,n,i,s,o),u=La(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ke(e.sort(Xr),a)}function cv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new zt(i.from+e,i.to+e,i.type))}return n}function fA(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function uv(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function dv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function La(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=uv(t,a,l+n);if(c){s=!0;let u=La(c,a,n+l+1,r);u!=ut&&i.push(l,l+a.nodeSize,u)}});let o=cv(s?dv(t):t,-n).sort(Xr);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ke(o,i):ut}function Xr(t,e){return t.from-e.from||t.to-e.to}function rf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),qp(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),qp(e,i,r.copy(s.from,r.to)));break}}}return e}function qp(t,e,n){for(;e<t.length&&Xr(n,t[e])>0;)e++;t.splice(e,0,n)}function Pc(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ut&&e.push(r)}),t.cursorWrapper&&e.push(Ke.create(t.state.doc,[t.cursorWrapper.deco])),ar.from(e)}const hA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},pA=Tt&&gr<=11;class mA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gA{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Tt&&gr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),pA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Fp(this.view)){if(this.suppressingSelectionUpdates)return Hn(this.view);if(Tt&&gr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ri(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Xs(s))n.add(s);for(let s=e.anchorNode;s;s=Xs(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Fp(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(sn&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ul(r)&&(c=Xd(e))&&c.eq(me.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),yA(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Tt&&gr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?nt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?nt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Gp=new WeakMap,Jp=!1;function yA(t){if(!Gp.has(t)&&(Gp.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=sn,Jp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Jp=!0}}function bA(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return ri(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function vA(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Ul(l)||c.push({node:l.focusNode,offset:l.focusOffset})),yt&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let w=r.childNodes[y-1],E=w.pmViewDesc;if(w.nodeName=="BR"&&!E){s=y;break}if(!E||E.size)break}let d=t.state.doc,f=t.someProp("domParser")||zi.fromSchema(t.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:wA,context:h});if(c&&c[0].pos!=null){let y=c[0].pos,w=c[1]&&c[1].pos;w==null&&(w=y),p={anchor:y+o,head:w+o}}return{doc:m,sel:p,from:o,to:a}}function wA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(bt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||bt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function SA(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let j=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ne=Xd(t,j);if(ne&&!t.state.selection.eq(ne)){if(yt&&Jt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ve=>ve(t,Lr(13,"Enter"))))return;let ae=t.state.tr.setSelection(ne);j=="pointer"?ae.setMeta("pointer",!0):j=="key"&&ae.scrollIntoView(),s&&ae.setMeta("composition",s),t.dispatch(ae)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=vA(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=TA(d.content,c.doc.content,c.from,f,h);if((Ki&&t.input.lastIOSEnter>Date.now()-225||Jt)&&i.some(j=>j.nodeType==1&&!kA.test(j.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",j=>j(t,Lr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof oe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let j=Yp(t,t.state.doc,c.sel);if(j&&!j.eq(t.state.selection)){let ne=t.state.tr.setSelection(j);s&&ne.setMeta("composition",s),t.dispatch(ne)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof oe&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Tt&&gr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),w=u.resolve(p.start),E=m.sameParent(y)&&m.parent.inlineContent&&w.end()>=p.endA,x;if((Ki&&t.input.lastIOSEnter>Date.now()-225&&(!E||i.some(j=>j.nodeName=="DIV"||j.nodeName=="P"))||!E&&m.pos<c.doc.content.size&&!m.sameParent(y)&&(x=me.findFrom(c.doc.resolve(m.pos+1),1,!0))&&x.head==y.pos)&&t.someProp("handleKeyDown",j=>j(t,Lr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&_A(u,p.start,p.endA,m,y)&&t.someProp("handleKeyDown",j=>j(t,Lr(8,"Backspace")))){Jt&&yt&&t.domObserver.suppressSelectionUpdates();return}yt&&Jt&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Jt&&!E&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(j){return j(t,Lr(13,"Enter"))})},20));let b=p.start,N=p.endA,k,L,Y;if(E){if(m.pos==y.pos)Tt&&gr<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hn(t),20)),k=t.state.tr.delete(b,N),L=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(Y=EA(m.parent.content.cut(m.parentOffset,y.parentOffset),w.parent.content.cut(w.parentOffset,p.endA-w.start()))))k=t.state.tr,Y.type=="add"?k.addMark(b,N,Y.mark):k.removeMark(b,N,Y.mark);else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let j=m.parent.textBetween(m.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",ne=>ne(t,b,N,j)))return;k=t.state.tr.insertText(j,b,N)}}if(k||(k=t.state.tr.replace(b,N,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let j=Yp(t,k.doc,c.sel);j&&!(yt&&Jt&&t.composing&&j.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(j.head==b||j.head==k.mapping.map(N)-1)||Tt&&j.empty&&j.head==b)&&k.setSelection(j)}L&&k.ensureMarks(L),s&&k.setMeta("composition",s),t.dispatch(k.scrollIntoView())}function Yp(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Qd(t,e.resolve(n.anchor),e.resolve(n.head))}function EA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(M.from(c).eq(t))return{mark:a,type:o}}function _A(t,e,n,r,i){if(n-e<=i.pos-r.pos||Dc(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Dc(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Dc(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Dc(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function TA(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&Xp(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Xp(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Xp(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class xA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new KO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(nm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=em(this),Zp(this),this.nodeViews=tm(this),this.docView=Np(this.state.doc,Qp(this),Pc(this),this.dom,this),this.domObserver=new gA(this,(r,i,s,o)=>SA(this,r,i,s,o)),this.domObserver.start(),qO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hu(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(nm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(sv(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=tm(this);OA(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Hu(this),this.editable=em(this),Zp(this);let l=Pc(this),c=Qp(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&lO(this);if(o){this.domObserver.stop();let h=d&&(Tt||yt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&CA(i.selection,e.selection);if(d){let p=yt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oA(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Np(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&RO(this))?Hn(this,h):(Kb(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&cO(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof te){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Cp(this,n.getBoundingClientRect(),e)}else Cp(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new av(e.slice,e.move,i<0?void 0:te.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Tt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&uO(this.dom),Hn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return mO(this,e)}coordsAtPos(e,n=1){return $b(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return wO(this,n||this.state,e)}pasteHTML(e,n){return Zs(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Zs(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(GO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,YC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return YO(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return bt&&this.root.nodeType===11&&tO(this.dom.ownerDocument)==this.dom?bA(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Qp(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[zt.node(0,t.state.doc.content.size,e)]}function Zp(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:zt.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function em(t){return!t.someProp("editable",e=>e(t.state)===!1)}function CA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function tm(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function OA(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function nm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Sr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ba={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AA=typeof navigator<"u"&&/Mac/.test(navigator.platform),IA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rt=0;rt<10;rt++)Sr[48+rt]=Sr[96+rt]=String(rt);for(var rt=1;rt<=24;rt++)Sr[rt+111]="F"+rt;for(var rt=65;rt<=90;rt++)Sr[rt]=String.fromCharCode(rt+32),Ba[rt]=String.fromCharCode(rt);for(var Lc in Sr)Ba.hasOwnProperty(Lc)||(Ba[Lc]=Sr[Lc]);function MA(t){var e=AA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||IA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ba:Sr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const RA=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function NA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))RA?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function PA(t){let e=Object.create(null);for(let n in t)e[NA(n)]=t[n];return e}function Bc(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function DA(t){return new at({props:{handleKeyDown:fv(t)}})}function fv(t){let e=PA(t);return function(n,r){let i=MA(r),s,o=e[Bc(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Bc(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Sr[r.keyCode])&&s!=i){let a=e[Bc(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const LA=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function hv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const BA=(t,e,n)=>{let r=hv(t,n);if(!r)return!1;let i=sf(r);if(!i){let o=r.blockRange(),a=o&&ss(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&yv(t,i,e))return!0;if(r.parent.content.size==0&&(qi(s,"end")||te.isSelectable(s))){let o=jl(t.doc,r.before(),r.after(),z.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(qi(s,"end")?me.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):te.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},$A=(t,e,n)=>{let r=hv(t,n);if(!r)return!1;let i=sf(r);return i?pv(t,i,e):!1},FA=(t,e,n)=>{let r=mv(t,n);if(!r)return!1;let i=of(r);return i?pv(t,i,e):!1};function pv(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=jl(t.doc,s,l,z.empty);if(!c||c.from!=s||c instanceof Ye&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(oe.create(u.doc,s)),n(u.scrollIntoView())}return!0}function qi(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const HA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=sf(r)}let o=s&&s.nodeBefore;return!o||!te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(te.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function sf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function mv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const VA=(t,e,n)=>{let r=mv(t,n);if(!r)return!1;let i=of(r);if(!i)return!1;let s=i.nodeAfter;if(yv(t,i,e))return!0;if(r.parent.content.size==0&&(qi(s,"start")||te.isSelectable(s))){let o=jl(t.doc,r.before(),r.after(),z.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(qi(s,"start")?me.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):te.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},jA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=of(r)}let o=s&&s.nodeAfter;return!o||!te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(te.create(t.doc,s.pos)).scrollIntoView()),!0)};function of(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const zA=(t,e)=>{let n=t.selection,r=n instanceof te,i;if(r){if(n.node.isTextblock||!Tr(t.doc,n.from))return!1;i=n.from}else if(i=Vl(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(te.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},UA=(t,e)=>{let n=t.selection,r;if(n instanceof te){if(n.node.isTextblock||!Tr(t.doc,n.to))return!1;r=n.to}else if(r=Vl(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},WA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&ss(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},KA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function gv(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const qA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=gv(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(me.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},GA=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof nn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=gv(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(oe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},JA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Pi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ss(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},YA=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(te.create(t.doc,i))),!0)};function XA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Tr(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function yv(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(XA(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let d=e.pos+i.nodeSize,f=M.empty;for(let m=s.length-1;m>=0;m--)f=M.from(s[m].create(null,f));f=M.from(r.copy(f));let h=t.tr.step(new Xe(e.pos-1,d,e.pos,d,new z(f,1,0),s.length,!0)),p=d+2*s.length;Tr(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=me.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&ss(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&qi(i,"start",!0)&&qi(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let m=M.empty;for(let w=f.length-1;w>=0;w--)m=M.from(f[w].copy(m));let y=t.tr.step(new Xe(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new z(m,f.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function bv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(oe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const QA=bv(-1),ZA=bv(1);function eI(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Gd(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function rm(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function tI(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new Aa(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Aa(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=Gd(l,t,e,o);return c?(r&&r(nI(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function nI(t,e,n,r,i){let s=M.empty;for(let u=n.length-1;u>=0;u--)s=M.from(n[u].type.create(n[u].attrs,s));t.step(new Xe(e.start-(r?2:0),e.end,e.start,e.end,new z(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Pi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function rI(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?iI(e,n,t,s):sI(e,n,s):!0:!1}}function iI(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Xe(s-1,o,s,o,new z(M.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Aa(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=ss(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Tr(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function sI(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?M.empty:M.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new Xe(d-(a?1:0),f+(l?1:0),d+1,f-1,new z((a?M.empty:M.from(i.copy(M.empty))).append(l?M.empty:M.from(i.copy(M.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function oI(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=M.from(c?t.create():null),d=new z(M.from(t.create(null,M.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Xe(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function ql(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Gl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const y=this.buildProps(c,n),w=h(...m)(y);return a.push(w),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:ql({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class aI{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function K(t,e,n){return t.config[e]===void 0&&t.parent?K(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?K(t.parent,e,n):null}):t.config[e]}function Jl(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function vv(t){const e=[],{nodeExtensions:n,markExtensions:r}=Jl(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=K(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=K(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function Ze(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function De(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Vu(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>De(n,r),{})}function wv(t){return typeof t=="function"}function ue(t,e=void 0,...n){return wv(t)?e?t.bind(e)(...n):t(...n):t}function lI(t={}){return Object.keys(t).length===0&&t.constructor===Object}function cI(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function im(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):cI(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function sm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&lI(n)?!1:n!=null))}function uI(t,e){var n;const r=vv(t),{nodeExtensions:i,markExtensions:s}=Jl(t),o=(n=i.find(c=>K(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(w=>w.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((w,E)=>{const x=K(E,"extendNodeSchema",d);return{...w,...x?x(c):{}}},{}),h=sm({...f,content:ue(K(c,"content",d)),marks:ue(K(c,"marks",d)),group:ue(K(c,"group",d)),inline:ue(K(c,"inline",d)),atom:ue(K(c,"atom",d)),selectable:ue(K(c,"selectable",d)),draggable:ue(K(c,"draggable",d)),code:ue(K(c,"code",d)),defining:ue(K(c,"defining",d)),isolating:ue(K(c,"isolating",d)),attrs:Object.fromEntries(u.map(w=>{var E;return[w.name,{default:(E=w==null?void 0:w.attribute)===null||E===void 0?void 0:E.default}]}))}),p=ue(K(c,"parseHTML",d));p&&(h.parseDOM=p.map(w=>im(w,u)));const m=K(c,"renderHTML",d);m&&(h.toDOM=w=>m({node:w,HTMLAttributes:Vu(w,u)}));const y=K(c,"renderText",d);return y&&(h.toText=y),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,w)=>{const E=K(w,"extendMarkSchema",d);return{...y,...E?E(c):{}}},{}),h=sm({...f,inclusive:ue(K(c,"inclusive",d)),excludes:ue(K(c,"excludes",d)),group:ue(K(c,"group",d)),spanning:ue(K(c,"spanning",d)),code:ue(K(c,"code",d)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),p=ue(K(c,"parseHTML",d));p&&(h.parseDOM=p.map(y=>im(y,u)));const m=K(c,"renderHTML",d);return m&&(h.toDOM=y=>m({mark:y,HTMLAttributes:Vu(y,u)})),[c.name,h]}));return new yC({topNode:o,nodes:a,marks:l})}function $c(t,e){return e.nodes[t]||e.marks[t]||null}function om(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const dI=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function af(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Yl{constructor(e){this.find=e.find,this.handler=e.handler}}const fI=(t,e)=>{if(af(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Vo(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=dI(c)+s;return o.forEach(f=>{if(u)return;const h=fI(d,f.find);if(!h)return;const p=l.state.tr,m=ql({state:l.state,transaction:p}),y={from:r-(h[0].length-s.length),to:i},{commands:w,chain:E,can:x}=new Gl({editor:n,state:m});f.handler({state:m,range:y,match:h,commands:w,chain:E,can:x})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function hI(t){const{editor:e,rules:n}=t,r=new at({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,d=c+u.length;Vo({editor:e,from:c,to:d,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Vo({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Vo({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Vo({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function pI(t){return typeof t=="number"}class kv{constructor(e){this.find=e.find,this.handler=e.handler}}const mI=(t,e,n)=>{if(af(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function gI(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Gl({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),y=Math.min(i,p+h.content.size),w=h.textBetween(m-p,y-p,void 0,"");mI(w,s.find,o).forEach(x=>{if(x.index===void 0)return;const b=m+x.index+1,N=b+x[0].length,k={from:n.tr.mapping.map(b),to:n.tr.mapping.map(N)},L=s.handler({state:n,range:k,match:x,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(L)})}),d.every(h=>h!==null)}const yI=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function bI(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const m=u.tr,y=ql({state:u,transaction:m});if(!(!gI({editor:e,state:y,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(u=>new at({view(d){const f=h=>{var p;r=!((p=d.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(s=r===d.dom.parentElement,a=f,!1),paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!i,y=p.getMeta("uiEvent")==="drop"&&!s,w=p.getMeta("applyPasteRules"),E=!!w;if(!m&&!y&&!E)return;if(E){const{from:N,text:k}=w,L=N+k.length,Y=yI(k);return l({rule:u,state:h,from:N,to:{b:L},pasteEvt:Y})}const x=f.doc.content.findDiffStart(h.doc.content),b=f.doc.content.findDiffEnd(h.doc.content);if(!(!pI(x)||!b||x===b.b))return l({rule:u,state:h,from:x,to:b,pasteEvt:o})}}))}function vI(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Ei{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ei.resolve(e),this.schema=uI(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:$c(r.name,this.schema)};r.type==="mark"&&(!((i=ue(K(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=K(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=K(r,"onCreate",s);a&&this.editor.on("create",a);const l=K(r,"onUpdate",s);l&&this.editor.on("update",l);const c=K(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=K(r,"onTransaction",s);u&&this.editor.on("transaction",u);const d=K(r,"onFocus",s);d&&this.editor.on("focus",d);const f=K(r,"onBlur",s);f&&this.editor.on("blur",f);const h=K(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const n=Ei.sort(Ei.flatten(e)),r=vI(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=K(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=K(r,"priority")||100,o=K(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:$c(n.name,this.schema)},i=K(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ei.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:$c(o.name,this.schema)},l=[],c=K(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Pt.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([y,w])=>[y,()=>w({editor:e})]));u={...u,...m}}const d=DA(u);l.push(d);const f=K(o,"addInputRules",a);om(o,e.options.enableInputRules)&&f&&r.push(...f());const h=K(o,"addPasteRules",a);om(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=K(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[hI({editor:e,rules:r}),...bI({editor:e,rules:i}),...s]}get attributes(){return vv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Jl(this.extensions);return Object.fromEntries(n.filter(r=>!!K(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ze(r.name,this.schema)},o=K(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d)=>{const f=Vu(l,i);return o()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function wI(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fc(t){return wI(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Xl(t,e){const n={...t};return Fc(t)&&Fc(e)&&Object.keys(e).forEach(r=>{Fc(e[r])?r in t?n[r]=Xl(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class ot{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ue(K(this,"addOptions",{name:this.name}))),this.storage=ue(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ot(e)}configure(e={}){const n=this.extend();return n.options=Xl(this.options,e),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new ot({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ue(K(n,"addOptions",{name:n.name})),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}}function Sv(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e})),!1;c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Ev(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const kI=ot.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new at({key:new Lt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Ev(n);return Sv(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),SI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),EI=(t=!1)=>({commands:e})=>e.setContent("",t),_I=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=ss(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},TI=t=>e=>t(e),xI=()=>({state:t,dispatch:e})=>GA(t,e),CI=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new oe(r.doc.resolve(o-1))),!0},OI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},AI=t=>({tr:e,state:n,dispatch:r})=>{const i=Ze(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},II=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},MI=()=>({state:t,dispatch:e})=>LA(t,e),RI=()=>({commands:t})=>t.keyboardShortcut("Enter"),NI=()=>({state:t,dispatch:e})=>qA(t,e);function $a(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:af(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function ju(t,e,n={}){return t.find(r=>r.type===e&&$a(r.attrs,n))}function PI(t,e,n={}){return!!ju(t,e,n)}function lf(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=ju([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(ju([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&PI([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Cr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const DI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Cr(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=lf(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=oe.create(o,d.from,d.to);n.setSelection(f)}}return!0},LI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function cf(t){return t instanceof oe}function Bn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function _v(t,e=null){if(!e)return null;const n=me.atStart(t),r=me.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?oe.create(t,Bn(0,i,s),Bn(t.content.size,i,s)):oe.create(t,Bn(e,i,s),Bn(e,i,s))}function uf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const BI=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{uf()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!cf(n.state.selection))return o(),!0;const a=_v(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},$I=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),FI=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Tv=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Tv(r)}return t};function am(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Tv(n)}function Fa(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?M.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Fa("",e,n)}if(typeof t=="string"){const r=zi.fromSchema(e);return n.slice?r.parseSlice(am(t),n.parseOptions).content:r.parse(am(t),n.parseOptions)}return Fa("",e,n)}function HI(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ye||i instanceof Xe))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(me.near(t.doc.resolve(o),n))}const VI=t=>t.toString().startsWith("<"),jI=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=Fa(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((VI(o)?o:[o]).forEach(h=>{h.check(),c=c?h.isText&&h.marks.length===0:!1,u=u?h.isBlock:!1}),a===l&&u){const{parent:h}=r.doc.resolve(a);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(a-=1,l+=1)}let f;c?(Array.isArray(e)?f=e.map(h=>h.text||"").join(""):typeof e=="object"&&e&&e.text?f=e.text:f=e,r.insertText(f,a,l)):(f=o,r.replaceWith(a,l,f)),n.updateSelection&&HI(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:f})}return!0},zI=()=>({state:t,dispatch:e})=>zA(t,e),UI=()=>({state:t,dispatch:e})=>UA(t,e),WI=()=>({state:t,dispatch:e})=>BA(t,e),KI=()=>({state:t,dispatch:e})=>VA(t,e),qI=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Vl(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},GI=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vl(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},JI=()=>({state:t,dispatch:e})=>$A(t,e),YI=()=>({state:t,dispatch:e})=>FA(t,e);function df(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function XI(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))uf()||df()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const QI=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=XI(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function to(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Ze(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>$a(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const ZI=(t,e={})=>({state:n,dispatch:r})=>{const i=Ze(t,n.schema);return to(n,i,e)?WA(n,r):!1},eM=()=>({state:t,dispatch:e})=>JA(t,e),tM=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return rI(r)(e,n)},nM=()=>({state:t,dispatch:e})=>KA(t,e);function Ql(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function lm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const rM=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ql(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Ze(t,r.schema)),a==="mark"&&(o=Cr(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,lm(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(lm(d.attrs,e)))})})}),!0):!1},iM=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),sM=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),oM=()=>({state:t,dispatch:e})=>HA(t,e),aM=()=>({state:t,dispatch:e})=>jA(t,e),lM=()=>({state:t,dispatch:e})=>YA(t,e),cM=()=>({state:t,dispatch:e})=>ZA(t,e),uM=()=>({state:t,dispatch:e})=>QA(t,e);function xv(t,e,n={}){return Fa(t,e,{slice:!1,parseOptions:n})}const dM=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=xv(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function _o(t,e){const n=Cr(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function fM(t,e){const n=new Ib(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function hM(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function pM(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function mM(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ff(t){return e=>mM(e.$from,t)}function gM(t,e){const n=yn.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function yM(t,e){const n={from:0,to:t.content.size};return Sv(t,n,e)}function bM(t,e){const n=Ze(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function Cv(t,e){const n=Ql(typeof e=="string"?e:e.name,t.schema);return n==="node"?bM(t,e):n==="mark"?_o(t,e):{}}function vM(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function wM(t){const e=vM(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function kM(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),wM(r)}function hf(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=lf(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function sa(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function zu(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Cr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>$a(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const w=Math.max(h,y),E=Math.min(p,y+m.nodeSize),x=E-w;o+=x,a.push(...m.marks.map(b=>({mark:b,from:w,to:E})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>$a(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function SM(t,e,n={}){if(!e)return to(t,null,n)||zu(t,null,n);const r=Ql(e,t.schema);return r==="node"?to(t,e,n):r==="mark"?zu(t,e,n):!1}function cm(t,e){const{nodeExtensions:n}=Jl(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ue(K(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function EM(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function _M(t){return t instanceof te}function Ov(t,e,n){const i=t.state.doc.content.size,s=Bn(e,0,i),o=Bn(n,0,i),a=t.coordsAtPos(s),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,p=u-c,w={top:c,bottom:u,left:d,right:f,width:h,height:p,x:d,y:c};return{...w,toJSON:()=>w}}function TM(t,e,n){var r;const{selection:i}=e;let s=null;if(cf(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}const xM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Cr(t,r.schema);if(i)if(o){const c=_o(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(w=>w.type===l)?f.marks.forEach(w=>{l===w.type&&n.addMark(p,m,l.create({...w.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return TM(r,n,l)},CM=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),OM=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Ze(t,n.schema);return s.isTextblock?i().command(({commands:o})=>rm(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>rm(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},AM=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Bn(t,0,r.content.size),s=te.create(r,i);e.setSelection(s)}return!0},IM=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=oe.atStart(r).from,a=oe.atEnd(r).to,l=Bn(i,o,a),c=Bn(s,o,a),u=oe.create(r,l,c);e.setSelection(u)}return!0},MM=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return oI(r)(e,n)};function um(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const RM=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=sa(c,a.node().type.name,a.node().attrs);if(s instanceof te&&s.node.isBlock)return!a.parentOffset||!Pi(o,a.pos)?!1:(r&&(t&&um(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof oe&&e.deleteSelection();const f=a.depth===0?void 0:hM(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=Pi(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Pi(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&um(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},NM=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=Ze(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let y=M.empty;const w=a.index(-1)?1:a.index(-2)?2:3;for(let L=a.depth-w;L>=a.depth-3;L-=1)y=M.from(a.node(L).copy(y));const E=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,x=sa(d,a.node().type.name,a.node().attrs),b=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(x))||void 0;y=y.append(M.from(o.createAndFill(null,b)||void 0));const N=a.before(a.depth-(w-1));e.replace(N,a.after(-E),new z(y,4-w,0));let k=-1;e.doc.nodesBetween(N,e.doc.content.size,(L,Y)=>{if(k>-1)return!1;L.isTextblock&&L.content.size===0&&(k=Y+1)}),k>-1&&e.setSelection(oe.near(e.doc.resolve(k))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=sa(d,u.type.name,u.attrs),p=sa(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!Pi(e.doc,a.pos,2))return!1;if(r){const{selection:y,storedMarks:w}=n,{splittableMarks:E}=i.extensionManager,x=w||y.$to.parentOffset&&y.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!x||!r)return!0;const b=x.filter(N=>E.includes(N.type.name));e.ensureMarks(b)}return!0},Hc=(t,e)=>{const n=ff(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Tr(t.doc,n.pos)&&t.join(n.pos),!0},Vc=(t,e)=>{const n=ff(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Tr(t.doc,r)&&t.join(r),!0},PM=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Ze(t,o.schema),p=Ze(e,o.schema),{selection:m,storedMarks:y}=o,{$from:w,$to:E}=m,x=w.blockRange(E),b=y||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const N=ff(k=>cm(k.type.name,d))(m);if(x.depth>=1&&N&&x.depth-N.depth<=1){if(N.node.type===h)return c.liftListItem(p);if(cm(N.node.type.name,d)&&h.validContent(N.node.content)&&a)return l().command(()=>(s.setNodeMarkup(N.pos,h),!0)).command(()=>Hc(s,h)).command(()=>Vc(s,h)).run()}return!n||!b||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Hc(s,h)).command(()=>Vc(s,h)).run():l().command(()=>{const k=u().wrapInList(h,r),L=b.filter(Y=>f.includes(Y.type.name));return s.ensureMarks(L),k?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Hc(s,h)).command(()=>Vc(s,h)).run()},DM=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Cr(t,r.schema);return zu(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},LM=(t,e,n={})=>({state:r,commands:i})=>{const s=Ze(t,r.schema),o=Ze(e,r.schema);return to(r,s,n)?i.setNode(o):i.setNode(s,n)},BM=(t,e={})=>({state:n,commands:r})=>{const i=Ze(t,n.schema);return to(n,i,e)?r.lift(i):r.wrapIn(i,e)},$M=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},FM=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},HM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Cr(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(y=>y.type===l))===null||s===void 0?void 0:s.attrs,m=lf(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},VM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ql(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Ze(t,r.schema)),a==="mark"&&(o=Cr(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);n.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},jM=(t,e={})=>({state:n,dispatch:r})=>{const i=Ze(t,n.schema);return eI(i,e)(n,r)},zM=(t,e={})=>({state:n,dispatch:r})=>{const i=Ze(t,n.schema);return tI(i,e)(n,r)};var UM=Object.freeze({__proto__:null,blur:SI,clearContent:EI,clearNodes:_I,command:TI,createParagraphNear:xI,cut:CI,deleteCurrentNode:OI,deleteNode:AI,deleteRange:II,deleteSelection:MI,enter:RI,exitCode:NI,extendMarkRange:DI,first:LI,focus:BI,forEach:$I,insertContent:FI,insertContentAt:jI,joinUp:zI,joinDown:UI,joinBackward:WI,joinForward:KI,joinItemBackward:qI,joinItemForward:GI,joinTextblockBackward:JI,joinTextblockForward:YI,keyboardShortcut:QI,lift:ZI,liftEmptyBlock:eM,liftListItem:tM,newlineInCode:nM,resetAttributes:rM,scrollIntoView:iM,selectAll:sM,selectNodeBackward:oM,selectNodeForward:aM,selectParentNode:lM,selectTextblockEnd:cM,selectTextblockStart:uM,setContent:dM,setMark:xM,setMeta:CM,setNode:OM,setNodeSelection:AM,setTextSelection:IM,sinkListItem:MM,splitBlock:RM,splitListItem:NM,toggleList:PM,toggleMark:DM,toggleNode:LM,toggleWrap:BM,undoInputRule:$M,unsetAllMarks:FM,unsetMark:HM,updateAttributes:VM,wrapIn:jM,wrapInList:zM});const WM=ot.create({name:"commands",addCommands(){return{...UM}}}),KM=ot.create({name:"editable",addProseMirrorPlugins(){return[new at({key:new Lt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),qM=ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new at({key:new Lt("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),GM=ot.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,y=d.pos-d.parentOffset,w=m&&p.parent.childCount===1?y===d.pos:me.atStart(c).from===f;return!u||!w||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uf()||df()?s:i},addProseMirrorPlugins(){return[new at({key:new Lt("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=me.atStart(e.doc).from,l=me.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const d=n.tr,f=ql({state:n,transaction:d}),{commands:h}=new Gl({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),JM=ot.create({name:"tabindex",addProseMirrorPlugins(){return[new at({key:new Lt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Br{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Br(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Br(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Br(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new Br(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Br(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const YM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function XM(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let QM=class extends aI{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=XM(YM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=wv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[KM,kI.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),WM,qM,GM,JM]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ei(i,this)}createCommandManager(){this.commandManager=new Gl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=xv(this.options.content,this.schema,this.options.parseOptions),n=_v(e,this.options.autofocus);this.view=new xA(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Si.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Cv(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return SM(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return gM(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return yM(this.state.doc,{blockSeparator:n,textSerializers:{...Ev(this.schema),...r}})}get isEmpty(){return EM(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Br(n,this)}get $doc(){return this.$pos(0)}};function si(t){return new Yl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ue(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(hf(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const f=n.from+l+o.length;s.addMark(n.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Av(t){return new Yl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ue(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function Uu(t){return new Yl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=ue(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function no(t){return new Yl({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=ue(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&Gd(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(y=>h.includes(y.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Tr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Pt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ue(K(this,"addOptions",{name:this.name}))),this.storage=ue(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pt(e)}configure(e={}){const n=this.extend();return n.options=Xl(this.options,e),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Pt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ue(K(n,"addOptions",{name:n.name})),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class et{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ue(K(this,"addOptions",{name:this.name}))),this.storage=ue(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new et(e)}configure(e={}){const n=this.extend();return n.options=Xl(this.options,e),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new et({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ue(K(n,"addOptions",{name:n.name})),n.storage=ue(K(n,"addStorage",{name:n.name,options:n.options})),n}}function Er(t){return new kv({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=ue(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(hf(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function ZM(t){return new kv({find:t.find,handler({match:e,chain:n,range:r,pasteEvent:i}){const s=ue(t.getAttributes,void 0,e,i);if(s===!1||s===null)return null;e.input&&n().deleteRange(r).insertContentAt(r.from,{type:t.type.name,attrs:s})}})}const eR=/^\s*>\s$/,tR=et.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[no({find:eR,type:this.type})]}}),nR=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,rR=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,iR=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,sR=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,oR=Pt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[si({find:nR,type:this.type}),si({find:iR,type:this.type})]},addPasteRules(){return[Er({find:rR,type:this.type}),Er({find:sR,type:this.type})]}}),aR=et.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",De(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dm=Pt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",De(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=_o(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),fm=/^\s*([-+*])\s$/,lR=et.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",De(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(aR.name,this.editor.getAttributes(dm.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=no({find:fm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=no({find:fm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(dm.name),editor:this.editor})),[t]}}),cR=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,uR=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,dR=Pt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[si({find:cR,type:this.type})]},addPasteRules(){return[Er({find:uR,type:this.type})]}}),fR=/^```([a-z]+)?[\s\n]$/,hR=/^~~~([a-z]+)?[\s\n]$/,pR=et.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",De(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[Uu({find:fR,type:this.type,getAttributes:t=>({language:t[1]})}),Uu({find:hR,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new at({key:new Lt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(oe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),mR=et.create({name:"doc",topNode:!0,content:"block+"});function gR(t={}){return new at({view(e){return new yR(e,t)}})}class yR{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Tb(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const bR=ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[gR(this.options)]}});class Fe extends me{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Fe.valid(r)?new Fe(r):me.near(r)}content(){return z.empty}eq(e){return e instanceof Fe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Fe(e.resolve(n.pos))}getBookmark(){return new pf(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!vR(e)||!wR(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Fe.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Fe.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!te.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Fe.valid(a))return a}return null}}}Fe.prototype.visible=!1;Fe.findFrom=Fe.findGapCursorFrom;me.jsonID("gapcursor",Fe);class pf{constructor(e){this.pos=e}map(e){return new pf(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Fe.valid(n)?new Fe(n):me.near(n)}}function vR(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function wR(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function kR(){return new at({props:{decorations:TR,createSelectionBetween(t,e,n){return e.pos==n.pos&&Fe.valid(n)?new Fe(n):null},handleClick:ER,handleKeyDown:SR,handleDOMEvents:{beforeinput:_R}}})}const SR=fv({ArrowLeft:jo("horiz",-1),ArrowRight:jo("horiz",1),ArrowUp:jo("vert",-1),ArrowDown:jo("vert",1)});function jo(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof oe){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Fe.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Fe(c))),!0):!1}}function ER(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Fe.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&te.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Fe(r))),!0)}function _R(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Fe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=M.empty;for(let o=r.length-1;o>=0;o--)i=M.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new z(i,0,0));return s.setSelection(oe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function TR(t){if(!(t.selection instanceof Fe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ke.create(t.doc,[zt.widget(t.selection.head,e,{key:"gapcursor"})])}const xR=ot.create({name:"gapCursor",addProseMirrorPlugins(){return[kR()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ue(K(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),CR=et.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",De(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),OR=et.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,De(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Uu({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Ha=200,Qe=function(){};Qe.prototype.append=function(e){return e.length?(e=Qe.from(e),!this.length&&e||e.length<Ha&&this.leafAppend(e)||this.length<Ha&&e.leafPrepend(this)||this.appendInner(e)):this};Qe.prototype.prepend=function(e){return e.length?Qe.from(e).append(this):this};Qe.prototype.appendInner=function(e){return new AR(this,e)};Qe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Qe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Qe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Qe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Qe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Qe.from=function(e){return e instanceof Qe?e:e&&e.length?new Iv(e):Qe.empty};var Iv=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ha)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ha)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Qe);Qe.empty=new Iv([]);var AR=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Qe);const IR=500;class Yt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new cn(d.map));let h=d.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new cn(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Yt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new cn(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let c=o-r.depth;return c>RR&&(a=MR(a,c),o-=c),new Yt(a.append(s),o)}remapping(e,n){let r=new Ni;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Yt(this.items.append(e.map(n=>new cn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),y=f.selection&&f.selection.map(s.slice(l+1,h));y&&a++,r.push(new cn(p,m,y))}else r.push(new cn(p))},i);let c=[];for(let f=n;f<o;f++)c.push(new cn(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new Yt(u,a);return d.emptyItemCount()>IR&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new cn(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new Yt(Qe.from(i.reverse()),s)}}Yt.empty=new Yt(Qe.empty,0);function MR(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class cn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new cn(n.getMap().invert(),n,this.selection)}}}class nr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const RR=20;function NR(t,e,n,r){let i=n.getMeta(Qr),s;if(i)return i.historyState;n.getMeta(LR)&&(t=new nr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Qr))return o.getMeta(Qr).redo?new nr(t.done.addTransform(n,void 0,r,oa(e)),t.undone,hm(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new nr(t.done,t.undone.addTransform(n,void 0,r,oa(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!PR(n,t.prevRanges)),c=o?jc(t.prevRanges,n.mapping):hm(n.mapping.maps[n.steps.length-1]);return new nr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,oa(e)),Yt.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new nr(t.done.rebased(n,s),t.undone.rebased(n,s),jc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new nr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),jc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function PR(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function hm(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function jc(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function DR(t,e,n){let r=oa(e),i=Qr.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new nr(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Qr,{redo:n,historyState:l})}let zc=!1,pm=null;function oa(t){let e=t.plugins;if(pm!=e){zc=!1,pm=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){zc=!0;break}}return zc}const Qr=new Lt("history"),LR=new Lt("closeHistory");function BR(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new at({key:Qr,state:{init(){return new nr(Yt.empty,Yt.empty,null,0,-1)},apply(e,n,r){return NR(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Rv:r=="historyRedo"?Nv:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Mv(t,e){return(n,r)=>{let i=Qr.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=DR(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Rv=Mv(!1,!0),Nv=Mv(!0,!0),$R=ot.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Rv(t,e),redo:()=>({state:t,dispatch:e})=>Nv(t,e)}},addProseMirrorPlugins(){return[BR(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),FR=et.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",De(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(oe.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(te.create(i.doc,a.pos)):i.setSelection(oe.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(oe.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Av({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),HR=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,VR=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,jR=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,zR=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,UR=Pt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[si({find:HR,type:this.type}),si({find:jR,type:this.type})]},addPasteRules(){return[Er({find:VR,type:this.type}),Er({find:zR,type:this.type})]}}),WR=et.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",De(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KR=et.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",De(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),mm=Pt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",De(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=_o(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),gm=/^(\d+)\.\s$/,qR=et.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",De(this.options.HTMLAttributes,n),0]:["ol",De(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KR.name,this.editor.getAttributes(mm.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=no({find:gm,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=no({find:gm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(mm.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),GR=et.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),JR=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,YR=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,XR=Pt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return df()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[si({find:JR,type:this.type})]},addPasteRules(){return[Er({find:YR,type:this.type})]}}),QR=et.create({name:"text",group:"inline"}),ZR=ot.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,d,f,h,p,m,y,w;const E=[];return this.options.blockquote!==!1&&E.push(tR.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&E.push(oR.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&E.push(lR.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&E.push(dR.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&E.push(pR.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&E.push(mR.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&E.push(bR.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&E.push(xR.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&E.push(CR.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&E.push(OR.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&E.push($R.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&E.push(FR.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&E.push(UR.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&E.push(WR.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&E.push(qR.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&E.push(GR.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&E.push(XR.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&E.push(QR.configure((w=this.options)===null||w===void 0?void 0:w.text)),E}});var xt="top",Kt="bottom",qt="right",Ct="left",mf="auto",To=[xt,Kt,qt,Ct],Gi="start",ro="end",eN="clippingParents",Pv="viewport",fs="popper",tN="reference",ym=To.reduce(function(t,e){return t.concat([e+"-"+Gi,e+"-"+ro])},[]),Dv=[].concat(To,[mf]).reduce(function(t,e){return t.concat([e,e+"-"+Gi,e+"-"+ro])},[]),nN="beforeRead",rN="read",iN="afterRead",sN="beforeMain",oN="main",aN="afterMain",lN="beforeWrite",cN="write",uN="afterWrite",dN=[nN,rN,iN,sN,oN,aN,lN,cN,uN];function Tn(t){return t?(t.nodeName||"").toLowerCase():null}function Dt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function oi(t){var e=Dt(t).Element;return t instanceof e||t instanceof Element}function Wt(t){var e=Dt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function gf(t){if(typeof ShadowRoot>"u")return!1;var e=Dt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function fN(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Wt(s)||!Tn(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function hN(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Wt(i)||!Tn(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Lv={name:"applyStyles",enabled:!0,phase:"write",fn:fN,effect:hN,requires:["computeStyles"]};function wn(t){return t.split("-")[0]}var Zr=Math.max,Va=Math.min,Ji=Math.round;function Wu(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Bv(){return!/^((?!chrome|android).)*safari/i.test(Wu())}function Yi(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Wt(t)&&(i=t.offsetWidth>0&&Ji(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Ji(r.height)/t.offsetHeight||1);var o=oi(t)?Dt(t):window,a=o.visualViewport,l=!Bv()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function yf(t){var e=Yi(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function $v(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&gf(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function jn(t){return Dt(t).getComputedStyle(t)}function pN(t){return["table","td","th"].indexOf(Tn(t))>=0}function Or(t){return((oi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Zl(t){return Tn(t)==="html"?t:t.assignedSlot||t.parentNode||(gf(t)?t.host:null)||Or(t)}function bm(t){return!Wt(t)||jn(t).position==="fixed"?null:t.offsetParent}function mN(t){var e=/firefox/i.test(Wu()),n=/Trident/i.test(Wu());if(n&&Wt(t)){var r=jn(t);if(r.position==="fixed")return null}var i=Zl(t);for(gf(i)&&(i=i.host);Wt(i)&&["html","body"].indexOf(Tn(i))<0;){var s=jn(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function xo(t){for(var e=Dt(t),n=bm(t);n&&pN(n)&&jn(n).position==="static";)n=bm(n);return n&&(Tn(n)==="html"||Tn(n)==="body"&&jn(n).position==="static")?e:n||mN(t)||e}function bf(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ns(t,e,n){return Zr(t,Va(e,n))}function gN(t,e,n){var r=Ns(t,e,n);return r>n?n:r}function Fv(){return{top:0,right:0,bottom:0,left:0}}function Hv(t){return Object.assign({},Fv(),t)}function Vv(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var yN=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Hv(typeof e!="number"?e:Vv(e,To))};function bN(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=wn(n.placement),l=bf(a),c=[Ct,qt].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=yN(i.padding,n),f=yf(s),h=l==="y"?xt:Ct,p=l==="y"?Kt:qt,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],w=xo(s),E=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,x=m/2-y/2,b=d[h],N=E-f[u]-d[p],k=E/2-f[u]/2+x,L=Ns(b,k,N),Y=l;n.modifiersData[r]=(e={},e[Y]=L,e.centerOffset=L-k,e)}}function vN(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||$v(e.elements.popper,i)&&(e.elements.arrow=i))}const wN={name:"arrow",enabled:!0,phase:"main",fn:bN,effect:vN,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xi(t){return t.split("-")[1]}var kN={top:"auto",right:"auto",bottom:"auto",left:"auto"};function SN(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ji(n*i)/i||0,y:Ji(r*i)/i||0}}function vm(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,m=p===void 0?0:p,y=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=y.x,m=y.y;var w=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),x=Ct,b=xt,N=window;if(c){var k=xo(n),L="clientHeight",Y="clientWidth";if(k===Dt(n)&&(k=Or(n),jn(k).position!=="static"&&a==="absolute"&&(L="scrollHeight",Y="scrollWidth")),k=k,i===xt||(i===Ct||i===qt)&&s===ro){b=Kt;var j=d&&k===N&&N.visualViewport?N.visualViewport.height:k[L];m-=j-r.height,m*=l?1:-1}if(i===Ct||(i===xt||i===Kt)&&s===ro){x=qt;var ne=d&&k===N&&N.visualViewport?N.visualViewport.width:k[Y];h-=ne-r.width,h*=l?1:-1}}var ae=Object.assign({position:a},c&&kN),ve=u===!0?SN({x:h,y:m},Dt(n)):{x:h,y:m};if(h=ve.x,m=ve.y,l){var ge;return Object.assign({},ae,(ge={},ge[b]=E?"0":"",ge[x]=w?"0":"",ge.transform=(N.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",ge))}return Object.assign({},ae,(e={},e[b]=E?m+"px":"",e[x]=w?h+"px":"",e.transform="",e))}function EN(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:wn(e.placement),variation:Xi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,vm(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,vm(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const _N={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:EN,data:{}};var zo={passive:!0};function TN(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Dt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,zo)}),a&&l.addEventListener("resize",n.update,zo),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,zo)}),a&&l.removeEventListener("resize",n.update,zo)}}const xN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TN,data:{}};var CN={left:"right",right:"left",bottom:"top",top:"bottom"};function aa(t){return t.replace(/left|right|bottom|top/g,function(e){return CN[e]})}var ON={start:"end",end:"start"};function wm(t){return t.replace(/start|end/g,function(e){return ON[e]})}function vf(t){var e=Dt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function wf(t){return Yi(Or(t)).left+vf(t).scrollLeft}function AN(t,e){var n=Dt(t),r=Or(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=Bv();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+wf(t),y:l}}function IN(t){var e,n=Or(t),r=vf(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Zr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Zr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+wf(t),l=-r.scrollTop;return jn(i||n).direction==="rtl"&&(a+=Zr(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function kf(t){var e=jn(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function jv(t){return["html","body","#document"].indexOf(Tn(t))>=0?t.ownerDocument.body:Wt(t)&&kf(t)?t:jv(Zl(t))}function Ps(t,e){var n;e===void 0&&(e=[]);var r=jv(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Dt(r),o=i?[s].concat(s.visualViewport||[],kf(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Ps(Zl(o)))}function Ku(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function MN(t,e){var n=Yi(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function km(t,e,n){return e===Pv?Ku(AN(t,n)):oi(e)?MN(e,n):Ku(IN(Or(t)))}function RN(t){var e=Ps(Zl(t)),n=["absolute","fixed"].indexOf(jn(t).position)>=0,r=n&&Wt(t)?xo(t):t;return oi(r)?e.filter(function(i){return oi(i)&&$v(i,r)&&Tn(i)!=="body"}):[]}function NN(t,e,n,r){var i=e==="clippingParents"?RN(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=km(t,c,r);return l.top=Zr(u.top,l.top),l.right=Va(u.right,l.right),l.bottom=Va(u.bottom,l.bottom),l.left=Zr(u.left,l.left),l},km(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function zv(t){var e=t.reference,n=t.element,r=t.placement,i=r?wn(r):null,s=r?Xi(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case xt:l={x:o,y:e.y-n.height};break;case Kt:l={x:o,y:e.y+e.height};break;case qt:l={x:e.x+e.width,y:a};break;case Ct:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?bf(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Gi:l[c]=l[c]-(e[u]/2-n[u]/2);break;case ro:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function io(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?eN:a,c=n.rootBoundary,u=c===void 0?Pv:c,d=n.elementContext,f=d===void 0?fs:d,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,y=m===void 0?0:m,w=Hv(typeof y!="number"?y:Vv(y,To)),E=f===fs?tN:fs,x=t.rects.popper,b=t.elements[p?E:f],N=NN(oi(b)?b:b.contextElement||Or(t.elements.popper),l,u,o),k=Yi(t.elements.reference),L=zv({reference:k,element:x,strategy:"absolute",placement:i}),Y=Ku(Object.assign({},x,L)),j=f===fs?Y:k,ne={top:N.top-j.top+w.top,bottom:j.bottom-N.bottom+w.bottom,left:N.left-j.left+w.left,right:j.right-N.right+w.right},ae=t.modifiersData.offset;if(f===fs&&ae){var ve=ae[i];Object.keys(ne).forEach(function(ge){var $e=[qt,Kt].indexOf(ge)>=0?1:-1,Le=[xt,Kt].indexOf(ge)>=0?"y":"x";ne[ge]+=ve[Le]*$e})}return ne}function PN(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Dv:l,u=Xi(r),d=u?a?ym:ym.filter(function(p){return Xi(p)===u}):To,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=io(t,{placement:m,boundary:i,rootBoundary:s,padding:o})[wn(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function DN(t){if(wn(t)===mf)return[];var e=aa(t);return[wm(t),e,wm(e)]}function LN(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,y=e.options.placement,w=wn(y),E=w===y,x=l||(E||!p?[aa(y)]:DN(y)),b=[y].concat(x).reduce(function(lt,ct){return lt.concat(wn(ct)===mf?PN(e,{placement:ct,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):ct)},[]),N=e.rects.reference,k=e.rects.popper,L=new Map,Y=!0,j=b[0],ne=0;ne<b.length;ne++){var ae=b[ne],ve=wn(ae),ge=Xi(ae)===Gi,$e=[xt,Kt].indexOf(ve)>=0,Le=$e?"width":"height",de=io(e,{placement:ae,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),ee=$e?ge?qt:Ct:ge?Kt:xt;N[Le]>k[Le]&&(ee=aa(ee));var Z=aa(ee),Ve=[];if(s&&Ve.push(de[ve]<=0),a&&Ve.push(de[ee]<=0,de[Z]<=0),Ve.every(function(lt){return lt})){j=ae,Y=!1;break}L.set(ae,Ve)}if(Y)for(var We=p?3:1,Ge=function(ct){var Ae=b.find(function(O){var H=L.get(O);if(H)return H.slice(0,ct).every(function($){return $})});if(Ae)return j=Ae,"break"},Re=We;Re>0;Re--){var kt=Ge(Re);if(kt==="break")break}e.placement!==j&&(e.modifiersData[r]._skip=!0,e.placement=j,e.reset=!0)}}const BN={name:"flip",enabled:!0,phase:"main",fn:LN,requiresIfExists:["offset"],data:{_skip:!1}};function Sm(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Em(t){return[xt,qt,Kt,Ct].some(function(e){return t[e]>=0})}function $N(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=io(e,{elementContext:"reference"}),a=io(e,{altBoundary:!0}),l=Sm(o,r),c=Sm(a,i,s),u=Em(l),d=Em(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const FN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$N};function HN(t,e,n){var r=wn(t),i=[Ct,xt].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ct,qt].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function VN(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=Dv.reduce(function(u,d){return u[d]=HN(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const jN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:VN};function zN(t){var e=t.state,n=t.name;e.modifiersData[n]=zv({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const UN={name:"popperOffsets",enabled:!0,phase:"read",fn:zN,data:{}};function WN(t){return t==="x"?"y":"x"}function KN(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,y=io(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),w=wn(e.placement),E=Xi(e.placement),x=!E,b=bf(w),N=WN(b),k=e.modifiersData.popperOffsets,L=e.rects.reference,Y=e.rects.popper,j=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,ne=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ve={x:0,y:0};if(k){if(s){var ge,$e=b==="y"?xt:Ct,Le=b==="y"?Kt:qt,de=b==="y"?"height":"width",ee=k[b],Z=ee+y[$e],Ve=ee-y[Le],We=h?-Y[de]/2:0,Ge=E===Gi?L[de]:Y[de],Re=E===Gi?-Y[de]:-L[de],kt=e.elements.arrow,lt=h&&kt?yf(kt):{width:0,height:0},ct=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Fv(),Ae=ct[$e],O=ct[Le],H=Ns(0,L[de],lt[de]),$=x?L[de]/2-We-H-Ae-ne.mainAxis:Ge-H-Ae-ne.mainAxis,U=x?-L[de]/2+We+H+O+ne.mainAxis:Re+H+O+ne.mainAxis,ye=e.elements.arrow&&xo(e.elements.arrow),_e=ye?b==="y"?ye.clientTop||0:ye.clientLeft||0:0,g=(ge=ae==null?void 0:ae[b])!=null?ge:0,v=ee+$-g-_e,_=ee+U-g,A=Ns(h?Va(Z,v):Z,ee,h?Zr(Ve,_):Ve);k[b]=A,ve[b]=A-ee}if(a){var C,P=b==="x"?xt:Ct,F=b==="x"?Kt:qt,R=k[N],D=N==="y"?"height":"width",I=R+y[P],V=R-y[F],J=[xt,Ct].indexOf(w)!==-1,G=(C=ae==null?void 0:ae[N])!=null?C:0,re=J?I:R-L[D]-Y[D]-G+ne.altAxis,ce=J?R+L[D]+Y[D]-G-ne.altAxis:V,we=h&&J?gN(re,R,ce):Ns(h?re:I,R,h?ce:V);k[N]=we,ve[N]=we-R}e.modifiersData[r]=ve}}const qN={name:"preventOverflow",enabled:!0,phase:"main",fn:KN,requiresIfExists:["offset"]};function GN(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function JN(t){return t===Dt(t)||!Wt(t)?vf(t):GN(t)}function YN(t){var e=t.getBoundingClientRect(),n=Ji(e.width)/t.offsetWidth||1,r=Ji(e.height)/t.offsetHeight||1;return n!==1||r!==1}function XN(t,e,n){n===void 0&&(n=!1);var r=Wt(e),i=Wt(e)&&YN(e),s=Or(e),o=Yi(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Tn(e)!=="body"||kf(s))&&(a=JN(e)),Wt(e)?(l=Yi(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=wf(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function QN(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function ZN(t){var e=QN(t);return dN.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function eP(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function tP(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var _m={placement:"bottom",modifiers:[],strategy:"absolute"};function Tm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function nP(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?_m:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},_m,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(w){var E=typeof w=="function"?w(u.options):w;m(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:oi(a)?Ps(a):a.contextElement?Ps(a.contextElement):[],popper:Ps(l)};var x=ZN(tP([].concat(r,u.options.modifiers)));return u.orderedModifiers=x.filter(function(b){return b.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var w=u.elements,E=w.reference,x=w.popper;if(Tm(E,x)){u.rects={reference:XN(E,xo(x),u.options.strategy==="fixed"),popper:yf(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(ne){return u.modifiersData[ne.name]=Object.assign({},ne.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var N=u.orderedModifiers[b],k=N.fn,L=N.options,Y=L===void 0?{}:L,j=N.name;typeof k=="function"&&(u=k({state:u,options:Y,name:j,instance:h})||u)}}}},update:eP(function(){return new Promise(function(y){h.forceUpdate(),y(u)})}),destroy:function(){m(),f=!0}};if(!Tm(a,l))return h;h.setOptions(c).then(function(y){!f&&c.onFirstUpdate&&c.onFirstUpdate(y)});function p(){u.orderedModifiers.forEach(function(y){var w=y.name,E=y.options,x=E===void 0?{}:E,b=y.effect;if(typeof b=="function"){var N=b({state:u,name:w,instance:h,options:x}),k=function(){};d.push(N||k)}})}function m(){d.forEach(function(y){return y()}),d=[]}return h}}var rP=[xN,UN,_N,Lv,jN,BN,qN,wN,FN],iP=nP({defaultModifiers:rP}),sP="tippy-box",Uv="tippy-content",oP="tippy-backdrop",Wv="tippy-arrow",Kv="tippy-svg-arrow",Nr={passive:!0,capture:!0},qv=function(){return document.body};function Uc(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Sf(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Gv(t,e){return typeof t=="function"?t.apply(void 0,e):t}function xm(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function aP(t){return t.split(/\s+/).filter(Boolean)}function wi(t){return[].concat(t)}function Cm(t,e){t.indexOf(e)===-1&&t.push(e)}function lP(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function cP(t){return t.split("-")[0]}function ja(t){return[].slice.call(t)}function Om(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ds(){return document.createElement("div")}function ec(t){return["Element","Fragment"].some(function(e){return Sf(t,e)})}function uP(t){return Sf(t,"NodeList")}function dP(t){return Sf(t,"MouseEvent")}function fP(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function hP(t){return ec(t)?[t]:uP(t)?ja(t):Array.isArray(t)?t:ja(document.querySelectorAll(t))}function Wc(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Am(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function pP(t){var e,n=wi(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function mP(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=cP(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,m=s.top-r+d>l,y=r-s.bottom-f>l,w=s.left-n+h>l,E=n-s.right-p>l;return m||y||w||E})}function Kc(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Im(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var pn={isTouch:!1},Mm=0;function gP(){pn.isTouch||(pn.isTouch=!0,window.performance&&document.addEventListener("mousemove",Jv))}function Jv(){var t=performance.now();t-Mm<20&&(pn.isTouch=!1,document.removeEventListener("mousemove",Jv)),Mm=t}function yP(){var t=document.activeElement;if(fP(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function bP(){document.addEventListener("touchstart",gP,Nr),window.addEventListener("blur",yP)}var vP=typeof window<"u"&&typeof document<"u",wP=vP?!!window.msCrypto:!1,kP={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},SP={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Qt=Object.assign({appendTo:qv,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},kP,SP),EP=Object.keys(Qt),_P=function(e){var n=Object.keys(e);n.forEach(function(r){Qt[r]=e[r]})};function Yv(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=Qt[s])!=null?a:o}return r},{});return Object.assign({},t,n)}function TP(t,e){var n=e?Object.keys(Yv(Object.assign({},Qt,{plugins:e}))):EP,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Rm(t,e){var n=Object.assign({},e,{content:Gv(e.content,[t])},e.ignoreAttributes?{}:TP(t,e.plugins));return n.aria=Object.assign({},Qt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var xP=function(){return"innerHTML"};function qu(t,e){t[xP()]=e}function Nm(t){var e=Ds();return t===!0?e.className=Wv:(e.className=Kv,ec(t)?e.appendChild(t):qu(e,t)),e}function Pm(t,e){ec(e.content)?(qu(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?qu(t,e.content):t.textContent=e.content)}function Gu(t){var e=t.firstElementChild,n=ja(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Uv)}),arrow:n.find(function(r){return r.classList.contains(Wv)||r.classList.contains(Kv)}),backdrop:n.find(function(r){return r.classList.contains(oP)})}}function Xv(t){var e=Ds(),n=Ds();n.className=sP,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ds();r.className=Uv,r.setAttribute("data-state","hidden"),Pm(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var a=Gu(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Pm(c,t.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild(Nm(o.arrow))):l.appendChild(Nm(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}Xv.$$tippy=!0;var CP=1,Uo=[],qc=[];function OP(t,e){var n=Rm(t,Object.assign({},Qt,Yv(Om(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=xm(v,n.interactiveDebounce),m,y=CP++,w=null,E=lP(n.plugins),x={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:y,reference:t,popper:Ds(),popperInstance:w,props:n,state:x,plugins:E,clearDelayTimeouts:re,setProps:ce,setContent:we,show:Ie,hide:je,hideWithInteractivity:It,enable:J,disable:G,unmount:Un,destroy:Co};if(!n.render)return b;var N=n.render(b),k=N.popper,L=N.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+b.id,b.popper=k,t._tippy=b,k._tippy=b;var Y=E.map(function(T){return T.fn(b)}),j=t.hasAttribute("aria-expanded");return ye(),We(),ee(),Z("onCreate",[b]),n.showOnCreate&&I(),k.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&$e().addEventListener("mousemove",p)}),b;function ne(){var T=b.props.touch;return Array.isArray(T)?T:[T,0]}function ae(){return ne()[0]==="hold"}function ve(){var T;return!!((T=b.props.render)!=null&&T.$$tippy)}function ge(){return m||t}function $e(){var T=ge().parentNode;return T?pP(T):document}function Le(){return Gu(k)}function de(T){return b.state.isMounted&&!b.state.isVisible||pn.isTouch||u&&u.type==="focus"?0:Uc(b.props.delay,T?0:1,Qt.delay)}function ee(T){T===void 0&&(T=!1),k.style.pointerEvents=b.props.interactive&&!T?"":"none",k.style.zIndex=""+b.props.zIndex}function Z(T,W,q){if(q===void 0&&(q=!0),Y.forEach(function(be){be[T]&&be[T].apply(be,W)}),q){var fe;(fe=b.props)[T].apply(fe,W)}}function Ve(){var T=b.props.aria;if(T.content){var W="aria-"+T.content,q=k.id,fe=wi(b.props.triggerTarget||t);fe.forEach(function(be){var pt=be.getAttribute(W);if(b.state.isVisible)be.setAttribute(W,pt?pt+" "+q:q);else{var Bt=pt&&pt.replace(q,"").trim();Bt?be.setAttribute(W,Bt):be.removeAttribute(W)}})}}function We(){if(!(j||!b.props.aria.expanded)){var T=wi(b.props.triggerTarget||t);T.forEach(function(W){b.props.interactive?W.setAttribute("aria-expanded",b.state.isVisible&&W===ge()?"true":"false"):W.removeAttribute("aria-expanded")})}}function Ge(){$e().removeEventListener("mousemove",p),Uo=Uo.filter(function(T){return T!==p})}function Re(T){if(!(pn.isTouch&&(l||T.type==="mousedown"))){var W=T.composedPath&&T.composedPath()[0]||T.target;if(!(b.props.interactive&&Im(k,W))){if(wi(b.props.triggerTarget||t).some(function(q){return Im(q,W)})){if(pn.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else Z("onClickOutside",[b,T]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),a=!0,setTimeout(function(){a=!1}),b.state.isMounted||Ae())}}}function kt(){l=!0}function lt(){l=!1}function ct(){var T=$e();T.addEventListener("mousedown",Re,!0),T.addEventListener("touchend",Re,Nr),T.addEventListener("touchstart",lt,Nr),T.addEventListener("touchmove",kt,Nr)}function Ae(){var T=$e();T.removeEventListener("mousedown",Re,!0),T.removeEventListener("touchend",Re,Nr),T.removeEventListener("touchstart",lt,Nr),T.removeEventListener("touchmove",kt,Nr)}function O(T,W){$(T,function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&W()})}function H(T,W){$(T,W)}function $(T,W){var q=Le().box;function fe(be){be.target===q&&(Kc(q,"remove",fe),W())}if(T===0)return W();Kc(q,"remove",d),Kc(q,"add",fe),d=fe}function U(T,W,q){q===void 0&&(q=!1);var fe=wi(b.props.triggerTarget||t);fe.forEach(function(be){be.addEventListener(T,W,q),h.push({node:be,eventType:T,handler:W,options:q})})}function ye(){ae()&&(U("touchstart",g,{passive:!0}),U("touchend",_,{passive:!0})),aP(b.props.trigger).forEach(function(T){if(T!=="manual")switch(U(T,g),T){case"mouseenter":U("mouseleave",_);break;case"focus":U(wP?"focusout":"blur",A);break;case"focusin":U("focusout",A);break}})}function _e(){h.forEach(function(T){var W=T.node,q=T.eventType,fe=T.handler,be=T.options;W.removeEventListener(q,fe,be)}),h=[]}function g(T){var W,q=!1;if(!(!b.state.isEnabled||C(T)||a)){var fe=((W=u)==null?void 0:W.type)==="focus";u=T,m=T.currentTarget,We(),!b.state.isVisible&&dP(T)&&Uo.forEach(function(be){return be(T)}),T.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||o)&&b.props.hideOnClick!==!1&&b.state.isVisible?q=!0:I(T),T.type==="click"&&(o=!q),q&&!fe&&V(T)}}function v(T){var W=T.target,q=ge().contains(W)||k.contains(W);if(!(T.type==="mousemove"&&q)){var fe=D().concat(k).map(function(be){var pt,Bt=be._tippy,ui=(pt=Bt.popperInstance)==null?void 0:pt.state;return ui?{popperRect:be.getBoundingClientRect(),popperState:ui,props:n}:null}).filter(Boolean);mP(fe,T)&&(Ge(),V(T))}}function _(T){var W=C(T)||b.props.trigger.indexOf("click")>=0&&o;if(!W){if(b.props.interactive){b.hideWithInteractivity(T);return}V(T)}}function A(T){b.props.trigger.indexOf("focusin")<0&&T.target!==ge()||b.props.interactive&&T.relatedTarget&&k.contains(T.relatedTarget)||V(T)}function C(T){return pn.isTouch?ae()!==T.type.indexOf("touch")>=0:!1}function P(){F();var T=b.props,W=T.popperOptions,q=T.placement,fe=T.offset,be=T.getReferenceClientRect,pt=T.moveTransition,Bt=ve()?Gu(k).arrow:null,ui=be?{getBoundingClientRect:be,contextElement:be.contextElement||ge()}:t,Mf={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Oo){var di=Oo.state;if(ve()){var c0=Le(),rc=c0.box;["placement","reference-hidden","escaped"].forEach(function(Ao){Ao==="placement"?rc.setAttribute("data-placement",di.placement):di.attributes.popper["data-popper-"+Ao]?rc.setAttribute("data-"+Ao,""):rc.removeAttribute("data-"+Ao)}),di.attributes.popper={}}}},Ar=[{name:"offset",options:{offset:fe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pt}},Mf];ve()&&Bt&&Ar.push({name:"arrow",options:{element:Bt,padding:3}}),Ar.push.apply(Ar,(W==null?void 0:W.modifiers)||[]),b.popperInstance=iP(ui,k,Object.assign({},W,{placement:q,onFirstUpdate:f,modifiers:Ar}))}function F(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function R(){var T=b.props.appendTo,W,q=ge();b.props.interactive&&T===qv||T==="parent"?W=q.parentNode:W=Gv(T,[q]),W.contains(k)||W.appendChild(k),b.state.isMounted=!0,P()}function D(){return ja(k.querySelectorAll("[data-tippy-root]"))}function I(T){b.clearDelayTimeouts(),T&&Z("onTrigger",[b,T]),ct();var W=de(!0),q=ne(),fe=q[0],be=q[1];pn.isTouch&&fe==="hold"&&be&&(W=be),W?r=setTimeout(function(){b.show()},W):b.show()}function V(T){if(b.clearDelayTimeouts(),Z("onUntrigger",[b,T]),!b.state.isVisible){Ae();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(T.type)>=0&&o)){var W=de(!1);W?i=setTimeout(function(){b.state.isVisible&&b.hide()},W):s=requestAnimationFrame(function(){b.hide()})}}function J(){b.state.isEnabled=!0}function G(){b.hide(),b.state.isEnabled=!1}function re(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function ce(T){if(!b.state.isDestroyed){Z("onBeforeUpdate",[b,T]),_e();var W=b.props,q=Rm(t,Object.assign({},W,Om(T),{ignoreAttributes:!0}));b.props=q,ye(),W.interactiveDebounce!==q.interactiveDebounce&&(Ge(),p=xm(v,q.interactiveDebounce)),W.triggerTarget&&!q.triggerTarget?wi(W.triggerTarget).forEach(function(fe){fe.removeAttribute("aria-expanded")}):q.triggerTarget&&t.removeAttribute("aria-expanded"),We(),ee(),L&&L(W,q),b.popperInstance&&(P(),D().forEach(function(fe){requestAnimationFrame(fe._tippy.popperInstance.forceUpdate)})),Z("onAfterUpdate",[b,T])}}function we(T){b.setProps({content:T})}function Ie(){var T=b.state.isVisible,W=b.state.isDestroyed,q=!b.state.isEnabled,fe=pn.isTouch&&!b.props.touch,be=Uc(b.props.duration,0,Qt.duration);if(!(T||W||q||fe)&&!ge().hasAttribute("disabled")&&(Z("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,ve()&&(k.style.visibility="visible"),ee(),ct(),b.state.isMounted||(k.style.transition="none"),ve()){var pt=Le(),Bt=pt.box,ui=pt.content;Wc([Bt,ui],0)}f=function(){var Ar;if(!(!b.state.isVisible||c)){if(c=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,ve()&&b.props.animation){var nc=Le(),Oo=nc.box,di=nc.content;Wc([Oo,di],be),Am([Oo,di],"visible")}Ve(),We(),Cm(qc,b),(Ar=b.popperInstance)==null||Ar.forceUpdate(),Z("onMount",[b]),b.props.animation&&ve()&&H(be,function(){b.state.isShown=!0,Z("onShown",[b])})}},R()}}function je(){var T=!b.state.isVisible,W=b.state.isDestroyed,q=!b.state.isEnabled,fe=Uc(b.props.duration,1,Qt.duration);if(!(T||W||q)&&(Z("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,o=!1,ve()&&(k.style.visibility="hidden"),Ge(),Ae(),ee(!0),ve()){var be=Le(),pt=be.box,Bt=be.content;b.props.animation&&(Wc([pt,Bt],fe),Am([pt,Bt],"hidden"))}Ve(),We(),b.props.animation?ve()&&O(fe,b.unmount):b.unmount()}}function It(T){$e().addEventListener("mousemove",p),Cm(Uo,p),p(T)}function Un(){b.state.isVisible&&b.hide(),b.state.isMounted&&(F(),D().forEach(function(T){T._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),qc=qc.filter(function(T){return T!==b}),b.state.isMounted=!1,Z("onHidden",[b]))}function Co(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),_e(),delete t._tippy,b.state.isDestroyed=!0,Z("onDestroy",[b]))}}function as(t,e){e===void 0&&(e={});var n=Qt.plugins.concat(e.plugins||[]);bP();var r=Object.assign({},e,{plugins:n}),i=hP(t),s=i.reduce(function(o,a){var l=a&&OP(a,r);return l&&o.push(l),o},[]);return ec(t)?s[0]:s}as.defaultProps=Qt;as.setDefaultProps=_P;as.currentInput=pn;Object.assign({},Lv,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});as.setDefaultProps({render:Xv});class AP{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:h}=f,p=!d.textBetween(c,u).length&&cf(l.selection),m=this.element.contains(document.activeElement);return!(!(a.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,h;const{state:p,composing:m}=a,{selection:y}=p;if(m||!l&&!c)return;this.createTooltip();const{ranges:E}=y,x=Math.min(...E.map(k=>k.$from.pos)),b=Math.max(...E.map(k=>k.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,view:a,state:p,oldState:u,from:x,to:b}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(_M(p.selection)){let k=a.nodeDOM(x);const L=k.dataset.nodeViewWrapper?k:k.querySelector("[data-node-view-wrapper]");if(L&&(k=L.firstChild),k)return k.getBoundingClientRect()}return Ov(a,x,b)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=as(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),o=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,o,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Qv=t=>new at({key:typeof t.pluginKey=="string"?new Lt(t.pluginKey):t.pluginKey,view:e=>new AP({view:e,...t})});ot.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Qv({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class IP{constructor({editor:e,element:n,view:r,tippyOptions:i={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:o,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!o.hasFocus()||!u||!d||!f||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var a;if(this.preventHide){this.preventHide=!1;return}o!=null&&o.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(o.relatedTarget))||this.hide()},this.tippyBlurHandler=o=>{this.blurHandler({event:o})},this.editor=e,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=as(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,i,s;const{state:o}=e,{doc:a,selection:l}=o,{from:c,to:u}=l;if(n&&n.doc.eq(a)&&n.selection.eq(l))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:o,oldState:n}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>Ov(e,c,u))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Zv=t=>new at({key:typeof t.pluginKey=="string"?new Lt(t.pluginKey):t.pluginKey,view:e=>new IP({view:e,...t})});ot.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Zv({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const MP=fo({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Pe(null);return on(()=>{const{updateDelay:r,editor:i,pluginKey:s,shouldShow:o,tippyOptions:a}=t;i.registerPlugin(Qv({updateDelay:r,editor:i,element:n.value,pluginKey:s,shouldShow:o,tippyOptions:a}))}),Ol(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return Wr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Dm(t){return Y0((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class RP extends QM{constructor(e={}){return super(e),this.vueRenderers=es(new Map),this.contentComponent=null,this.reactiveState=Dm(this.view.state),this.reactiveExtensionStorage=Dm(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),pd(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const NP=fo({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=Pe(),n=_d();return Eg(()=>{const r=t.editor;r&&r.options.element&&e.value&&lo(()=>{if(!e.value||!r.options.element.firstChild)return;const i=X(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),Ol(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Wr(Ww,{to:e.teleportElement,key:e.id},Wr(e.component,{ref:e.id,...e.props}));t.push(n)}),Wr("div",{ref:e=>{this.rootEl=e}},...t)}}),PP=fo({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=Pe(null);return on(()=>{const{pluginKey:r,editor:i,tippyOptions:s,shouldShow:o}=t;i.registerPlugin(Zv({pluginKey:r,editor:i,element:n.value,tippyOptions:s,shouldShow:o}))}),Ol(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return Wr("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}}),DP=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,LP=et.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",De(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Av({find:DP,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),BP=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,$P=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,FP=Pt.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[si({find:BP,type:this.type})]},addPasteRules(){return[Er({find:$P,type:this.type})]}}),HP=ot.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),VP="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",jP="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Qi=(t,e)=>{for(const n in e)t[n]=e[n];return t},Ju="numeric",Yu="ascii",Xu="alpha",la="asciinumeric",Wo="alphanumeric",Qu="domain",e0="emoji",zP="scheme",UP="slashscheme",Lm="whitespace";function WP(t,e){return t in e||(e[t]=[]),e[t]}function jr(t,e,n){e[Ju]&&(e[la]=!0,e[Wo]=!0),e[Yu]&&(e[la]=!0,e[Xu]=!0),e[la]&&(e[Wo]=!0),e[Xu]&&(e[Wo]=!0),e[Wo]&&(e[Qu]=!0),e[e0]&&(e[Qu]=!0);for(const r in e){const i=WP(r,n);i.indexOf(t)<0&&i.push(t)}}function KP(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function _t(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}_t.groups={};_t.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||_t.groups;let i;return e&&e.j?i=e:(i=new _t(e),n&&r&&jr(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||_t.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new _t,Qi(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new _t,s){if(r)if(o.t&&typeof o.t=="string"){const l=Qi(KP(o.t,r),n);jr(s,l,r)}else n&&jr(s,n,r);o.t=s}return i.j[t]=o,o}};const he=(t,e,n,r,i)=>t.ta(e,n,r,i),$t=(t,e,n,r,i)=>t.tr(e,n,r,i),Bm=(t,e,n,r,i)=>t.ts(e,n,r,i),B=(t,e,n,r,i)=>t.tt(e,n,r,i),In="WORD",Zu="UWORD",so="LOCALHOST",ed="TLD",td="UTLD",ca="SCHEME",ki="SLASH_SCHEME",Ef="NUM",t0="WS",_f="NL",Ls="OPENBRACE",Bs="CLOSEBRACE",za="OPENBRACKET",Ua="CLOSEBRACKET",Wa="OPENPAREN",Ka="CLOSEPAREN",qa="OPENANGLEBRACKET",Ga="CLOSEANGLEBRACKET",Ja="FULLWIDTHLEFTPAREN",Ya="FULLWIDTHRIGHTPAREN",Xa="LEFTCORNERBRACKET",Qa="RIGHTCORNERBRACKET",Za="LEFTWHITECORNERBRACKET",el="RIGHTWHITECORNERBRACKET",tl="FULLWIDTHLESSTHAN",nl="FULLWIDTHGREATERTHAN",rl="AMPERSAND",il="APOSTROPHE",sl="ASTERISK",rr="AT",ol="BACKSLASH",al="BACKTICK",ll="CARET",lr="COLON",Tf="COMMA",cl="DOLLAR",un="DOT",ul="EQUALS",xf="EXCLAMATION",dn="HYPHEN",dl="PERCENT",fl="PIPE",hl="PLUS",pl="POUND",ml="QUERY",Cf="QUOTE",Of="SEMI",fn="SLASH",$s="TILDE",gl="UNDERSCORE",n0="EMOJI",yl="SYM";var r0=Object.freeze({__proto__:null,WORD:In,UWORD:Zu,LOCALHOST:so,TLD:ed,UTLD:td,SCHEME:ca,SLASH_SCHEME:ki,NUM:Ef,WS:t0,NL:_f,OPENBRACE:Ls,CLOSEBRACE:Bs,OPENBRACKET:za,CLOSEBRACKET:Ua,OPENPAREN:Wa,CLOSEPAREN:Ka,OPENANGLEBRACKET:qa,CLOSEANGLEBRACKET:Ga,FULLWIDTHLEFTPAREN:Ja,FULLWIDTHRIGHTPAREN:Ya,LEFTCORNERBRACKET:Xa,RIGHTCORNERBRACKET:Qa,LEFTWHITECORNERBRACKET:Za,RIGHTWHITECORNERBRACKET:el,FULLWIDTHLESSTHAN:tl,FULLWIDTHGREATERTHAN:nl,AMPERSAND:rl,APOSTROPHE:il,ASTERISK:sl,AT:rr,BACKSLASH:ol,BACKTICK:al,CARET:ll,COLON:lr,COMMA:Tf,DOLLAR:cl,DOT:un,EQUALS:ul,EXCLAMATION:xf,HYPHEN:dn,PERCENT:dl,PIPE:fl,PLUS:hl,POUND:pl,QUERY:ml,QUOTE:Cf,SEMI:Of,SLASH:fn,TILDE:$s,UNDERSCORE:gl,EMOJI:n0,SYM:yl});const gi=/[a-z]/,Gc=new RegExp("\\p{L}","u"),Jc=new RegExp("\\p{Emoji}","u"),Yc=/\d/,$m=/\s/,Fm=`
`,qP="",GP="";let Ko=null,qo=null;function JP(t){t===void 0&&(t=[]);const e={};_t.groups=e;const n=new _t;Ko==null&&(Ko=Hm(VP)),qo==null&&(qo=Hm(jP)),B(n,"'",il),B(n,"{",Ls),B(n,"}",Bs),B(n,"[",za),B(n,"]",Ua),B(n,"(",Wa),B(n,")",Ka),B(n,"<",qa),B(n,">",Ga),B(n,"",Ja),B(n,"",Ya),B(n,"",Xa),B(n,"",Qa),B(n,"",Za),B(n,"",el),B(n,"",tl),B(n,"",nl),B(n,"&",rl),B(n,"*",sl),B(n,"@",rr),B(n,"`",al),B(n,"^",ll),B(n,":",lr),B(n,",",Tf),B(n,"$",cl),B(n,".",un),B(n,"=",ul),B(n,"!",xf),B(n,"-",dn),B(n,"%",dl),B(n,"|",fl),B(n,"+",hl),B(n,"#",pl),B(n,"?",ml),B(n,'"',Cf),B(n,"/",fn),B(n,";",Of),B(n,"~",$s),B(n,"_",gl),B(n,"\\",ol);const r=$t(n,Yc,Ef,{[Ju]:!0});$t(r,Yc,r);const i=$t(n,gi,In,{[Yu]:!0});$t(i,gi,i);const s=$t(n,Gc,Zu,{[Xu]:!0});$t(s,gi),$t(s,Gc,s);const o=$t(n,$m,t0,{[Lm]:!0});B(n,Fm,_f,{[Lm]:!0}),B(o,Fm),$t(o,$m,o);const a=$t(n,Jc,n0,{[e0]:!0});$t(a,Jc,a),B(a,qP,a);const l=B(a,GP);$t(l,Jc,a);const c=[[gi,i]],u=[[gi,null],[Gc,s]];for(let d=0;d<Ko.length;d++)Gn(n,Ko[d],ed,In,c);for(let d=0;d<qo.length;d++)Gn(n,qo[d],td,Zu,u);jr(ed,{tld:!0,ascii:!0},e),jr(td,{utld:!0,alpha:!0},e),Gn(n,"file",ca,In,c),Gn(n,"mailto",ca,In,c),Gn(n,"http",ki,In,c),Gn(n,"https",ki,In,c),Gn(n,"ftp",ki,In,c),Gn(n,"ftps",ki,In,c),jr(ca,{scheme:!0,ascii:!0},e),jr(ki,{slashscheme:!0,ascii:!0},e),t=t.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<t.length;d++){const f=t[d][0],p=t[d][1]?{[zP]:!0}:{[UP]:!0};f.indexOf("-")>=0?p[Qu]=!0:gi.test(f)?Yc.test(f)?p[la]=!0:p[Yu]=!0:p[Ju]=!0,Bm(n,f,f,p)}return Bm(n,"localhost",so,{ascii:!0}),n.jd=new _t(yl),{start:n,tokens:Qi({groups:e},r0)}}function YP(t,e){const n=XP(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[o].length,f++),c+=n[o].length,s+=n[o].length,o++;s-=d,o-=f,c-=d,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function XP(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Gn(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new _t(r),s.jr=i.slice(),t.j[l]=s),t=s}return s=new _t(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Hm(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const oo={defaultProtocol:"http",events:null,format:Vm,formatHref:Vm,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Af(t,e){e===void 0&&(e=null);let n=Qi({},oo);t&&(n=Qi(n,t instanceof Af?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Af.prototype={o:oo,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:oo[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Vm(t){return t}function i0(t,e){this.t="token",this.v=t,this.tk=e}i0.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=oo.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Qi(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};function tc(t,e){class n extends i0{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const jm=tc("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),zm=tc("text"),QP=tc("nl"),Go=tc("url",{isLink:!0,toHref(t){return t===void 0&&(t=oo.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==so&&t[1].t===lr}}),Ft=t=>new _t(t);function ZP(t){let{groups:e}=t;const n=e.domain.concat([rl,sl,rr,ol,al,ll,cl,ul,dn,Ef,dl,fl,hl,pl,fn,yl,$s,gl]),r=[il,lr,Tf,un,xf,ml,Cf,Of,qa,Ga,Ls,Bs,Ua,za,Wa,Ka,Ja,Ya,Xa,Qa,Za,el,tl,nl],i=[rl,il,sl,ol,al,ll,cl,ul,dn,Ls,Bs,dl,fl,hl,pl,ml,fn,yl,$s,gl],s=Ft(),o=B(s,$s);he(o,i,o),he(o,e.domain,o);const a=Ft(),l=Ft(),c=Ft();he(s,e.domain,a),he(s,e.scheme,l),he(s,e.slashscheme,c),he(a,i,o),he(a,e.domain,a);const u=B(a,rr);B(o,rr,u),B(l,rr,u),B(c,rr,u);const d=B(o,un);he(d,i,o),he(d,e.domain,o);const f=Ft();he(u,e.domain,f),he(f,e.domain,f);const h=B(f,un);he(h,e.domain,f);const p=Ft(jm);he(h,e.tld,p),he(h,e.utld,p),B(u,so,p);const m=B(f,dn);he(m,e.domain,f),he(p,e.domain,f),B(p,un,h),B(p,dn,m);const y=B(p,lr);he(y,e.numeric,jm);const w=B(a,dn),E=B(a,un);he(w,e.domain,a),he(E,i,o),he(E,e.domain,a);const x=Ft(Go);he(E,e.tld,x),he(E,e.utld,x),he(x,e.domain,a),he(x,i,o),B(x,un,E),B(x,dn,w),B(x,rr,u);const b=B(x,lr),N=Ft(Go);he(b,e.numeric,N);const k=Ft(Go),L=Ft();he(k,n,k),he(k,r,L),he(L,n,k),he(L,r,L),B(x,fn,k),B(N,fn,k);const Y=B(l,lr),j=B(c,lr),ne=B(j,fn),ae=B(ne,fn);he(l,e.domain,a),B(l,un,E),B(l,dn,w),he(c,e.domain,a),B(c,un,E),B(c,dn,w),he(Y,e.domain,k),B(Y,fn,k),he(ae,e.domain,k),he(ae,n,k),B(ae,fn,k);const ve=[[Ls,Bs],[za,Ua],[Wa,Ka],[qa,Ga],[Ja,Ya],[Xa,Qa],[Za,el],[tl,nl]];for(let ge=0;ge<ve.length;ge++){const[$e,Le]=ve[ge],de=B(k,$e);B(L,$e,de),B(de,Le,k);const ee=Ft(Go);he(de,n,ee);const Z=Ft();he(de,r),he(ee,n,ee),he(ee,r,Z),he(Z,n,ee),he(Z,r,Z),B(ee,Le,k),B(Z,Le,k)}return B(s,so,x),B(s,_f,QP),{start:s,tokens:r0}}function eD(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,i++,u++;if(f<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Xc(zm,e,o)),o=[]),i-=f,u-=f;const h=d.t,p=n.slice(i-u,i);s.push(Xc(h,e,p))}}return o.length>0&&s.push(Xc(zm,e,o)),s}function Xc(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const tD=typeof console<"u"&&console&&console.warn||(()=>{}),nD="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Be={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function rD(){_t.groups={},Be.scanner=null,Be.parser=null,Be.tokenQueue=[],Be.pluginQueue=[],Be.customSchemes=[],Be.initialized=!1}function Um(t,e){if(e===void 0&&(e=!1),Be.initialized&&tD(`linkifyjs: already initialized - will not register custom scheme "${t}" ${nD}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Be.customSchemes.push([t,e])}function iD(){Be.scanner=JP(Be.customSchemes);for(let t=0;t<Be.tokenQueue.length;t++)Be.tokenQueue[t][1]({scanner:Be.scanner});Be.parser=ZP(Be.scanner.tokens);for(let t=0;t<Be.pluginQueue.length;t++)Be.pluginQueue[t][1]({scanner:Be.scanner,parser:Be.parser});Be.initialized=!0}function s0(t){return Be.initialized||iD(),eD(Be.parser.start,t,YP(Be.scanner.start,t))}function o0(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Af(n),i=s0(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function sD(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function oD(t){return new at({key:new Lt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=fM(n.doc,[...e]);if(kM(a).forEach(({newRange:c})=>{const u=pM(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(w=>w!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;const y=s0(p).map(w=>w.toObject());if(!sD(y))return!1;y.filter(w=>w.isLink).map(w=>({...w,from:m+w.start+1,to:m+w.end+1})).filter(w=>r.schema.marks.code?!r.doc.rangeHasMark(w.from,w.to,r.schema.marks.code):!0).filter(w=>t.validate?t.validate(w.value):!0).forEach(w=>{hf(w.from,w.to,r.doc).some(E=>E.mark.type===t.type)||o.addMark(w.from,w.to,t.type.create({href:w.href}))})}}),!!o.steps.length)return o}})}function aD(t){return new at({key:new Lt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(t.whenNotEditable&&e.editable||r.button!==0)return!1;let o=r.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=Cv(e.state,t.type.name),c=r.target,u=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:l.href,d=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function lD(t){return new at({key:new Lt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=o0(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(t.editor.commands.setMark(t.type,{href:l.href}),!0)}}})}const cD=Pt.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){Um(t);return}Um(t.scheme,t.optionalSlashes)})},onDestroy(){rD()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:t}){var e;return!((e=t.href)===null||e===void 0)&&e.startsWith("javascript:")?["a",De(this.options.HTMLAttributes,{...t,href:""}),0]:["a",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Er({find:t=>{const e=[];if(t){const n=o0(t).filter(r=>r.isLink);n.length&&n.forEach(r=>e.push({text:r.value,data:{href:r.href},index:r.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(oD({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(aD({type:this.type,whenNotEditable:this.options.openOnClick==="whenNotEditable"})),this.options.linkOnPaste&&t.push(lD({editor:this.editor,type:this.type})),t}}),uD=Pt.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",De(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=_o(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),dD=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(?!channel\/)(?!@)(.+)?$/,fD=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)\/(?!channel\/)(?!@)(.+)?$/g,a0=t=>t.match(dD),Wm=t=>t?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",hD=t=>{const{url:e,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:c,interfaceLanguage:u,ivLoadPolicy:d,loop:f,modestBranding:h,nocookie:p,origin:m,playlist:y,progressBarColor:w,startAt:E}=t;if(!a0(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const L=e.split("/").pop();return L?`${Wm(p)}${L}`:null}const b=/(?:v=|shorts\/)([-\w]+)/gm.exec(e);if(!b||!b[1])return null;let N=`${Wm(p)}${b[1]}`;const k=[];return n===!1&&k.push("fs=0"),r&&k.push("autoplay=1"),i&&k.push(`cc_lang_pref=${i}`),s&&k.push("cc_load_policy=1"),o||k.push("controls=0"),a&&k.push("disablekb=1"),l&&k.push("enablejsapi=1"),c&&k.push(`end=${c}`),u&&k.push(`hl=${u}`),d&&k.push(`iv_load_policy=${d}`),f&&k.push("loop=1"),h&&k.push("modestbranding=1"),m&&k.push(`origin=${m}`),y&&k.push(`playlist=${y}`),E&&k.push(`start=${E}`),w&&k.push(`color=${w}`),k.length&&(N+=`?${k.join("&")}`),N},pD=et.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>a0(t.src)?e.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[ZM({find:fD,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){const e=hD({url:t.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:t.start||0});return t.src=e,["div",{"data-youtube-video":""},["iframe",De(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},t)]]}}),mD=ot.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),gD={components:{EditorContent:NP,FloatingMenu:PP,BubbleMenu:MP},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{editor:null,value:""}},watch:{modelValue(t){this.editor.getHTML()!==t&&this.editor.commands.setContent(t,!1)}},mounted(){this.editor=new RP({extensions:[ZR,LP,FP.configure({multicolor:!0}),HP.configure({types:["heading","paragraph"]}),cD.configure({openOnClick:!1}),uD,pD.configure({controls:!1}),mD],content:this.modelValue,onUpdate:()=>{this.$emit("update:modelValue",this.editor.getHTML())}})},methods:{clicked(){document.getElementById("formFile").click()},async handleFileChange(){let t=new FormData;if(t.append("image",this.$refs.fileInput.files[0]),this.$refs.fileInput.files[0]){const n=await fetch("https://test-am3oxfhvvq-em.a.run.app/upload/image",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token")},body:t}),r=await n.json();n.ok&&this.addImage(r.url)}},addVideo(){const t=prompt("Enter YouTube URL");this.editor.commands.setYoutubeVideo({src:t})},addImage(t){t&&this.editor.chain().focus().setImage({src:t,alt:"dfg"}).run()},setLink(){const t=this.editor.getAttributes("link").href,e=window.prompt("URL",t);if(e!==null){if(e===""){this.editor.chain().focus().extendMarkRange("link").unsetLink().run();return}this.editor.chain().focus().extendMarkRange("link").setLink({href:e}).run()}}},beforeUnmount(){this.editor.destroy()}},yD={key:0,class:"border rounded border-0"},bD=["value"],vD=["disabled"],wD=S("i",{class:"fa-solid fa-rotate-left fa-lg"},null,-1),kD=[wD],SD=["disabled"],ED=S("i",{class:"fa-solid fa-rotate-right fa-lg"},null,-1),_D=[ED],TD=["disabled"],xD=S("i",{class:"fa-solid fa-bold fa-lg",style:{color:"rgb(10, 10, 10)"}},null,-1),CD=[xD],OD=["disabled"],AD=S("i",{class:"fa-solid fa-italic fa-lg",style:{color:"rgb(31, 25, 26)"}},null,-1),ID=[AD],MD=S("i",{class:"fa-solid fa-align-left fa-lg",style:{color:"rgb(155, 51, 216)"}},null,-1),RD=[MD],ND=S("i",{class:"fa-solid fa-align-center fa-lg",style:{color:"rgb(216, 51, 183)"}},null,-1),PD=[ND],DD=S("i",{class:"fa-solid fa-align-right fa-lg",style:{color:"rgb(216, 51, 87)"}},null,-1),LD=[DD],BD=S("i",{class:"fa-solid fa-highlighter fa-lg",style:{color:"#FF9900"}},null,-1),$D=[BD],FD=S("i",{class:"fa-solid fa-link fa-lg",style:{color:"rgb(51, 166, 216)"}},null,-1),HD=[FD],VD=S("i",{class:"fa-solid fa-list-ul fa-lg",style:{color:"rgb(53, 144, 25)"}},null,-1),jD=[VD],zD=S("i",{class:"fa-solid fa-list-ol fa-lg",style:{color:"rgb(216, 192, 51)"}},null,-1),UD=[zD],WD=S("i",{class:"fa-solid fa-align-left fa-lg",style:{color:"rgb(155, 51, 216)"}},null,-1),KD=[WD],qD=S("i",{class:"fa-solid fa-align-center fa-lg",style:{color:"rgb(216, 51, 183)"}},null,-1),GD=[qD],JD=S("i",{class:"fa-solid fa-align-right fa-lg",style:{color:"rgb(216, 51, 87)"}},null,-1),YD=[JD],XD=S("i",{class:"fa-brands fa-youtube fa-lg",style:{color:"rgb(181, 54, 54)"}},null,-1),QD=[XD],ZD=S("i",{class:"fa-solid fa-image fa-lg",style:{color:"rgb(36, 83, 163)"}},null,-1),eL=[ZD];function tL(t,e,n,r,i,s){const o=ws("bubble-menu"),a=ws("floating-menu"),l=ws("editor-content");return Q(),pe(Je,null,[S("input",{ref:"fileInput",type:"file",id:"formFile",accept:"image/*",hidden:"",onChange:e[0]||(e[0]=(...c)=>s.handleFileChange&&s.handleFileChange(...c))},null,544),i.editor?(Q(),pe("div",yD,[S("input",{type:"color",onInput:e[1]||(e[1]=c=>i.editor.chain().focus().setColor(c.target.value).run()),value:i.editor.getAttributes("textStyle").color},null,40,bD),S("button",{onClick:e[2]||(e[2]=c=>i.editor.chain().focus().setColor("#958DF1").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#958DF1"})})}," purple ",2),S("button",{onClick:e[3]||(e[3]=c=>i.editor.chain().focus().setColor("#F98181").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#F98181"})})}," red ",2),S("button",{onClick:e[4]||(e[4]=c=>i.editor.chain().focus().setColor("#FBBC88").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#FBBC88"})})}," orange ",2),S("button",{onClick:e[5]||(e[5]=c=>i.editor.chain().focus().setColor("#FAF594").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#FAF594"})})}," yellow ",2),S("button",{onClick:e[6]||(e[6]=c=>i.editor.chain().focus().setColor("#70CFF8").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#70CFF8"})})}," blue ",2),S("button",{onClick:e[7]||(e[7]=c=>i.editor.chain().focus().setColor("#94FADB").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#94FADB"})})}," teal ",2),S("button",{onClick:e[8]||(e[8]=c=>i.editor.chain().focus().setColor("#B9F18D").run()),class:xe({"is-active":i.editor.isActive("textStyle",{color:"#B9F18D"})})}," green ",2),S("button",{onClick:e[9]||(e[9]=c=>i.editor.chain().focus().unsetColor().run())}," unsetColor "),S("button",{onClick:e[10]||(e[10]=c=>i.editor.chain().focus().undo().run()),disabled:!i.editor.can().chain().focus().undo().run(),class:"border-0 rounded bg-transparent me-1"},kD,8,vD),S("button",{onClick:e[11]||(e[11]=c=>i.editor.chain().focus().redo().run()),disabled:!i.editor.can().chain().focus().redo().run(),class:"border-0 rounded bg-transparent me-1"},_D,8,SD)])):Nt("",!0),i.editor?(Q(),gt(o,{key:1,editor:i.editor,"tippy-options":{duration:100},class:"bubble-menu bg-secondary-subtle rounded p-1"},{default:Et(()=>[S("button",{onClick:e[12]||(e[12]=c=>i.editor.chain().focus().toggleHeading({level:3}).run()),class:xe([{"is-active":i.editor.isActive("heading",{level:1})},"border-0 rounded bg-transparent"])}," Heading ",2),S("button",{onClick:e[13]||(e[13]=c=>i.editor.chain().focus().toggleBold().run()),disabled:!i.editor.can().chain().focus().toggleBold().run(),class:xe([{"is-active":i.editor.isActive("bold")},"border-0 bg-transparent"])},CD,10,TD),S("button",{onClick:e[14]||(e[14]=c=>i.editor.chain().focus().toggleItalic().run()),disabled:!i.editor.can().chain().focus().toggleItalic().run(),class:xe([{"is-active":i.editor.isActive("italic")},"border-0 bg-transparent"])},ID,10,OD),S("button",{onClick:e[15]||(e[15]=c=>i.editor.chain().focus().setTextAlign("left").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"left"})},"border-0 bg-transparent"])},RD,2),S("button",{onClick:e[16]||(e[16]=c=>i.editor.chain().focus().setTextAlign("center").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"center"})},"border-0 bg-transparent"])},PD,2),S("button",{onClick:e[17]||(e[17]=c=>i.editor.chain().focus().setTextAlign("right").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"right"})},"border-0 bg-transparent"])},LD,2),S("button",{onClick:e[18]||(e[18]=c=>i.editor.chain().focus().toggleHighlight().run()),class:xe([{"is-active":i.editor.isActive("highlight")},"border-0 bg-transparent"])},$D,2),S("button",{onClick:e[19]||(e[19]=(...c)=>s.setLink&&s.setLink(...c)),class:xe([{"is-active":i.editor.isActive("link")},"border-0 bg-transparent"])},HD,2)]),_:1},8,["editor"])):Nt("",!0),i.editor?(Q(),gt(a,{key:2,editor:i.editor,"tippy-options":{duration:100},class:"m-1"},{default:Et(()=>[S("button",{onClick:e[20]||(e[20]=c=>i.editor.chain().focus().toggleHeading({level:3}).run()),class:xe([{"is-active":i.editor.isActive("heading",{level:1})},"border-0 rounded bg-transparent"])}," Heading ",2),S("button",{onClick:e[21]||(e[21]=c=>i.editor.chain().focus().toggleBulletList().run()),class:xe([{"is-active":i.editor.isActive("bulletList")},"border-0 rounded bg-transparent"])},jD,2),S("button",{onClick:e[22]||(e[22]=c=>i.editor.chain().focus().toggleOrderedList().run()),class:xe([{"is-active":i.editor.isActive("orderedList")},"border-0 rounded bg-transparent"])},UD,2),S("button",{onClick:e[23]||(e[23]=c=>i.editor.chain().focus().setTextAlign("left").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"left"})},"border-0 bg-transparent"])},KD,2),S("button",{onClick:e[24]||(e[24]=c=>i.editor.chain().focus().setTextAlign("center").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"center"})},"border-0 bg-transparent"])},GD,2),S("button",{onClick:e[25]||(e[25]=c=>i.editor.chain().focus().setTextAlign("right").run()),class:xe([{"is-active":i.editor.isActive({textAlign:"right"})},"border-0 bg-transparent"])},YD,2),S("button",{id:"add",onClick:e[26]||(e[26]=(...c)=>s.addVideo&&s.addVideo(...c)),class:"border-0 rounded bg-transparent"},QD),S("button",{onClick:e[27]||(e[27]=(...c)=>s.clicked&&s.clicked(...c)),class:"border-0 rounded bg-transparent"},eL)]),_:1},8,["editor"])):Nt("",!0),Se(l,{editor:i.editor,class:"p-2 border"},null,8,["editor"])],64)}const nL=xn(gD,[["render",tL]]),ls=t=>(co("data-v-8c9281f8"),t=t(),uo(),t),rL={class:"p-0"},iL=ls(()=>S("h4",{class:"text-center"},"Comments",-1)),sL=ls(()=>S("div",{style:{padding:"10px 8px"},class:"d-flex justify-content-between"},[S("div",{class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},[S("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",checked:""}),S("label",{class:"btn btn-outline-secondary",for:"btnradio1"},"Latest"),S("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off"}),S("label",{class:"btn btn-outline-secondary",for:"btnradio2"},"Popular")]),S("button",{class:"button bg-success-subtle border-0 rounded p-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"Add To Discussion")],-1)),oL={class:"list-group list-group-flush",style:{"margin-bottom":"2rem"}},aL={class:""},lL={class:"col d-flex flex-column position-static"},cL={class:"d-flex justify-content-between"},uL={class:""},dL={class:"border-0 bg-transparent"},fL={key:0,class:"fa-solid fa-thumbs-up p-1"},hL=ls(()=>S("small",{class:"opacity-75 text-nowrap p-1"},"100",-1)),pL=["onClick","href","aria-controls"],mL=ls(()=>S("small",{class:"opacity-75 text-nowrap p-1"},"View Replies",-1)),gL=[mL],yL=["onClick"],bL=["id"],vL={class:"col d-flex flex-column position-static"},wL={class:"d-flex justify-content-between"},kL={class:""},SL={class:"border-0 bg-transparent"},EL={key:0,class:"fa-solid fa-thumbs-up p-1"},_L=ls(()=>S("small",{class:"opacity-75 text-nowrap p-1"},"100",-1)),TL=["onClick"],xL={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},CL={class:"modal-dialog mt-5"},OL={class:"modal-content"},AL={class:"modal-body"},IL={class:"alert alert-warning alert-dismissible m-0 p-1 mb-1",role:"alert",key:"alert"},ML={class:"ms-1"},RL=ls(()=>S("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),NL={__name:"CommentSection",props:["id"],setup(t){const e=t;let n=Pe([]),r=Pe(""),i=Pe(""),s=Pe(-1),o=Pe(!0);Pe("");function a(u,d){r.value=u,s.value=d,o.value=!1}on(async()=>{const u=`https://test-am3oxfhvvq-em.a.run.app/article/comments/${e.id}`,d=await fetch(u,{method:"GET",Allow:["GET","POST"],headers:{"Content-Type":"application/json"}}),f=await d.json();if(d.ok){for(const h of f)n.value.push({id:h.id,content:h.content,likes_count:h.likes_count,username:h.username,image:h.image,replies:[]});console.log(n)}});async function l(){if(l.value=="")alert("type first");else{const d=await fetch("https://test-am3oxfhvvq-em.a.run.app/comment",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({article:e.id,parent:s.value,content:i.value})});await d.json(),d.ok&&(s!=-1?n.value.filter(f=>f.id==s)[0].replies.push({content:i.value,likes_count:0,username:localStorage.getItem("name"),image:localStorage.getItem("image")}):n.value.push({id:e.id,content:i.value,likes_count:0,username:localStorage.getItem("name"),image:localStorage.getItem("image")}))}}async function c(u){const d=await fetch(`https://test-am3oxfhvvq-em.a.run.app/nested/comments/${u}`,{method:"GET",headers:{"Content-type":"application/json"}}),f=await d.json();d.ok&&(n.value.filter(h=>h.id==u)[0].replies=f)}return(u,d)=>(Q(),pe("div",rL,[iL,sL,S("ul",oL,[(Q(!0),pe(Je,null,ru(X(n),(f,h)=>(Q(),pe("li",{class:"list-group-item mt-2 p-2 border rounded shadow",key:h},[S("div",aL,[S("div",null,[S("div",lL,[Se(lp,{name:f.username,time:"2 days ago",content:f.content},null,8,["name","content"]),S("div",cL,[S("div",uL,[S("button",dL,[(Q(),pe("i",fL)),hL]),S("button",{class:"border-0 bg-transparent",onClick:p=>c(f.id),"data-bs-toggle":"collapse",href:`#nested${f.id}`,"aria-expanded":"false","aria-controls":`nested${f.id}`},gL,8,pL)]),S("small",{class:"opacity-75 text-nowrap",onClick:p=>a(f.username,f.id),"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"Reply",8,yL)]),S("div",{class:"collapse",id:`nested${f.id}`},[(Q(!0),pe(Je,null,ru(f.replies,p=>(Q(),pe("div",{class:"card-body ms-4 mt-2 border-start p-2 rounded",key:p.content},[S("div",null,[S("div",vL,[Se(lp,{name:p.username,time:"2 days ago",content:p.content},null,8,["name","content"]),S("div",wL,[S("div",kL,[S("button",SL,[(Q(),pe("i",EL)),_L])]),S("small",{class:"opacity-75 text-nowrap",onClick:m=>a(f.username,f.id),"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"Reply",8,TL)])])])]))),128))],8,bL)])])])]))),128))]),S("div",xL,[S("div",CL,[S("div",OL,[S("div",AL,[X(o)?Nt("",!0):(Q(),pe("div",IL,[S("span",ML,"Replying to "+hs(X(r)),1),S("span",{class:"btn-close p-2",onClick:d[0]||(d[0]=f=>{He(o)?o.value=!0:o=!0,He(r)?r.value="":r="",He(s)?s.value=-1:s=-1})})])),Se(nL)]),S("div",{class:"modal-footer"},[RL,S("button",{type:"button",class:"btn btn-primary",onClick:l},"Comment")])])])])]))}},PL=xn(NL,[["__scopeId","data-v-8c9281f8"]]),DL={},LL={"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},BL=S("div",{class:"modal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",role:"dialog"},[S("div",{class:"modal-dialog",role:"document"},[S("div",{class:"modal-content rounded-3 shadow"},[S("div",{class:"modal-body p-4 text-center"},[S("h5",{class:"mb-0"},"Login Required!"),S("p",{class:"mb-0"},"You can always change your mind in your account settings.")]),S("div",{class:"modal-footer flex-nowrap p-0"},[S("button",{type:"button",class:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0 border-end"},[S("strong",null,"Login")]),S("button",{type:"button",class:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0","data-bs-dismiss":"modal"},"Close")])])])],-1);function $L(t,e){return Q(),pe(Je,null,[S("div",LL,[_w(t.$slots,"default")]),BL],64)}const FL=xn(DL,[["render",$L]]),l0=t=>(co("data-v-52a86135"),t=t(),uo(),t),HL={class:"card border rounded-3 p-4 mb-4"},VL={class:""},jL={class:""},zL={style:{padding:"4px 0px"}},UL={class:"badge bg-success-subtle text-success m-1"},WL={class:"badge bg-danger-subtle text-danger m-1"},KL={class:"card border-0 mb-3"},qL=["src"],GL=["src"],JL={class:"card-title mb-3"},YL={class:"text-reset"},XL={class:""},QL=l0(()=>S("br",null,null,-1)),ZL={class:"d-flex justify-content-between"},eB=["data-bs-target","aria-controls"],tB=["id"],nB={class:"offcanvas-body small",style:{padding:"0"}},rB=l0(()=>S("i",{class:"fa-regular fa-bookmark p-2 fa-lg"},null,-1)),iB={__name:"NewsContent",props:{title:String,image:String,content:String,source:String,category:String,country:String,id:Number,has_liked:Boolean,has_saved:Boolean},setup(t){const e=ts();Md();let n=Pe(!1),r=localStorage.getItem("auth-token");async function i(a){e.state.articles.filter(l=>l.id==a)[0].has_liked=!e.state.articles.filter(l=>l.id==a)[0].has_liked,await e.dispatch("likeArticle",a).then(()=>{})}async function s(a){e.state.articles.filter(l=>l.id==a)[0].has_saved=!e.state.articles.filter(l=>l.id==a)[0].has_saved,await e.dispatch("saveArticle",a).then(()=>{})}function o(){navigator.share?navigator.share({text:title,url:`https://abhijatain.github.io/Indians/article/${id}`,title:"Bharat Guild"}):(navigator.clipboard.writeText(`https://abhijatain.github.io/Indians/article/${id}`),alert("Link Copied"))}return(a,l)=>(Q(),pe("div",HL,[S("div",VL,[S("div",jL,[S("div",zL,[S("span",UL,hs(t.category),1),S("span",WL,hs(t.country),1)]),S("div",KL,[t.category=="stats"?(Q(),pe("img",{key:0,class:"rounded-3",src:t.image},null,8,qL)):(Q(),pe("iframe",{key:1,height:"250",class:"embed-responsive-item rounded-3",src:t.image,allowfullscreen:""},null,8,GL))]),S("h2",JL,[S("p",YL,hs(t.title),1)])]),S("div",XL,[S("p",null,hs(t.content),1)]),QL,S("div",ZL,[S("div",null,[t.has_liked?(Q(),pe("i",{key:0,class:"fa-solid fa-heart p-2 fa-lg",onClick:l[0]||(l[0]=c=>i(t.id)),style:{color:"#FB6D48"}})):(Q(),pe("i",{key:1,class:"fa-regular fa-heart p-2 fa-lg",onClick:l[1]||(l[1]=c=>i(t.id))})),S("i",{"data-bs-toggle":"offcanvas","data-bs-target":`#${t.id}`,"aria-controls":t.id,class:"fa-regular fa-comment fa-lg p-2",onClick:l[2]||(l[2]=c=>He(n)?n.value=!X(n):n=!X(n))},null,8,eB),S("div",{class:"offcanvas offcanvas-bottom",tabindex:"-1",id:t.id,"aria-labelledby":"offcanvasBottomLabel",style:{height:"60vh"}},[S("div",nB,[X(n)?(Q(),gt(PL,{key:0,id:t.id},null,8,["id"])):Nt("",!0)])],8,tB),S("i",{class:"fa-solid fa-share p-2 fa-lg",onClick:l[3]||(l[3]=c=>o())})]),S("div",null,[X(r)?t.has_saved?(Q(),pe("i",{key:1,class:"fa-solid fa-bookmark p-2 fa-lg",onClick:l[4]||(l[4]=c=>s(t.id))})):(Q(),pe("i",{key:2,class:"fa-regular fa-bookmark p-2 fa-lg",onClick:l[5]||(l[5]=c=>s(t.id))})):(Q(),gt(FL,{key:0},{default:Et(()=>[rB]),_:1}))])])])]))}},sB=xn(iB,[["__scopeId","data-v-52a86135"]]),oB={style:{"margin-top":"4rem"}},aB={class:"container"},lB={class:"row d-flex justify-content-center"},cB=S("div",{class:"card border rounded-3 up-hover p-4 mb-4"},[S("div",{class:""},[S("div",{class:""},[S("div",{style:{padding:"4px 0px"}},[S("span",{class:"badge bg-success-subtle text-success m-1"},"canada"),S("span",{class:"badge bg-warning-subtle text-warning m-1"},"abroad"),S("span",{class:"badge bg-danger-subtle text-danger m-1"},"success"),S("span",{class:"badge bg-primary-subtle text-primary m-1"},"religion")]),S("h2",{class:"card-title mb-3"},[S("p",{class:"text-reset"},"7 common mistakes everyone makes while traveling")]),S("div",{class:"d-flex align-items-center position-relative mt-3 mb-3"},[S("div",{class:"avatar me-2"},[S("img",{class:"avatar-img rounded-circle",height:"38px",src:cy,alt:"Bharat Guild"})]),S("div",null,[S("h5",{class:"mb-1"},[S("a",{href:"#",class:"stretched-link text-reset btn-link"},"Lori Ferguson")]),S("ul",{class:"nav align-items-center small"},[S("li",{class:"nav-item me-3"},"Mar 07, 2022"),S("li",{class:"nav-item"},[S("i",{class:"far fa-clock me-1"}),Xn("5 min read")])])])])]),S("div",{class:""},[S("p",null,"For who thoroughly her boy estimating conviction. Removed demands expense account in outward tedious do. Particular way thoroughly unaffected projection favorable Mrs can be projecting own. Thirty it matter enable become admire in giving. See resolved goodness felicity shy civility domestic had but. Drawings offended yet answered Jennings perceive laughing six did far. ")]),S("div",{class:"card border-0"},[S("iframe",{class:"rounded-3",width:"",height:"312",src:"https://www.youtube.com/embed/lMpTRda55Cw?si=pa8TQe4XtjNd9ldg",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""})])])],-1),uB={key:0,class:"container"},dB={class:"row d-flex justify-content-center"},fB={class:"card mb-5 shadow-lg",style:{"max-width":"95%"}},hB={class:"card mb-5 shadow-lg",style:{"max-width":"95%"}},pB={__name:"ArticleCard",setup(t){const e=ts();let n=Pe([]),r=Pe([]);const i=Md();let s=Pe(!1);on(async()=>{function a(){e.state.isDataLoaded&&(console.log(e.state.articles),clearInterval(l),s.value=!0)}const l=setInterval(a,50)});function o(a){n.value=r.value,a.v==!1&&(n.value=n.value.filter(l=>l.category!="voilent")),a.p==!1&&(n.value=n.value.filter(l=>l.category!="political")),a.r==!1&&(n.value=n.value.filter(l=>l.category!="religion")),a.o==!1&&(n.value=n.value.filter(l=>l.category!="stats"))}return(a,l)=>(Q(),pe("div",oB,[S("div",aB,[X(i).params.id=="all"||!X(i).params.id?(Q(),gt(Gx,{key:0})):Nt("",!0),X(i).params.id=="all"||!X(i).params.id?(Q(),gt(jx,{key:1,onFilterData:l[0]||(l[0]=c=>o(c))})):Nt("",!0),S("div",lB,[(Q(!0),pe(Je,null,ru(X(e).state.articles,(c,u)=>(Q(),gt(sB,{key:u,title:c.title,content:c.summary,source:c.source,image:c.youtube,id:c.id,has_liked:c.has_liked,has_saved:c.has_saved,category:c.category,country:c.country},null,8,["title","content","source","image","id","has_liked","has_saved","category","country"]))),128))]),cB]),X(s)?Nt("",!0):(Q(),pe("div",uB,[S("div",dB,[S("div",fB,[Se(ap)]),S("div",hB,[Se(ap)])])]))]))}},Km={__name:"HomeView",setup(t){const e=ts();return on(async()=>{e.state.isDataLoaded==!1&&await e.dispatch("getArticles")}),(n,r)=>(Q(),pe("main",null,[Se(pB)]))}},mB=o1({history:LS("/IndiansAbroad/"),routes:[{path:"/",name:"home",component:Km},{path:"/profile",name:"profile",component:()=>Gt(()=>import("./ProfileView-BNGodp4S.js"),__vite__mapDeps([]))},{path:"/admin",name:"admin",component:()=>Gt(()=>import("./AdminView-CGK4CxlX.js"),__vite__mapDeps([]))},{path:"/search/:content",name:"search",component:()=>Gt(()=>import("./SearchView-BQtDqppQ.js"),__vite__mapDeps([0,1]))},{path:"/about",name:"about",component:()=>Gt(()=>import("./AboutView-D4TgXK5A.js"),__vite__mapDeps([]))},{path:"/saved",name:"saved",component:()=>Gt(()=>import("./SavedView-C39pXZcZ.js"),__vite__mapDeps([2,3]))},{path:"/search",name:"search",component:()=>Gt(()=>import("./SearchView-BQtDqppQ.js"),__vite__mapDeps([0,1]))},{path:"/article/:id/:title",name:"article",component:Km},{path:"/discusion",name:"discusion",component:()=>Gt(()=>import("./DiscusionView-CtT3mMdQ.js"),__vite__mapDeps([4,5,1]))},{path:"/add/discussion",name:"add",component:()=>Gt(()=>import("./AddView-DgIcthaJ.js"),__vite__mapDeps([6,7]))},{path:"/discusion/:id/:title",name:"single",props:!0,component:()=>Gt(()=>import("./SingleView-p-eywVO8.js"),__vite__mapDeps([8,9]))},{path:"/notifications",name:"notfications",component:()=>Gt(()=>import("./NotificationView-BCHmgddg.js"),__vite__mapDeps([]))},{path:"/help",name:"help",component:()=>Gt(()=>import("./HelpView-jPtx4dgH.js"),__vite__mapDeps([10,5]))}]}),gB=sS({state(){return{image:localStorage.getItem("image"),articles:[],discusions:[],token:localStorage.getItem("auth-token"),isDataLoaded:!1,isDiscusionLoaded:!1}},mutations:{add_articles(t,e){t.articles=e},add_discusions(t,e){t.discusions=e}},actions:{async getArticles({commit:t,state:e}){const n=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article/all",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-Type":"application/json"}}),r=await n.json();n.ok&&(t("add_articles",r),e.isDataLoaded=!0)},async likeArticle({commit:t,state:e},n){await fetch("https://test-am3oxfhvvq-em.a.run.app/like/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-type":"application/json"},body:JSON.stringify({id:n})})},async saveArticle({commit:t,state:e},n){await fetch("https://test-am3oxfhvvq-em.a.run.app/save",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-type":"application/json"},body:JSON.stringify({id:n})})},async getDiscusions({commit:t,state:e}){const n=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/discusion/all",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-Type":"application/json"}}),r=await n.json();n.ok&&(t("add_discusions",r),e.isDiscusionLoaded=!0)},async likeDiscusion({commit:t,state:e},n){await fetch("https://test-am3oxfhvvq-em.a.run.app/like/discusion",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-type":"application/json"},body:JSON.stringify({id:n})})},async saveDiscusion({commit:t,state:e},n){await fetch("https://test-am3oxfhvvq-em.a.run.app/save/discusion",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":e.token,"Content-type":"application/json"},body:JSON.stringify({id:n})})}},getters:{getCount(t){return t.articles}}});var yB="firebase",bB="10.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(yB,bB,"app");const vB={apiKey:"AIzaSyDDvzYMAuIceDytcmOZ6Bf28MtjrEFcOjk",authDomain:"bharat-guild-f02d0.firebaseapp.com",projectId:"bharat-guild-f02d0",storageBucket:"bharat-guild-f02d0.appspot.com",messagingSenderId:"724548591779",appId:"1:724548591779:web:da77bee042632d34f71f16",measurementId:"G-H9XNY6PEY3"};Ey(vB);const If=Rk(Px);If.use(gB);If.use(mB);If.mount("#app");export{Md as A,PL as C,Je as F,Gx as T,xn as _,Ml as a,cy as b,pe as c,gt as d,on as e,Nt as f,S as g,SB as h,He as i,ru as j,ts as k,ws as l,EB as m,Se as n,Q as o,Et as p,Xn as q,Pe as r,co as s,hs as t,X as u,kB as v,wB as w,uo as x,fy as y,nL as z};
