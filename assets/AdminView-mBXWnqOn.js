import{r as l,e as V,c as d,u as s,f as w,g as t,w as r,v as m,i,h as j,F as E,j as L,o as p,t as N}from"./index-BDG0Syhw.js";const P={class:"container mt-5 p-5"},U={key:0,class:"spinner-border",role:"status"},G=t("span",{class:"visually-hidden"},"Loading...",-1),q=[G],B=t("h1",null,"Tags",-1),D={class:"mb-3"},J=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),M=t("h1",null,"Categories",-1),Y={class:"mb-3"},R=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),z={key:1,class:"spinner-border",role:"status"},H=t("span",{class:"visually-hidden"},"Loading...",-1),K=[H],Q=t("h1",null,"Article",-1),W={class:"mb-3"},X=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Title",-1),Z={class:"mb-3"},$=t("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Summary",-1),ee={class:"mb-3"},te=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Youtube",-1),oe={class:"mb-3"},ae=t("label",{for:"exampleFormControlInput1",class:"form-label"},"source",-1),le={class:"mb-3"},se=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Category",-1),ne=["value"],re={key:2,class:"spinner-border",role:"status"},ie=t("span",{class:"visually-hidden"},"Loading...",-1),ue=[ie],me={__name:"AdminView",setup(ce){let y=l(!0),x=l(!0),g=l(!0),b=l([]),h=l(null),u=l(null),f=l(null),_=l(null),n=l(null),v=l(null),c=l(null);V(async()=>{const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),o=await a.json();a.ok&&b.value.push(...o)});async function S(){if(c.value!=1){let e=function(A){const O=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,k=A.match(O);return k&&k[2].length===11?"https://www.youtube.com/embed/"+k[2]:null};const T=n.value,C=e(T);n.value=C,console.log(C)}g.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({title:f.value,summary:_.value,youtube:n.value,source:v.value,category_id:c.value})}),o=await a.json();a.ok&&(g.value=!0,alert(o.msg))}async function F(){const a=performance.now();if(x.value=!1,b.value.filter(e=>e.name!=u.value)){const e=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:u.value})}),T=await e.json();e.ok&&(b.value.push(T),x.value=!0)}else alert("exists category");const o=performance.now();alert(`${o-a}`)}async function I(){y.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/tag",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:h.value})}),o=await a.json();a.ok&&(y.value=!0,alert(o.message))}return(a,o)=>(p(),d("div",P,[s(y)?w("",!0):(p(),d("div",U,q)),B,t("div",D,[J,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=e=>i(h)?h.value=e:h=e)},null,512),[[m,s(h)]])]),t("button",{onClick:I,class:"mb-5"},"Add"),M,t("div",Y,[R,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=e=>i(u)?u.value=e:u=e)},null,512),[[m,s(u)]])]),t("button",{onClick:F,class:"mb-5"},"Add"),s(x)?w("",!0):(p(),d("div",z,K)),Q,t("div",W,[X,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=e=>i(f)?f.value=e:f=e)},null,512),[[m,s(f)]])]),t("div",Z,[$,r(t("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[3]||(o[3]=e=>i(_)?_.value=e:_=e)},null,512),[[m,s(_)]])]),t("div",ee,[te,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[4]||(o[4]=e=>i(n)?n.value=e:n=e)},null,512),[[m,s(n)]])]),t("div",oe,[ae,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[5]||(o[5]=e=>i(v)?v.value=e:v=e)},null,512),[[m,s(v)]])]),t("div",le,[se,r(t("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":o[6]||(o[6]=e=>i(c)?c.value=e:c=e)},[(p(!0),d(E,null,L(s(b),e=>(p(),d("option",{value:e.id},N(e.name),9,ne))),256))],512),[[j,s(c)]])]),s(g)?w("",!0):(p(),d("div",re,ue)),t("button",{onClick:S},"Add")]))}};export{me as default};
