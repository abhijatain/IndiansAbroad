import{r as l,e as V,c as f,u as s,f as k,g as e,w as i,v as u,i as c,o as _}from"./index-2gowxRyk.js";const j={class:"container mt-5 p-5"},E={key:0,class:"spinner-border",role:"status"},N=e("span",{class:"visually-hidden"},"Loading...",-1),P=[N],L=e("h1",null,"Tags",-1),U={class:"mb-3"},G=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),q=e("h1",null,"Categories",-1),B={class:"mb-3"},J=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),M={key:1,class:"spinner-border",role:"status"},Y=e("span",{class:"visually-hidden"},"Loading...",-1),D=[Y],R=e("h1",null,"Article",-1),z={class:"mb-3"},H=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Title",-1),K={class:"mb-3"},Q=e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Summary",-1),W={class:"mb-3"},X=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Youtube",-1),Z={class:"mb-3"},$=e("label",{for:"exampleFormControlInput1",class:"form-label"},"source",-1),ee=e("div",{class:"mb-3"},[e("label",{for:"exampleFormControlInput1",class:"form-label"},"Category")],-1),te={key:2,class:"spinner-border",role:"status"},oe=e("span",{class:"visually-hidden"},"Loading...",-1),ae=[oe],ne={__name:"AdminView",setup(le){let v=l(!0),b=l(!0),y=l(!0),x=l([]),m=l(null),r=l(null),d=l(null),p=l(null),n=l(null),h=l(null),w=l(null);V(async()=>{const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),o=await a.json();a.ok&&x.value.push(...o)});async function I(){if(w.value!=1){let t=function(F){const O=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,T=F.match(O);return T&&T[2].length===11?"https://www.youtube.com/embed/"+T[2]:null};const g=n.value,C=t(g);n.value=C,console.log(C)}y.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({title:d.value,summary:p.value,youtube:n.value,source:h.value,category_id:w.value})}),o=await a.json();a.ok&&(y.value=!0,alert(o.msg))}async function S(){const a=performance.now();if(b.value=!1,x.value.filter(t=>t.name!=r.value)){const t=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:r.value})}),g=await t.json();t.ok&&(x.value.push(g),b.value=!0)}else alert("exists category");const o=performance.now();alert(`${o-a}`)}async function A(){v.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/tag",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:m.value})}),o=await a.json();a.ok&&(v.value=!0,alert(o.message))}return(a,o)=>(_(),f("div",j,[s(v)?k("",!0):(_(),f("div",E,P)),L,e("div",U,[G,i(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=t=>c(m)?m.value=t:m=t)},null,512),[[u,s(m)]])]),e("button",{onClick:A,class:"mb-5"},"Add"),q,e("div",B,[J,i(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=t=>c(r)?r.value=t:r=t)},null,512),[[u,s(r)]])]),e("button",{onClick:S,class:"mb-5"},"Add"),s(b)?k("",!0):(_(),f("div",M,D)),R,e("div",z,[H,i(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=t=>c(d)?d.value=t:d=t)},null,512),[[u,s(d)]])]),e("div",K,[Q,i(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[3]||(o[3]=t=>c(p)?p.value=t:p=t)},null,512),[[u,s(p)]])]),e("div",W,[X,i(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[4]||(o[4]=t=>c(n)?n.value=t:n=t)},null,512),[[u,s(n)]])]),e("div",Z,[$,i(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[5]||(o[5]=t=>c(h)?h.value=t:h=t)},null,512),[[u,s(h)]])]),ee,s(y)?k("",!0):(_(),f("div",te,ae)),e("button",{onClick:I},"Add")]))}};export{ne as default};
