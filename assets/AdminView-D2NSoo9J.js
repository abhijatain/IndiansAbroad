import{r as l,e as q,c as u,u as s,f as S,g as t,w as r,v as m,i,h as F,F as O,j,o as c,t as V}from"./index-CLEvLJ1K.js";const J={class:"container mt-5 p-5"},B={key:0,class:"spinner-border",role:"status"},M=t("span",{class:"visually-hidden"},"Loading...",-1),D=[M],Y=t("h1",null,"Tags",-1),R={class:"mb-3"},z=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),H=t("h1",null,"Categories",-1),K={class:"mb-3"},Q=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),W={key:1,class:"spinner-border",role:"status"},X=t("span",{class:"visually-hidden"},"Loading...",-1),Z=[X],$=t("h1",null,"Article",-1),ee={class:"mb-3"},te=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Title",-1),oe={class:"mb-3"},ae=t("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Summary",-1),le={class:"mb-3"},se=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Youtube",-1),ne={class:"mb-3"},re=t("label",{for:"exampleFormControlInput1",class:"form-label"},"source",-1),ie={class:"mb-3"},ue=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Country",-1),ce=["value"],de={class:"mb-3"},me=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Category",-1),pe=["value"],he={key:0,class:"spinner-border",role:"status"},fe=t("span",{class:"visually-hidden"},"Loading...",-1),_e=[fe],ve=t("h1",null,"Add Categories",-1),ye={class:"mb-3"},be=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),Te={__name:"AdminView",setup(ge){let T=l(!0),k=l(!0),C=l(!0),x=l([]),I=l([]),f=l(null),_=l(null),p=l(null),v=l(null),y=l(null),d=l(null),b=l(null),h=l(null),g=l(null);q(async()=>{const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),o=await a.json();a.ok&&x.value.push(...o);const e=await fetch("https://test-am3oxfhvvq-em.a.run.app/countries",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),n=await e.json();e.ok&&I.value.push(...n)});async function E(){if(h.value!=1){let e=function(G){const L=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,w=G.match(L);return w&&w[2].length===11?"https://www.youtube.com/embed/"+w[2]:null};const n=d.value,A=e(n);d.value=A,console.log(A)}C.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({title:v.value,summary:y.value,youtube:d.value,source:b.value,category_id:h.value,country_id:g.value})}),o=await a.json();a.ok&&(C.value=!0,alert(o.msg))}async function P(){const a=performance.now();if(k.value=!1,x.value.filter(e=>e.name!=p.value)){const e=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:p.value})}),n=await e.json();e.ok&&(x.value.push(n),k.value=!0)}else alert("exists category");const o=performance.now();alert(`${o-a}`)}async function N(){T.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/tag",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:f.value})}),o=await a.json();a.ok&&(T.value=!0,alert(o.message))}async function U(){const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/country",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:_.value})}),o=await a.json();a.ok&&alert(o.message)}return(a,o)=>(c(),u("div",J,[s(T)?S("",!0):(c(),u("div",B,D)),Y,t("div",R,[z,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=e=>i(f)?f.value=e:f=e)},null,512),[[m,s(f)]])]),t("button",{onClick:N,class:"mb-5"},"Add"),H,t("div",K,[Q,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=e=>i(p)?p.value=e:p=e)},null,512),[[m,s(p)]])]),t("button",{onClick:P,class:"mb-5"},"Add"),s(k)?S("",!0):(c(),u("div",W,Z)),$,t("div",ee,[te,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=e=>i(v)?v.value=e:v=e)},null,512),[[m,s(v)]])]),t("div",oe,[ae,r(t("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[3]||(o[3]=e=>i(y)?y.value=e:y=e)},null,512),[[m,s(y)]])]),t("div",le,[se,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[4]||(o[4]=e=>i(d)?d.value=e:d=e)},null,512),[[m,s(d)]])]),t("div",ne,[re,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[5]||(o[5]=e=>i(b)?b.value=e:b=e)},null,512),[[m,s(b)]])]),t("div",ie,[ue,r(t("select",{class:"form-select","onUpdate:modelValue":o[6]||(o[6]=e=>i(g)?g.value=e:g=e)},[(c(!0),u(O,null,j(s(I),(e,n)=>(c(),u("option",{value:e.id,key:n},V(e.name),9,ce))),128))],512),[[F,s(g)]])]),t("div",de,[me,r(t("select",{class:"form-select","onUpdate:modelValue":o[7]||(o[7]=e=>i(h)?h.value=e:h=e)},[(c(!0),u(O,null,j(s(x),(e,n)=>(c(),u("option",{value:e.id,key:n},V(e.name),9,pe))),128))],512),[[F,s(h)]]),s(C)?S("",!0):(c(),u("div",he,_e)),t("button",{onClick:E},"Add")]),ve,t("div",ye,[be,r(t("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[8]||(o[8]=e=>i(_)?_.value=e:_=e)},null,512),[[m,s(_)]])]),t("button",{onClick:U,class:"mb-5"},"Add")]))}};export{Te as default};
