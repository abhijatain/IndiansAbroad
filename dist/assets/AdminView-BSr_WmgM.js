import{r as l,e as V,c,u as s,f as k,g as e,w as r,v as m,i,h as j,F as E,j as L,o as p,t as N}from"./index-NzUzKq6V.js";const P={class:"container mt-5 p-5"},U={key:0,class:"spinner-border",role:"status"},G=e("span",{class:"visually-hidden"},"Loading...",-1),q=[G],B=e("h1",null,"Tags",-1),D={class:"mb-3"},J=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),M=e("h1",null,"Categories",-1),Y={class:"mb-3"},R=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),z={key:1,class:"spinner-border",role:"status"},H=e("span",{class:"visually-hidden"},"Loading...",-1),K=[H],Q=e("h1",null,"Article",-1),W={class:"mb-3"},X=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Title",-1),Z={class:"mb-3"},$=e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Summary",-1),ee={class:"mb-3"},te=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Youtube",-1),oe={class:"mb-3"},ae=e("label",{for:"exampleFormControlInput1",class:"form-label"},"source",-1),le={class:"mb-3"},se=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Category",-1),ne=["value"],re={key:2,class:"spinner-border",role:"status"},ie=e("span",{class:"visually-hidden"},"Loading...",-1),ue=[ie],me={__name:"AdminView",setup(de){let y=l(!0),x=l(!0),g=l(!0),b=l([]),h=l(null),u=l(null),f=l(null),_=l(null),n=l(null),v=l(null),d=l(null);V(async()=>{const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),o=await a.json();a.ok&&b.value.push(...o)});async function w(){if(d.value!=1){let t=function(A){const O=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,T=A.match(O);return T&&T[2].length===11?"https://www.youtube.com/embed/"+T[2]:null};const I=n.value,C=t(I);n.value=C,console.log(C)}g.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({title:f.value,summary:_.value,youtube:n.value,source:v.value,category_id:d.value})}),o=await a.json();a.ok&&(g.value=!0,alert(o.msg))}async function S(){if(x.value=!1,b.value.filter(a=>a.name!=u.value)){const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:u.value})}),o=await a.json();a.ok&&(b.value.push(o),x.value=!0,alert("added"))}else alert("exists category")}async function F(){y.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/tag",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:h.value})}),o=await a.json();a.ok&&(y.value=!0,alert(o.message))}return(a,o)=>(p(),c("div",P,[s(y)?k("",!0):(p(),c("div",U,q)),B,e("div",D,[J,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=t=>i(h)?h.value=t:h=t)},null,512),[[m,s(h)]])]),e("button",{onClick:F,class:"mb-5"},"Add"),M,e("div",Y,[R,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=t=>i(u)?u.value=t:u=t)},null,512),[[m,s(u)]])]),e("button",{onClick:S,class:"mb-5"},"Add"),s(x)?k("",!0):(p(),c("div",z,K)),Q,e("div",W,[X,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=t=>i(f)?f.value=t:f=t)},null,512),[[m,s(f)]])]),e("div",Z,[$,r(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[3]||(o[3]=t=>i(_)?_.value=t:_=t)},null,512),[[m,s(_)]])]),e("div",ee,[te,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[4]||(o[4]=t=>i(n)?n.value=t:n=t)},null,512),[[m,s(n)]])]),e("div",oe,[ae,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[5]||(o[5]=t=>i(v)?v.value=t:v=t)},null,512),[[m,s(v)]])]),e("div",le,[se,r(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":o[6]||(o[6]=t=>i(d)?d.value=t:d=t)},[(p(!0),c(E,null,L(s(b),t=>(p(),c("option",{value:t.id},N(t.name),9,ne))),256))],512),[[j,s(d)]])]),s(g)?k("",!0):(p(),c("div",re,ue)),e("button",{onClick:w},"Add")]))}};export{me as default};
