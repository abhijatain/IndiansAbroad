import{r as l,e as V,c as d,u as s,f as w,g as e,w as r,v as m,i,h as j,F as E,j as L,o as p,t as N}from"./index-D8lNUOA0.js";const P={class:"container mt-5 p-5"},U={key:0,class:"spinner-border",role:"status"},G=e("span",{class:"visually-hidden"},"Loading...",-1),q=[G],B=e("h1",null,"Tags",-1),J={class:"mb-3"},M=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),D=e("h1",null,"Categories",-1),Y={class:"mb-3"},R=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),z={key:1,class:"spinner-border",role:"status"},H=e("span",{class:"visually-hidden"},"Loading...",-1),K=[H],Q=e("h1",null,"Article",-1),W={class:"mb-3"},X=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Title",-1),Z={class:"mb-3"},$=e("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Summary",-1),ee={class:"mb-3"},te=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Youtube",-1),oe={class:"mb-3"},ae=e("label",{for:"exampleFormControlInput1",class:"form-label"},"source",-1),le={class:"mb-3"},se=e("label",{for:"exampleFormControlInput1",class:"form-label"},"Category",-1),ne=e("option",{selected:""},"Open this select menu",-1),re=["value"],ie={key:2,class:"spinner-border",role:"status"},ue=e("span",{class:"visually-hidden"},"Loading...",-1),ce=[ue],pe={__name:"AdminView",setup(de){let g=l(!0),x=l(!0),T=l(!0),y=l([]),h=l(null),u=l(null),f=l(null),_=l(null),n=l(null),v=l(null),c=l(null);V(async()=>{const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"GET",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"}}),o=await a.json();a.ok&&y.value.push(...o)});async function S(){if(c.value!=1){let t=function(A){const O=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,k=A.match(O);return k&&k[2].length===11?"https://www.youtube.com/embed/"+k[2]:null};const b=n.value,C=t(b);n.value=C,console.log(C)}T.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/article",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({title:f.value,summary:_.value,youtube:n.value,source:v.value,category_id:c.value})}),o=await a.json();a.ok&&(T.value=!0,alert(o.msg))}async function F(){const a=performance.now();if(x.value=!1,y.value.filter(t=>t.name!=u.value)){const t=await fetch("https://test-am3oxfhvvq-em.a.run.app/api/category",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:u.value})}),b=await t.json();t.ok&&(y.value.push(b),x.value=!0)}else alert("exists category");const o=performance.now();alert(`${o-a}`)}async function I(){g.value=!1;const a=await fetch("https://test-am3oxfhvvq-em.a.run.app/create/tag",{method:"POST",Allow:["GET","POST"],headers:{"Authentication-Token":localStorage.getItem("auth-token"),"Content-Type":"application/json"},body:JSON.stringify({name:h.value})}),o=await a.json();a.ok&&(g.value=!0,alert(o.message))}return(a,o)=>(p(),d("div",P,[s(g)?w("",!0):(p(),d("div",U,q)),B,e("div",J,[M,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=t=>i(h)?h.value=t:h=t)},null,512),[[m,s(h)]])]),e("button",{onClick:I,class:"mb-5"},"Add"),D,e("div",Y,[R,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=t=>i(u)?u.value=t:u=t)},null,512),[[m,s(u)]])]),e("button",{onClick:F,class:"mb-5"},"Add"),s(x)?w("",!0):(p(),d("div",z,K)),Q,e("div",W,[X,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=t=>i(f)?f.value=t:f=t)},null,512),[[m,s(f)]])]),e("div",Z,[$,r(e("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":o[3]||(o[3]=t=>i(_)?_.value=t:_=t)},null,512),[[m,s(_)]])]),e("div",ee,[te,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[4]||(o[4]=t=>i(n)?n.value=t:n=t)},null,512),[[m,s(n)]])]),e("div",oe,[ae,r(e("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com","onUpdate:modelValue":o[5]||(o[5]=t=>i(v)?v.value=t:v=t)},null,512),[[m,s(v)]])]),e("div",le,[se,r(e("select",{class:"form-select","onUpdate:modelValue":o[6]||(o[6]=t=>i(c)?c.value=t:c=t)},[ne,(p(!0),d(E,null,L(s(y),(t,b)=>(p(),d("option",{value:t.id,key:b},N(t.name),9,re))),128))],512),[[j,s(c)]])]),s(T)?w("",!0):(p(),d("div",ie,ce)),e("button",{onClick:S},"Add")]))}};export{pe as default};
